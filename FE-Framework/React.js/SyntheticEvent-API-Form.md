# äº‹ä»¶å¤„ç†

## åˆæˆäº‹ä»¶ç‰¹æ€§

æ„é€ åˆæˆäº‹ä»¶ SyntheticEvent

åœ¨Reactä¸­ï¼Œåˆæˆäº‹ä»¶ç‰¹æ€§æ˜¯æŒ‡Reactæ¡†æ¶ä¸ºå¼€å‘è€…æä¾›çš„ä¸€ç§äº‹ä»¶ç³»ç»Ÿï¼Œç”¨äºå¤„ç†ç”¨æˆ·äº¤äº’ã€‚å®ƒæ˜¯å»ºç«‹åœ¨åŸç”ŸDOMäº‹ä»¶ç³»ç»Ÿä¹‹ä¸Šçš„ï¼Œä½†æœ‰ä¸€äº›åŒºåˆ«å’Œä¼˜åŒ–ã€‚

Reactçš„åˆæˆäº‹ä»¶ç‰¹æ€§å…·æœ‰ä»¥ä¸‹ä¸€äº›ç‰¹ç‚¹ï¼š

è·¨æµè§ˆå™¨å…¼å®¹æ€§ï¼šReactçš„åˆæˆäº‹ä»¶ç³»ç»Ÿå¯ä»¥å¤„ç†ä¸åŒæµè§ˆå™¨ä¹‹é—´çš„å…¼å®¹æ€§é—®é¢˜ï¼Œä½¿å¼€å‘è€…æ— éœ€æ‹…å¿ƒä¸åŒæµè§ˆå™¨ä¹‹é—´çš„å·®å¼‚ã€‚

äº‹ä»¶å§”æ‰˜ï¼šReactçš„åˆæˆäº‹ä»¶ç‰¹æ€§å®ç°äº†äº‹ä»¶å§”æ‰˜æ¨¡å¼ï¼Œå³å°†äº‹ä»¶ç»‘å®šåˆ°ç»„ä»¶çš„çˆ¶å…ƒç´ ä¸Šï¼Œé€šè¿‡å†’æ³¡æœºåˆ¶æ¥å¤„ç†äº‹ä»¶ï¼Œæé«˜äº†æ€§èƒ½å’Œæ•ˆç‡ã€‚

åˆæˆäº‹ä»¶å¯¹è±¡ï¼šReactçš„åˆæˆäº‹ä»¶ç‰¹æ€§æä¾›äº†ä¸€ä¸ªåˆæˆäº‹ä»¶å¯¹è±¡ï¼ŒåŒ…å«äº†ä¸äº‹ä»¶ç›¸å…³çš„ä¿¡æ¯ï¼Œå¦‚äº‹ä»¶ç±»å‹ã€ç›®æ ‡å…ƒç´ ã€é”®ç›˜é¼ æ ‡ä½ç½®ç­‰ï¼Œå¼€å‘è€…å¯ä»¥æ–¹ä¾¿åœ°è·å–å’Œæ“ä½œè¿™äº›ä¿¡æ¯ã€‚

è‡ªåŠ¨ç»‘å®šthisï¼šReactçš„åˆæˆäº‹ä»¶ç‰¹æ€§ä¼šè‡ªåŠ¨å°†äº‹ä»¶å¤„ç†å‡½æ•°çš„thisç»‘å®šåˆ°ç»„ä»¶å®ä¾‹ä¸Šï¼Œæ— éœ€æ‰‹åŠ¨ç»‘å®šï¼Œç®€åŒ–äº†ä»£ç ç¼–å†™ã€‚

äº‹ä»¶æ± ï¼šReactçš„åˆæˆäº‹ä»¶ç‰¹æ€§å®ç°äº†äº‹ä»¶æ± æœºåˆ¶ï¼Œé€šè¿‡é‡ç”¨äº‹ä»¶å¯¹è±¡æ¥å‡å°‘å†…å­˜æ¶ˆè€—å’Œåƒåœ¾å›æ”¶çš„å‹åŠ›ï¼Œæé«˜äº†æ€§èƒ½ã€‚

å¯¹å†’æ³¡å’Œæ•è·çš„æ”¯æŒï¼šReactçš„åˆæˆäº‹ä»¶ç‰¹æ€§æ”¯æŒäº‹ä»¶çš„å†’æ³¡å’Œæ•è·é˜¶æ®µï¼Œå¼€å‘è€…å¯ä»¥æ ¹æ®éœ€è¦è¿›è¡Œäº‹ä»¶çš„æ•è·æˆ–å†’æ³¡å¤„ç†ã€‚

æ€»ä¹‹ï¼ŒReactçš„åˆæˆäº‹ä»¶ç‰¹æ€§é€šè¿‡è·¨æµè§ˆå™¨å…¼å®¹æ€§ã€äº‹ä»¶å§”æ‰˜ã€åˆæˆäº‹ä»¶å¯¹è±¡ã€è‡ªåŠ¨ç»‘å®šthisã€äº‹ä»¶æ± å’Œå¯¹å†’æ³¡å’Œæ•è·çš„æ”¯æŒç­‰ç‰¹ç‚¹ï¼Œä¸ºå¼€å‘è€…æä¾›äº†æ–¹ä¾¿ã€é«˜æ•ˆå’Œçµæ´»çš„äº‹ä»¶å¤„ç†æ–¹å¼ã€‚

We all know the pain of cross-browser development when some browsers donâ€™t support the feature we want. So we have to maintain multiple implementations. React makes our life easier and wraps all HTML DOM events into a synthetic event wrapper.
All it does â€” it normalises behaviour across different browsers, and we donâ€™t need to worry about cross-browser code maintenance. We can reference event properties and use helper functions such as preventDefault, React will provide consistency across all browsers.

All DOM events are bubbling up from the innermost element out its parents. For example, we have a button inside a form. When we subscribe to click events from both, click events will firstly arrive from the button and then from the form. To prevent events from bubbling up to parent elements we should call event.stopPropagation.

Whenever we attach several event listeners to the same element, to prevent propagation we need to call event.stopImmediatePropagation. In React we usually use this function when integrating with 3rd party libraries.

When React wraps events into synthetic event wrappers, it reuses synthetic event objects to optimise performance. After function using the event finished execution, React will nullify or reset the event object to the default state and reuse it for a new event.

It means that if we use any asynchronous code like promise or timer, then we will end up with a nullified event. To avoid such behaviour, we should call event.persist to keep this event object for ourselves. React will not nullify this event object for further reuse.

Synthetic events in React are needed to normalise behaviour across different browsers. All DOM events propagate from the target to its parents. When we need to stop it, we can call event.stopPropagation or event.stopImmediatePropagation.

React optimises performance by reusing synthetic event objects, which means that after the event handler finished execution react will nullify the event object to reuse it later. To reference events from asynchronous code we need to call event.persist to notify React not to nullify it.

### refs

1. https://7km.top/main/synthetic-event/
2. https://cloud.tencent.com/developer/article/2193659
3. https://chrisdeo.github.io/2018/12/06/React%E4%B8%AD%E7%9A%84%E5%90%88%E6%88%90%E4%BA%8B%E4%BB%B6%E4%BB%A5%E5%8F%8A%E4%BC%A0%E5%8F%82%E9%97%AE%E9%A2%98/
4. https://www.cnblogs.com/WindrunnerMax/p/14305631.html
5. https://juejin.cn/post/6844903988794671117
6. https://www.freecodecamp.org/chinese/news/best-practices-for-react/

# å‚æ•°ä¼ é€’/ç»„ä»¶é€šä¿¡

1. ç»„ä»¶é€šä¿¡çš„æ–¹å¼æœ‰å“ªäº›

     - â½—ç»„ä»¶å‘â¼¦ç»„ä»¶é€šè®¯: â½—ç»„ä»¶å¯ä»¥å‘â¼¦ç»„ä»¶é€šè¿‡ä¼  props çš„â½…å¼ï¼Œå‘â¼¦ç»„ä»¶è¿›â¾é€šè®¯
     - â¼¦ç»„ä»¶å‘â½—ç»„ä»¶é€šè®¯: props+å›è°ƒçš„â½…å¼ï¼Œâ½—ç»„ä»¶å‘â¼¦ç»„ä»¶ä¼ é€’propsè¿›â¾é€šè®¯ï¼Œæ­¤propsä¸ºä½œâ½¤åŸŸä¸ºâ½—ç»„ä»¶â¾ƒèº«çš„å‡½æ•°ï¼Œâ¼¦ç»„ä»¶è°ƒâ½¤è¯¥å‡½æ•°ï¼Œå°†â¼¦ç»„ä»¶æƒ³è¦ä¼ é€’çš„ä¿¡æ¯ï¼Œä½œä¸ºå‚æ•°ï¼Œä¼ é€’åˆ°â½—ç»„ä»¶çš„ä½œâ½¤åŸŸä¸­
     - å…„å¼Ÿç»„ä»¶é€šä¿¡: æ‰¾åˆ°è¿™ä¸¤ä¸ªå…„å¼ŸèŠ‚ç‚¹å…±åŒçš„â½—èŠ‚ç‚¹,ç»“åˆä¸Šâ¾¯ä¸¤ç§â½…å¼ç”±â½—èŠ‚ç‚¹è½¬å‘ä¿¡æ¯è¿›â¾é€šä¿¡
     - è·¨å±‚çº§é€šä¿¡: Context è®¾è®¡â½¬çš„æ˜¯ä¸ºäº†å…±äº«é‚£äº›å¯¹äºâ¼€ä¸ªç»„ä»¶æ ‘â½½â¾”æ˜¯â€œå…¨å±€â€çš„æ•°æ®ï¼Œä¾‹å¦‚å½“å‰è®¤è¯çš„â½¤æˆ·ã€ä¸»é¢˜æˆ–â¾¸é€‰è¯­â¾”ï¼Œå¯¹äºè·¨è¶Šå¤šå±‚çš„å…¨å±€æ•°æ®é€šè¿‡ Context é€šä¿¡å†é€‚åˆä¸è¿‡
     - å‘å¸ƒè®¢é˜…æ¨¡å¼: å‘å¸ƒè€…å‘å¸ƒäº‹ä»¶ï¼Œè®¢é˜…è€…ç›‘å¬äº‹ä»¶å¹¶åšå‡ºååº”,æˆ‘ä»¬å¯ä»¥é€šè¿‡å¼•â¼Ševentæ¨¡å—è¿›â¾é€šä¿¡
     - å…¨å±€çŠ¶æ€ç®¡ç†â¼¯å…·: å€ŸåŠ©Reduxæˆ–è€…Mobxç­‰å…¨å±€çŠ¶æ€ç®¡ç†â¼¯å…·è¿›â¾é€šä¿¡,è¿™ç§â¼¯å…·ä¼šç»´æŠ¤â¼€ä¸ªå…¨å±€çŠ¶æ€ä¸­â¼¼Store,å¹¶æ ¹æ®ä¸åŒçš„äº‹ä»¶äº§â½£æ–°çš„çŠ¶æ€

2. çˆ¶å­ç»„ä»¶çš„é€šä¿¡æ–¹å¼

     - çˆ¶ç»„ä»¶å‘å­ç»„ä»¶é€šä¿¡ï¼šçˆ¶ç»„ä»¶é€šè¿‡ props å‘å­ç»„ä»¶ä¼ é€’éœ€è¦çš„ä¿¡æ¯ã€‚
     - å­ç»„ä»¶å‘çˆ¶ç»„ä»¶é€šä¿¡ï¼šprops+å›è°ƒçš„æ–¹å¼ã€‚


3. è·¨çº§ç»„ä»¶çš„é€šä¿¡æ–¹å¼

   ä½¿ç”¨contextï¼Œcontextç›¸å½“äºä¸€ä¸ªå¤§å®¹å™¨ï¼Œå¯ä»¥æŠŠè¦é€šä¿¡çš„å†…å®¹æ”¾åœ¨è¿™ä¸ªå®¹å™¨ä¸­ï¼Œè¿™æ ·ä¸ç®¡åµŒå¥—å¤šæ·±ï¼Œéƒ½å¯ä»¥éšæ„å–ç”¨ï¼Œå¯¹äºè·¨è¶Šå¤šå±‚çš„å…¨å±€æ•°æ®å¯ä»¥ä½¿ç”¨contextå®ç°ã€‚

   useContext: https://github.com/linhaishe/FEnotes/blob/main/FE-Framework/React.js/hooks/useContent.md

4. éåµŒå¥—å…³ç³»ç»„ä»¶çš„é€šä¿¡æ–¹å¼

   å³æ²¡æœ‰ä»»ä½•åŒ…å«å…³ç³»çš„ç»„ä»¶ï¼ŒåŒ…æ‹¬å…„å¼Ÿç»„ä»¶ä»¥åŠä¸åœ¨åŒä¸€ä¸ªçˆ¶çº§ä¸­çš„éå…„å¼Ÿç»„ä»¶ã€‚

     - å¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰äº‹ä»¶é€šä¿¡ï¼ˆå‘å¸ƒè®¢é˜…æ¨¡å¼ï¼‰

     - å¯ä»¥é€šè¿‡reduxç­‰è¿›è¡Œå…¨å±€çŠ¶æ€ç®¡ç†

     - å¦‚æœæ˜¯å…„å¼Ÿç»„ä»¶é€šä¿¡ï¼Œå¯ä»¥æ‰¾åˆ°è¿™ä¸¤ä¸ªå…„å¼ŸèŠ‚ç‚¹å…±åŒçš„çˆ¶èŠ‚ç‚¹, ç»“åˆçˆ¶å­é—´é€šä¿¡æ–¹å¼è¿›è¡Œé€šä¿¡ã€‚


5. å¦‚ä½•è§£å†³propså±‚çº§è¿‡æ·±çš„é—®é¢˜

   - ä½¿ç”¨Context APIï¼šæä¾›ä¸€ç§ç»„ä»¶ä¹‹é—´çš„çŠ¶æ€å…±äº«ï¼Œè€Œä¸å¿…é€šè¿‡æ˜¾å¼ç»„ä»¶æ ‘é€å±‚ä¼ é€’propsï¼›

   - ä½¿ç”¨Reduxç­‰çŠ¶æ€åº“ã€‚

## å‘å¸ƒè®¢é˜…æ¨¡å¼ç²—è§£ğŸŒŸ

```js
const MessageState = {
  // å½“å‰çš„çŠ¶æ€
  state: {},
  // è®¢é˜…çš„æ¶ˆæ¯åˆ—è¡¨
  subscriptions: [],
  // æ›´æ–°çŠ¶æ€ï¼Œå¹¶ä¸”è§¦å‘è®¢é˜…çš„æ¶ˆæ¯
  setState(state, skipCallbacks = false) {
    this.state = {
      ...this.state,
      ...state,
    };
    if (!skipCallbacks) {
      this.subscriptions.forEach((cb) => cb(this.state));
    }
  },
  // è·å–çŠ¶æ€
  getState() {
    return this.state;
  },
  // è®¢é˜…ä¸€ä¸ªæ¶ˆæ¯ï¼Œè¿”å›å€¼æ˜¯å–æ¶ˆè®¢é˜…å‡½æ•°
  subscribe(cb) {
    this.subscriptions.push(cb);
    return () => {
      this.unsubscribe(cb);
    };
  },
  // å–æ¶ˆè®¢é˜…
  unsubscribe(cb) {
    this.subscriptions = this.subscriptions.filter((item) => item !== cb);
  },
};

export default MessageState;
```

![image-20231105172234129](https://s2.loli.net/2023/11/05/Wap74vocTYzMbQt.png)

![image-20231105172304627](https://s2.loli.net/2023/11/05/WCVlORYwFtaErGi.png)

ç¼ºç‚¹ï¼š 

1. å¤æ‚æ€§å¢åŠ ï¼šå‘å¸ƒè®¢é˜…æ¨¡å¼ä¼šå¼•å…¥æ›´å¤šçš„ä»£ç å’Œé€»è¾‘ï¼Œå¢åŠ äº†ç»„ä»¶çš„å¤æ‚æ€§ã€‚ç›¸æ¯”äºä½¿ç”¨å…¶ä»–çŠ¶æ€ç®¡ç†åº“ï¼ˆå¦‚Reduxæˆ–Mobxï¼‰ï¼Œå‘å¸ƒè®¢é˜…æ¨¡å¼éœ€è¦æ‰‹åŠ¨ç®¡ç†è®¢é˜…ã€å–æ¶ˆè®¢é˜…å’Œäº‹ä»¶çš„å‘å¸ƒã€‚
2. éš¾ä»¥è¿½è¸ªçŠ¶æ€æµå‘ï¼šåœ¨å‘å¸ƒè®¢é˜…æ¨¡å¼ä¸‹ï¼ŒçŠ¶æ€çš„æµå‘ä¸å¤ªæ˜ç¡®ã€‚å½“ä¸€ä¸ªäº‹ä»¶è¢«å‘å¸ƒæ—¶ï¼Œå¯èƒ½ä¼šå¯¼è‡´å¤šä¸ªè®¢é˜…è€…å¯¹çŠ¶æ€è¿›è¡Œæ›´æ–°ï¼Œè€Œè¿™äº›æ›´æ–°å¯èƒ½ä¼šç›¸äº’å½±å“ã€‚è¿™æ ·ä¼šå¢åŠ è°ƒè¯•å’Œç»´æŠ¤çš„éš¾åº¦ï¼Œå› ä¸ºå¾ˆéš¾å‡†ç¡®è¿½è¸ªçŠ¶æ€çš„å˜åŒ–è·¯å¾„ã€‚
3. æ€§èƒ½é—®é¢˜ï¼šç”±äºå‘å¸ƒè®¢é˜…æ¨¡å¼ä¸­çš„äº‹ä»¶é€šå¸¸æ˜¯å¹¿æ’­çš„ï¼Œæ„å‘³ç€æ¯ä¸ªè®¢é˜…è€…éƒ½ä¼šæ¥æ”¶åˆ°è¯¥äº‹ä»¶ã€‚è¿™å¯èƒ½å¯¼è‡´ä¸å¿…è¦çš„æ¸²æŸ“å’Œæ›´æ–°æ“ä½œï¼Œä»è€Œé™ä½æ€§èƒ½ã€‚
4. ä¸å®¹æ˜“è¿›è¡ŒçŠ¶æ€ä¼˜åŒ–ï¼šåœ¨å‘å¸ƒè®¢é˜…æ¨¡å¼ä¸­ï¼ŒçŠ¶æ€çš„æ›´æ–°é€šå¸¸æ˜¯å…¨å±€çš„ï¼Œå³æ‰€æœ‰è®¢é˜…è€…éƒ½ä¼šæ”¶åˆ°ç›¸åŒçš„æ›´æ–°ã€‚è¿™å¯èƒ½å¯¼è‡´ä¸å¿…è¦çš„æ¸²æŸ“å’Œæ€§èƒ½é—®é¢˜ã€‚è€Œåœ¨å…¶ä»–çŠ¶æ€ç®¡ç†åº“ä¸­ï¼Œå¯ä»¥æ›´ç²¾ç»†åœ°æ§åˆ¶çŠ¶æ€çš„æ›´æ–°ï¼Œè¿›è¡Œæ€§èƒ½ä¼˜åŒ–ã€‚
5. äº‹ä»¶æ€»çº¿ï¼ˆevent busï¼‰å’Œå‘å¸ƒè®¢é˜…å±äºåŒä¸€ç§è§£å†³æ–¹æ¡ˆï¼Œé€šè¿‡æ³¨å†Œå…¬å…±äº‹ä»¶å’Œç›‘å¬å…¬å…±äº‹ä»¶è§¦å‘æ›´æ–°

refsï¼š

1. https://juejin.cn/post/7242623149752320058
2. https://aarthinim.medium.com/pubsub-in-reactjs-eaa8f9d6ec0
3. https://medium.com/@nouraldin.alsweirki/pub-sub-pattern-in-react-example-c5bbd08fa02f

## refs
1. https://www.freecodecamp.org/chinese/news/pass-data-between-components-in-react/

# Class ç»„ä»¶äº‹ä»¶ this ç»‘å®š

åœ¨æ„é€ å‡½æ•°ä¸­ç»‘å®šthis

```jsx
  constructor() {
    super();
    this.state = {
      liked: false
    };
    this.handleClick = this.handleClick.bind(this);
  }
```

å‡½æ•°å®šä¹‰çš„æ—¶å€™ä½¿ç”¨ç®­å¤´å‡½æ•°

```jsx
constructor(props){
    super(props);
    this.state={
           msg:'hello world',
    }
    render(){
      <button onClcik={()=>{alert(this.state.msg)}}>ç‚¹æˆ‘</button>
    }
}
```

å‡½æ•°è°ƒç”¨æ˜¯ä½¿ç”¨bindç»‘å®šthis

```jsx
 <button onClick={this.getMsg.bind(this)}>ç‚¹æˆ‘</button>
```


# è¡¨å•

## å—æ§ç»„ä»¶ VS éå—æ§ç»„ä»¶

- å—æ§ç»„ä»¶ï¼Œç®€å•æ¥è®²ï¼Œå°±æ˜¯å—æˆ‘ä»¬æ§åˆ¶çš„ç»„ä»¶ï¼Œç»„ä»¶çš„çŠ¶æ€å…¨ç¨‹å“åº”å¤–éƒ¨æ•°æ®ã€‚ç»„ä»¶æ·»åŠ valueå€¼å’ŒonChangeäº‹ä»¶
- éå—æ§ç»„ä»¶ï¼Œç®€å•æ¥è®²ï¼Œå°±æ˜¯ä¸å—æˆ‘ä»¬æ§åˆ¶çš„ç»„ä»¶ã€‚ä¸€èˆ¬æƒ…å†µæ˜¯åœ¨åˆå§‹åŒ–çš„æ—¶å€™æ¥å—å¤–éƒ¨æ•°æ®ï¼Œç„¶åè‡ªå·±åœ¨å†…éƒ¨å­˜å‚¨å…¶è‡ªèº«çŠ¶æ€ã€‚é€šè¿‡refè·å–æ•°æ®

In React, there are two ways of handling form data:

- **Controlled Components:** In this approach, form data is handled by React through the use of hooks such as the `useState` hook.
- **Uncontrolled Components:** Form data is handled by the Document Object Model (DOM) rather than by React. The DOM maintains the state of form data and updates it based on user input.

## å„ä¸ªè¡¨å•æ§ä»¶ä¸Šçš„å€¼å¤„ç†åŒºåˆ«

| æ§ä»¶ç±»å‹                   | å€¼å¤„ç†æ–¹å¼                                                  | ç¤ºä¾‹ä»£ç                                                      |
| -------------------------- | ----------------------------------------------------------- | ------------------------------------------------------------ |
| `<input type="text"/>`     | é€šè¿‡`event.target.value`è·å–è¾“å…¥æ¡†çš„å€¼                      | `const handleInputChange = (event) => {<br> setValue(event.target.value);<br>}` |
| `<textarea/>`              | é€šè¿‡`event.target.value`è·å–æ–‡æœ¬åŸŸçš„å€¼                      | `const handleTextareaChange = (event) => {<br> setTextValue(event.target.value);<br>}` |
| `<select>`å’Œ`<option>`     | é€šè¿‡`event.target.value`è·å–é€‰æ‹©æ¡†é€‰ä¸­çš„å€¼                  | `const handleSelectChange = (event) => {<br> setSelectedValue(event.target.value);<br>}` |
| `<input type="checkbox"/>` | é€šè¿‡`event.target.checked`è·å–å¤é€‰æ¡†çš„é€‰ä¸­çŠ¶æ€              | `const handleCheckboxChange = (event) => {<br> setChecked(event.target.checked);<br>}` |
| `<input type="radio"/>`    | é€šè¿‡è®¾ç½®`checked`å±æ€§å’Œ`onChange`äº‹ä»¶æ¥å¤„ç†å•é€‰æ¡†çš„é€‰ä¸­çŠ¶æ€ | `const handleRadioChange = (event) => {<br> setSelectedValue(event.target.value);<br>}` |

## è¡¨å•äº‹ä»¶å¤„ç†

Reactè¡¨å•äº‹ä»¶å¤„ç†ä¸€èˆ¬åŒ…æ‹¬ä¸¤ä¸ªæ–¹é¢ï¼šå—æ§ç»„ä»¶çš„å€¼ç®¡ç†å’Œäº‹ä»¶å¤„ç†å‡½æ•°çš„ç¼–å†™ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œè¯´æ˜å¦‚ä½•åœ¨Reactä¸­å¤„ç†è¡¨å•äº‹ä»¶ï¼š

```jsx
import React, { useState } from 'react';

const MyForm = () => {
  const [inputValue, setInputValue] = useState('');

  const handleInputChange = (event) => {
    setInputValue(event.target.value);
  };

  const handleSubmit = (event) => {
    event.preventDefault();
    alert(`ä½ è¾“å…¥çš„å†…å®¹ä¸ºï¼š${inputValue}`);
    setInputValue('');
  };

  return (
    <form onSubmit={handleSubmit}>
      <label>
        æ–‡æœ¬æ¡†ï¼š
        <input type="text" value={inputValue} onChange={handleInputChange} />
      </label>
      <br />
      <button type="submit">æäº¤</button>
    </form>
  );
};
```

## refs

1. https://react.dev/learn/sharing-state-between-components#controlled-and-uncontrolled-components
2. https://vue3js.cn/interview/React/controlled_Uncontrolled.html
3. https://github.com/careteenL/react/issues/7
4. https://learnku.com/docs/react-doc/shou-kong-yu-fei-shou-kong-zu-jian/13610
5. https://github.com/MuYunyun/blog/blob/main/React/Component_Design/%E9%87%8D%E6%96%B0%E8%AE%A4%E8%AF%86%E5%8F%97%E6%8E%A7%E4%B8%8E%E9%9D%9E%E5%8F%97%E6%8E%A7%E7%BB%84%E4%BB%B6.md
6. https://www.altogic.com/blog/difference-between-controlled-and-uncontrolled-component

# API

## 1. Suspense

React Suspense æ˜¯ React çš„ä¸€ä¸ªæ–°ç‰¹æ€§ï¼Œç”¨äºå¤„ç†å¼‚æ­¥æ•°æ®çš„åŠ è½½å’Œæ¸²æŸ“ã€‚å®ƒæä¾›äº†ä¸€ç§ç®€å•çš„æ–¹å¼æ¥æš‚åœç»„ä»¶çš„æ¸²æŸ“ï¼Œç›´åˆ°å¼‚æ­¥æ“ä½œå®Œæˆæˆ–è€…ç­‰å¾…æ—¶é—´ç»“æŸã€‚é€šè¿‡ä½¿ç”¨ Suspense ç»„ä»¶å’Œç›¸å…³çš„å±æ€§å’Œæ–¹æ³•ï¼Œå¯ä»¥è½»æ¾åœ°å®ç°æ•°æ®çš„å¼‚æ­¥è·å–å’Œæ¸²æŸ“çš„æš‚åœã€‚

### 1. React Suspense çš„ä»‹ç»

   React Suspense æ˜¯ React çš„ä¸€ä¸ªæ–°ç‰¹æ€§ï¼Œå®ƒç”¨äºå¤„ç†å¼‚æ­¥æ•°æ®çš„åŠ è½½å’Œæ¸²æŸ“ã€‚å®ƒæä¾›äº†ä¸€ç§ç®€å•çš„æ–¹å¼æ¥æš‚åœç»„ä»¶çš„æ¸²æŸ“ï¼Œç›´åˆ°å¼‚æ­¥æ“ä½œå®Œæˆæˆ–è€…ç­‰å¾…æ—¶é—´ç»“æŸã€‚

   React Suspense çš„ä¸»è¦ä½œç”¨æ˜¯æ”¹å–„ç”¨æˆ·ä½“éªŒå’Œæ€§èƒ½ã€‚ä¼ ç»Ÿä¸Šï¼Œå½“ä¸€ä¸ªç»„ä»¶ä¾èµ–äºå¼‚æ­¥æ•°æ®æ—¶ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ç»„ä»¶ä¸­æ‰‹åŠ¨å¤„ç†æ•°æ®åŠ è½½çš„çŠ¶æ€ï¼Œå¹¶åœ¨æ•°æ®åŠ è½½å®Œæˆåæ›´æ–°ç»„ä»¶ã€‚è¿™æ ·çš„å¤„ç†æ–¹å¼ä¼šå¯¼è‡´ç»„ä»¶çš„ä»£ç å˜å¾—å¤æ‚ï¼ŒåŒæ—¶ä¹Ÿä¼šå½±å“ç”¨æˆ·çš„ä½“éªŒï¼Œå› ä¸ºä»–ä»¬å¯èƒ½ä¼šçœ‹åˆ°åŠ è½½æŒ‡ç¤ºå™¨æˆ–ç©ºç™½é¡µé¢ã€‚

   é€šè¿‡ä½¿ç”¨ React Suspenseï¼Œæˆ‘ä»¬å¯ä»¥å°†å¼‚æ­¥æ“ä½œçš„å¤„ç†é€»è¾‘ä»ç»„ä»¶ä¸­åˆ†ç¦»å‡ºæ¥ï¼Œä½¿å¾—ç»„ä»¶çš„ä»£ç æ›´åŠ ç®€æ´å’Œå¯è¯»æ€§ã€‚Suspense ç»„ä»¶å¯ä»¥æš‚åœç»„ä»¶çš„æ¸²æŸ“ï¼Œå¹¶åœ¨å¼‚æ­¥æ“ä½œå®Œæˆåå†ç»§ç»­æ¸²æŸ“ç»„ä»¶ã€‚è¿™æ ·ï¼Œç”¨æˆ·å°†ä¸ä¼šçœ‹åˆ°åŠ è½½æŒ‡ç¤ºå™¨æˆ–ç©ºç™½é¡µé¢ï¼Œè€Œæ˜¯åœ¨æ•°æ®åŠ è½½å®Œæˆåç«‹å³çœ‹åˆ°ç»„ä»¶çš„å†…å®¹ã€‚è¿™æä¾›äº†æ›´å¥½çš„ç”¨æˆ·ä½“éªŒã€‚

   æ­¤å¤–ï¼ŒReact Suspense è¿˜æ”¯æŒä»£ç åˆ†å‰²å’Œæ‡’åŠ è½½ï¼Œå¯ä»¥ä½¿å¾—åº”ç”¨ç¨‹åºçš„åŠ è½½é€Ÿåº¦æ›´å¿«ï¼Œå¹¶å‡å°‘äº†ä¸å¿…è¦çš„èµ„æºæ¶ˆè€—ã€‚å®ƒè¿˜æä¾›äº†é”™è¯¯è¾¹ç•Œçš„åŠŸèƒ½ï¼Œå¯ä»¥æ›´å¥½åœ°å¤„ç†ç»„ä»¶å†…éƒ¨çš„é”™è¯¯ï¼Œä½¿å¾—åº”ç”¨ç¨‹åºæ›´åŠ å¥å£®å’Œç¨³å®šã€‚æ€»çš„æ¥è¯´ï¼ŒReact Suspense ä¸ºå¼€å‘è€…æä¾›äº†ä¸€ç§ç®€å•ä¸”å¼ºå¤§çš„æ–¹å¼æ¥å¤„ç†å¼‚æ­¥æ•°æ®çš„åŠ è½½å’Œæ¸²æŸ“ï¼Œæå‡äº†åº”ç”¨ç¨‹åºçš„æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒã€‚

### 2. å¼‚æ­¥æ¸²æŸ“

   - ä¼ ç»Ÿçš„å¼‚æ­¥æ•°æ®åŠ è½½æ–¹å¼

     åœ¨ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ä¸­å‘é€å¼‚æ­¥è¯·æ±‚æˆ–æ‰§è¡Œå¼‚æ­¥æ“ä½œã€‚
     ä½¿ç”¨ isLoading çŠ¶æ€æ¥è·Ÿè¸ªæ•°æ®æ˜¯å¦æ­£åœ¨åŠ è½½ã€‚
     åœ¨åŠ è½½å®Œæˆåæ›´æ–°ç»„ä»¶çš„çŠ¶æ€ï¼Œä»¥ä¾¿æ¸²æŸ“æ•°æ®ã€‚
     è¿™ç§æ–¹å¼éœ€è¦æ‰‹åŠ¨ç®¡ç†åŠ è½½çŠ¶æ€ï¼Œå¦‚æœæœ‰å¤šä¸ªç»„ä»¶ä¾èµ–äºç›¸åŒçš„å¼‚æ­¥æ•°æ®ï¼Œéœ€è¦åœ¨æ¯ä¸ªç»„ä»¶ä¸­é‡å¤å¤„ç†åŠ è½½é€»è¾‘ï¼Œä½¿å¾—ä»£ç å˜å¾—å¤æ‚ã€‚åŒæ—¶ï¼Œç”¨æˆ·å¯èƒ½ä¼šåœ¨æ•°æ®åŠ è½½æ—¶çœ‹åˆ°åŠ è½½æŒ‡ç¤ºå™¨æˆ–ç©ºç™½é¡µé¢ã€‚

     React Suspense å¼•å…¥äº†ä¸€ç§æ›´ç®€å•çš„å¼‚æ­¥æ¸²æŸ“æœºåˆ¶ï¼Œå®ƒåŸºäºä»¥ä¸‹ä¸¤ä¸ªæ¦‚å¿µï¼š

     Promise å’Œ Suspense ç»„ä»¶ï¼šReact Suspense å…è®¸ç»„ä»¶æš‚åœæ¸²æŸ“ï¼Œç›´åˆ°å¼‚æ­¥æ“ä½œï¼ˆå¦‚æ•°æ®è·å–ã€ä»£ç åˆ†å‰²ç­‰ï¼‰å®Œæˆã€‚ç»„ä»¶å¯ä»¥è¿”å›ä¸€ä¸ª Promise å¯¹è±¡ï¼Œå…¶ä¸­åŒ…å«å¼‚æ­¥æ“ä½œçš„ç»“æœã€‚åŒæ—¶ï¼Œä½¿ç”¨ Suspense ç»„ä»¶æ¥åŒ…è£¹éœ€è¦ç­‰å¾…å¼‚æ­¥æ“ä½œçš„ç»„ä»¶ã€‚

     fallback å±æ€§ï¼šSuspense ç»„ä»¶æ¥å—ä¸€ä¸ª fallback å±æ€§ï¼Œç”¨äºæŒ‡å®šåœ¨ç­‰å¾…å¼‚æ­¥æ“ä½œå®Œæˆæ—¶å±•ç¤ºçš„å†…å®¹ã€‚å¯ä»¥æ˜¯åŠ è½½æŒ‡ç¤ºå™¨ã€å ä½ç¬¦æˆ–ä»»ä½•å…¶ä»–åˆé€‚çš„å†…å®¹ã€‚

   - React Suspense çš„å¼‚æ­¥æ¸²æŸ“æœºåˆ¶

     1. åœ¨ç»„ä»¶çš„æ¸²æŸ“æ–¹æ³•ä¸­ï¼Œè¿”å›ä¸€ä¸ª Promise å¯¹è±¡ï¼Œè¯¥å¯¹è±¡åŒ…å«å¼‚æ­¥æ“ä½œçš„ç»“æœã€‚å¯ä»¥æ˜¯æ•°æ®è·å–ã€ä»£ç åˆ†å‰²ç­‰ã€‚
     2. ä½¿ç”¨ Suspense ç»„ä»¶åŒ…è£¹éœ€è¦ç­‰å¾…å¼‚æ­¥æ“ä½œå®Œæˆçš„ç»„ä»¶ï¼Œå¹¶è®¾ç½® fallback å±æ€§æ¥æŒ‡å®šåŠ è½½æ—¶çš„å†…å®¹ã€‚
     3. å½“å¼‚æ­¥æ“ä½œå®Œæˆåï¼ŒSuspense ç»„ä»¶ä¼šè‡ªåŠ¨æ¸²æŸ“è¢«åŒ…è£¹çš„ç»„ä»¶ã€‚

   - Suspense ç»„ä»¶çš„ä½¿ç”¨æ–¹æ³•

     ```jsx
       import React, { Suspense } from 'react';
     
       const MyComponent = React.lazy(() => import('./MyComponent'));
     
       function App() {
         return (
           <div>
             <h1>My App</h1>
             <Suspense fallback={<div>Loading...</div>}>
               <MyComponent />
             </Suspense>
           </div>
         );
       }
     
       export default App;
     ```

     MyComponent ç»„ä»¶ä¼šè¢«å¼‚æ­¥åŠ è½½ã€‚åœ¨åŠ è½½å®Œæˆä¹‹å‰ï¼ŒSuspense ç»„ä»¶ä¼šæ˜¾ç¤º fallback å±æ€§æŒ‡å®šçš„åŠ è½½ä¸­å†…å®¹ã€‚åŠ è½½å®Œæˆåï¼ŒSuspense ç»„ä»¶ä¼šæ¸²æŸ“ MyComponent ç»„ä»¶ã€‚

     è¿™å°±æ˜¯ React Suspense çš„åŸºæœ¬ä½¿ç”¨æ–¹æ³•ï¼Œå®ƒç®€åŒ–äº†å¤„ç†å¼‚æ­¥æ¸²æŸ“çš„æµç¨‹ï¼Œæä¾›äº†æ›´å¥½çš„ç”¨æˆ·ä½“éªŒå’Œå¼€å‘ä½“éªŒã€‚

### 3. fallback å±æ€§

   - fallback å±æ€§çš„ä½œç”¨

     fallback å±æ€§æ˜¯ Suspense ç»„ä»¶çš„ä¸€ä¸ªé‡è¦å±æ€§ï¼Œå®ƒç”¨äºæŒ‡å®šåœ¨ç­‰å¾…å¼‚æ­¥æ“ä½œå®Œæˆæ—¶å±•ç¤ºçš„å†…å®¹ã€‚

     fallback å±æ€§çš„ä½œç”¨æ˜¯åœ¨å¼‚æ­¥æ“ä½œè¿›è¡Œè¿‡ç¨‹ä¸­ï¼Œä¸ºç”¨æˆ·æä¾›ä¸€ä¸ªåŠ è½½ä¸­çš„çŠ¶æ€ã€‚å½“ Suspense ç»„ä»¶åŒ…è£¹çš„ç»„ä»¶å¤„äºç­‰å¾…å¼‚æ­¥æ“ä½œçš„çŠ¶æ€æ—¶ï¼Œfallback å±æ€§æŒ‡å®šçš„å†…å®¹ä¼šä»£æ›¿è¢«åŒ…è£¹ç»„ä»¶çš„æ¸²æŸ“ã€‚

   - ä½¿ç”¨ Suspense ç»„ä»¶çš„ fallback å±æ€§å±•ç¤ºåŠ è½½ä¸­çŠ¶æ€

     å½“ MyComponent ç»„ä»¶å¤„äºåŠ è½½çŠ¶æ€æ—¶ï¼ŒSuspense ç»„ä»¶ä¼šæ˜¾ç¤º fallback å±æ€§æŒ‡å®šçš„ Loading... æ–‡æœ¬ã€‚è¿™æ ·ï¼Œç”¨æˆ·åœ¨ç­‰å¾…å¼‚æ­¥æ“ä½œå®Œæˆæ—¶å¯ä»¥çœ‹åˆ°ä¸€ä¸ªå‹å¥½çš„åŠ è½½ä¸­çŠ¶æ€ã€‚

     fallback å±æ€§çš„å†…å®¹å¯ä»¥æ˜¯ä»»ä½• React å…ƒç´ ï¼Œå¯ä»¥æ˜¯åŠ è½½æŒ‡ç¤ºå™¨ã€å ä½ç¬¦æˆ–è€…ä»»æ„å…¶ä»–åˆé€‚çš„å†…å®¹ã€‚å®ƒå¯ä»¥æ ¹æ®å®é™…éœ€æ±‚è¿›è¡Œå®šåˆ¶ï¼Œä»¥æä¾›æ›´å¥½çš„ç”¨æˆ·ä½“éªŒã€‚

     éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œfallback åªåœ¨å¼‚æ­¥æ“ä½œè¿›è¡Œè¿‡ç¨‹ä¸­æ˜¾ç¤ºï¼Œä¸€æ—¦å¼‚æ­¥æ“ä½œå®Œæˆï¼Œè¢«åŒ…è£¹çš„ç»„ä»¶ä¼šå¼€å§‹æ¸²æŸ“ï¼Œfallback ä¼šè¢«æ›¿æ¢ä¸ºçœŸæ­£çš„ç»„ä»¶å†…å®¹ã€‚

     æ€»ç»“æ¥è¯´ï¼Œfallback å±æ€§æ˜¯ Suspense ç»„ä»¶çš„ä¸€ä¸ªé‡è¦å±æ€§ï¼Œå®ƒç”¨äºå±•ç¤ºåœ¨ç­‰å¾…å¼‚æ­¥æ“ä½œå®Œæˆæ—¶çš„åŠ è½½ä¸­çŠ¶æ€ã€‚å®ƒå¯ä»¥æ˜¯ä»»ä½• React å…ƒç´ ï¼Œç”¨äºæä¾›æ›´å¥½çš„ç”¨æˆ·ä½“éªŒå’Œåé¦ˆã€‚

### 4. Suspense for Data Fetching

   - ä½¿ç”¨ React Suspense è¿›è¡Œæ•°æ®è·å–
   - ä½¿ç”¨ Suspense ç»„ä»¶å’Œ React.lazy è¿›è¡Œä»£ç åˆ†å‰²

   ```jsx
   import React, { Suspense } from 'react';
   
   const fetchData = () => {
     return new Promise((resolve) => {
       setTimeout(() => {
         resolve('Data fetched!');
       }, 2000);
     });
   };
   
   function MyComponent() {
     const data = fetchData();
   
     return <div>{data}</div>;
   }
   
   function App() {
     return (
       <div>
         <h1>My App</h1>
         <Suspense fallback={<div>Loading...</div>}>
           <MyComponent />
         </Suspense>
       </div>
     );
   }
   
   export default App;
   
   ```

### 5. é”™è¯¯è¾¹ç•Œ

   - é”™è¯¯è¾¹ç•Œçš„æ¦‚å¿µ

     é”™è¯¯è¾¹ç•Œæ˜¯ React ä¸­çš„æ¦‚å¿µï¼Œç”¨äºå¤„ç†ç»„ä»¶å†…éƒ¨çš„é”™è¯¯ã€‚å½“ç»„ä»¶å†…éƒ¨å‘ç”Ÿé”™è¯¯æ—¶ï¼Œé”™è¯¯è¾¹ç•Œå¯ä»¥æ•è·å¹¶å¤„ç†è¿™äº›é”™è¯¯ï¼Œä»¥é¿å…æ•´ä¸ªåº”ç”¨ç¨‹åºå´©æºƒã€‚

     ä½¿ç”¨ React Suspense è¿›è¡Œå¼‚æ­¥åŠ è½½å’Œæ¸²æŸ“æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ Suspense ç»„ä»¶æ¥å¤„ç†ç»„ä»¶å†…éƒ¨çš„é”™è¯¯ã€‚Suspense ç»„ä»¶æ¥å—ä¸€ä¸ª fallback å±æ€§ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å…¶ä¸­å±•ç¤ºä¸€ä¸ªé”™è¯¯æç¤ºæˆ–å¤‡ç”¨å†…å®¹ã€‚

   - ä½¿ç”¨ Suspense  ç»„ä»¶å¤„ç†ç»„ä»¶å†…éƒ¨çš„é”™è¯¯

     ```jsx
     import React, { Suspense } from 'react';
     
     const MyComponent = React.lazy(() => import('./MyComponent'));
     
     function App() {
       return (
         <div>
           <h1>My App</h1>
           <ErrorBoundary fallback={<div>Oops! Something went wrong.</div>}>
             <Suspense fallback={<div>Loading...</div>}>
               <MyComponent />
             </Suspense>
           </ErrorBoundary>
         </div>
       );
     }
     
     export default App;
     
     ```

   - ä½¿ç”¨ ErrorBoundary ç»„ä»¶å¤„ç†æ¸²æŸ“é”™è¯¯

     åˆ›å»ºäº†ä¸€ä¸ª ErrorBoundary ç»„ä»¶ã€‚å®ƒé€šè¿‡é‡å†™ getDerivedStateFromError å’Œ componentDidCatch æ–¹æ³•æ¥æ•è·ç»„ä»¶å†…éƒ¨çš„é”™è¯¯ã€‚å¦‚æœå‘ç”Ÿé”™è¯¯ï¼ŒErrorBoundary ç»„ä»¶ä¼šæ˜¾ç¤º fallback å±æ€§æŒ‡å®šçš„å†…å®¹ã€‚

     ä½¿ç”¨ ErrorBoundary ç»„ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥æ›´å…¨é¢åœ°å¤„ç†ç»„ä»¶å†…éƒ¨çš„æ¸²æŸ“é”™è¯¯ï¼ŒåŒ…æ‹¬å¼‚æ­¥åŠ è½½å’Œå…¶ä»–ç±»å‹çš„é”™è¯¯ã€‚

     æ€»ç»“æ¥è¯´ï¼Œä½¿ç”¨ Suspense ç»„ä»¶å¯ä»¥å¤„ç†ç»„ä»¶å†…éƒ¨çš„å¼‚æ­¥åŠ è½½å’Œæ¸²æŸ“é”™è¯¯ï¼Œé€šè¿‡è®¾ç½® fallback å±æ€§æ¥å±•ç¤ºé”™è¯¯æç¤ºæˆ–å¤‡ç”¨å†…å®¹ã€‚è€Œä½¿ç”¨ ErrorBoundary ç»„ä»¶å¯ä»¥å¤„ç†æ›´å¹¿æ³›çš„æ¸²æŸ“é”™è¯¯ï¼Œå¹¶æä¾›æ›´è¯¦ç»†çš„é”™è¯¯å¤„ç†å’Œè®°å½•åŠŸèƒ½ã€‚

     ```jsx
     import React from 'react';
     
     class ErrorBoundary extends React.Component {
       constructor(props) {
         super(props);
         this.state = { hasError: false };
       }
     
       static getDerivedStateFromError(error) {
         return { hasError: true };
       }
     
       componentDidCatch(error, errorInfo) {
         // å¯ä»¥åœ¨è¿™é‡Œè®°å½•é”™è¯¯ä¿¡æ¯
       }
     
       render() {
         if (this.state.hasError) {
           return this.props.fallback;
         }
     
         return this.props.children;
       }
     }
     
     function App() {
       return (
         <div>
           <h1>My App</h1>
           <ErrorBoundary fallback={<div>Oops! Something went wrong.</div>}>
             <MyComponent />
           </ErrorBoundary>
         </div>
       );
     }
     
     export default App;
     
     ```

     Hooks version

     ```jsx
     import React, { useState, useEffect } from 'react';
     
     function ErrorBoundary({ fallback, children }) {
       const [hasError, setHasError] = useState(false);
     
       useEffect(() => {
         return () => {
           // æ¸…é™¤é”™è¯¯çŠ¶æ€
           setHasError(false);
         };
       }, []);
     
       const handleCatchError = () => {
         setHasError(true);
       };
     
       if (hasError) {
         return fallback;
       }
     
       return children;
     }
     
     function MyComponent() {
       const fetchData = () => {
         return new Promise((resolve, reject) => {
           setTimeout(() => {
             reject('Error occurred');
           }, 2000);
         });
       };
     
       useEffect(() => {
         fetchData()
           .then((data) => {
             // ä½¿ç”¨æ•°æ®
           })
           .catch((error) => {
             // æ•è·é”™è¯¯
             handleCatchError();
           });
       }, []);
     
       return <div>My Component</div>;
     }
     
     function App() {
       return (
         <div>
           <h1>My App</h1>
           <ErrorBoundary fallback={<div>Oops! Something went wrong.</div>}>
             <MyComponent />
           </ErrorBoundary>
         </div>
       );
     }
     
     export default App;
     
     ```

### 6. Suspense çš„æœ€ä½³å®è·µ

   - ä½¿ç”¨ Suspense è¿›è¡Œä»£ç åˆ†å‰²å’Œæ‡’åŠ è½½

     ä½¿ç”¨ Suspense è¿›è¡Œä»£ç åˆ†å‰²å’Œæ‡’åŠ è½½ï¼šå°†éœ€è¦å¼‚æ­¥åŠ è½½çš„ç»„ä»¶ä½¿ç”¨ React.lazy è¿›è¡ŒåŒ…è£…ï¼Œå¹¶å°†å…¶ä½œä¸º Suspense ç»„ä»¶çš„å­ç»„ä»¶ã€‚è¿™æ ·ï¼Œåªæœ‰åœ¨éœ€è¦æ—¶æ‰ä¼šåŠ è½½è¿™ä¸ªç»„ä»¶ï¼Œæé«˜åº”ç”¨ç¨‹åºçš„åŠ è½½æ€§èƒ½ã€‚

   - ç»“åˆé”™è¯¯è¾¹ç•Œå¤„ç†ç»„ä»¶é”™è¯¯

     ç»“åˆé”™è¯¯è¾¹ç•Œå¤„ç†ç»„ä»¶é”™è¯¯ï¼šä½¿ç”¨ ErrorBoundary ç»„ä»¶æ¥æ•è·å’Œå¤„ç†ç»„ä»¶å†…éƒ¨çš„é”™è¯¯ã€‚å°†éœ€è¦è¿›è¡Œé”™è¯¯è¾¹ç•Œå¤„ç†çš„ç»„ä»¶åŒ…è£¹åœ¨ ErrorBoundary ç»„ä»¶ä¸­ï¼Œå¹¶æä¾› fallback å±æ€§æ¥æŒ‡å®šé”™è¯¯æ—¶çš„å¤‡ç”¨å†…å®¹ã€‚

   - æ³¨æ„äº‹é¡¹å’Œå¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆ

     - Suspense ç»„ä»¶åªèƒ½ç”¨äºåŒ…è£¹ React.lazy åŒ…è£…çš„ç»„ä»¶ï¼Œå¹¶ä¸”åªèƒ½åœ¨ç»„ä»¶æ ‘çš„é¡¶å±‚ä½¿ç”¨ã€‚
     - Suspense ç»„ä»¶ç›®å‰åªæ”¯æŒä½¿ç”¨ React.lazy è¿›è¡Œå¼‚æ­¥åŠ è½½ï¼Œä¸æ”¯æŒä½¿ç”¨å…¶ä»–åŠ¨æ€å¯¼å…¥æ–¹å¼ã€‚
     - å½“å¤šä¸ª Suspense ç»„ä»¶åµŒå¥—æ—¶ï¼Œåªä¼šå±•ç¤ºæœ€é è¿‘æ ¹èŠ‚ç‚¹çš„ fallback å†…å®¹ã€‚å¦‚æœæƒ³è¦åœ¨å¤šä¸ªå±‚çº§ä¸­å±•ç¤ºä¸åŒçš„ fallback å†…å®¹ï¼Œå¯ä»¥ä½¿ç”¨å¤šä¸ª Suspense ç»„ä»¶è¿›è¡ŒåµŒå¥—ã€‚
     - Suspense ç»„ä»¶çš„ fallback å±æ€§å¯ä»¥æ˜¯ä»»ä½• React å…ƒç´ ï¼Œå¯ä»¥æ ¹æ®å®é™…éœ€æ±‚è¿›è¡Œå®šåˆ¶ã€‚
     - å½“ç»„ä»¶å†…éƒ¨å‘ç”Ÿé”™è¯¯æ—¶ï¼Œé”™è¯¯è¾¹ç•Œåªä¼šæ•è·å…¶å­ç»„ä»¶çš„é”™è¯¯ï¼Œä¸ä¼šæ•è·å…¶çˆ¶ç»„ä»¶æˆ–å…¶ä»–å…„å¼Ÿç»„ä»¶çš„é”™è¯¯ã€‚

     é€šè¿‡éµå¾ªè¿™äº›æœ€ä½³å®è·µå’Œæ³¨æ„äº‹é¡¹ï¼Œæˆ‘ä»¬å¯ä»¥æ›´å¥½åœ°ä½¿ç”¨ Suspense ç»„ä»¶è¿›è¡Œä»£ç åˆ†å‰²ã€æ‡’åŠ è½½å’Œé”™è¯¯å¤„ç†ï¼Œæé«˜åº”ç”¨ç¨‹åºçš„æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒã€‚

   åŒæ—¶ä½¿ç”¨ErrorBoundaryå’ŒSuspenseæ¥æä¾›æ›´å…¨é¢çš„é”™è¯¯å¤„ç†å’ŒåŠ è½½çŠ¶æ€ç®¡ç†ã€‚

   å½“åœ¨Reactåº”ç”¨ç¨‹åºä¸­ä½¿ç”¨å¼‚æ­¥åŠ è½½çš„ç»„ä»¶æ—¶ï¼Œå¯ä»¥å°†ErrorBoundaryç”¨äºæ•è·å’Œå¤„ç†è¿™äº›å¼‚æ­¥ç»„ä»¶ä¸­å¯èƒ½å‘ç”Ÿçš„é”™è¯¯ã€‚è¿™æ ·ï¼Œå¦‚æœå¼‚æ­¥ç»„ä»¶å‘ç”Ÿé”™è¯¯ï¼Œé”™è¯¯è¾¹ç•Œå°†ä¼šæ•è·åˆ°é”™è¯¯å¹¶æ ¹æ®éœ€è¦å±•ç¤ºé”™è¯¯ä¿¡æ¯ã€‚

   åŒæ—¶ï¼Œå¯ä»¥åœ¨Suspenseç»„ä»¶ä¸­ä½¿ç”¨fallbackå±æ€§æ¥æŒ‡å®šä¸€ä¸ªåŠ è½½çŠ¶æ€çš„UIã€‚è¿™æ ·ï¼Œåœ¨å¼‚æ­¥ç»„ä»¶åŠ è½½æœŸé—´ï¼Œå¯ä»¥æ˜¾ç¤ºå¤‡é€‰UIï¼ˆå¦‚åŠ è½½æŒ‡ç¤ºå™¨ï¼‰æ¥æä¾›æ›´å¥½çš„ç”¨æˆ·ä½“éªŒã€‚å¦‚æœå¼‚æ­¥ç»„ä»¶åŠ è½½æˆåŠŸï¼ŒSuspenseä¼šè‡ªåŠ¨æ¸²æŸ“å‡ºå¼‚æ­¥ç»„ä»¶çš„å†…å®¹ã€‚

   é€šè¿‡åŒæ—¶ä½¿ç”¨ErrorBoundaryå’ŒSuspenseï¼Œå¯ä»¥å®ç°æ›´å¥½çš„é”™è¯¯å¤„ç†å’ŒåŠ è½½çŠ¶æ€ç®¡ç†ã€‚é”™è¯¯è¾¹ç•Œç”¨äºæ•è·å’Œå¤„ç†é”™è¯¯ï¼ŒSuspenseç”¨äºå±•ç¤ºåŠ è½½çŠ¶æ€çš„UIï¼Œç»“åˆèµ·æ¥å¯ä»¥æä¾›æ›´å¥½çš„ç”¨æˆ·ä½“éªŒå’Œåº”ç”¨ç¨‹åºçš„ç¨³å®šæ€§ã€‚

## 2. React.lazy

React.lazy æ˜¯ React æä¾›çš„ä¸€ä¸ªç”¨äºå®ç°ç»„ä»¶æ‡’åŠ è½½çš„å‡½æ•°ã€‚å®ƒå¯ä»¥è®©æˆ‘ä»¬åœ¨éœ€è¦çš„æ—¶å€™æ‰åŠ è½½ç»„ä»¶ï¼Œè€Œä¸æ˜¯å°†æ‰€æœ‰ç»„ä»¶éƒ½ä¸€æ¬¡æ€§åŠ è½½ã€‚

1. React.lazy

   React.lazy æ˜¯ React æä¾›çš„ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºå®ç°ç»„ä»¶çš„æ‡’åŠ è½½ã€‚æ‡’åŠ è½½æ„å‘³ç€åªæœ‰åœ¨éœ€è¦æ—¶æ‰ä¼šåŠ è½½ç»„ä»¶ï¼Œè€Œä¸æ˜¯åœ¨åº”ç”¨ç¨‹åºåˆå§‹åŒ–æ—¶å°±åŠ è½½æ‰€æœ‰ç»„ä»¶ã€‚

2. ä½¿ç”¨ React.lazy è¿›è¡Œæ‡’åŠ è½½

  ä½¿ç”¨ React.lazy æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å°†éœ€è¦æ‡’åŠ è½½çš„ç»„ä»¶ä½œä¸ºå‚æ•°ä¼ é€’ç»™ React.lazy å‡½æ•°ã€‚ä¾‹å¦‚ï¼š`const MyComponent = React.lazy(() => import('./MyComponent'))`
  React.lazy å‡½æ•°è¿”å›ä¸€ä¸ªåŒ…è£…åçš„ç»„ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥åƒä½¿ç”¨æ™®é€šç»„ä»¶ä¸€æ ·ä½¿ç”¨å®ƒã€‚

3. æ‡’åŠ è½½å’Œ Suspense

  åœ¨ä½¿ç”¨ React.lazy è¿›è¡Œæ‡’åŠ è½½æ—¶ï¼Œé€šå¸¸ä¼šç»“åˆä½¿ç”¨ Suspense ç»„ä»¶ã€‚Suspense ç»„ä»¶å¯ä»¥åœ¨ç»„ä»¶åŠ è½½è¿‡ç¨‹ä¸­æ˜¾ç¤ºä¸€ä¸ªåŠ è½½çŠ¶æ€ï¼Œä»¥æä¾›æ›´å¥½çš„ç”¨æˆ·ä½“éªŒã€‚
  å¯ä»¥å°†éœ€è¦æ‡’åŠ è½½çš„ç»„ä»¶æ”¾åœ¨ Suspense ç»„ä»¶å†…ï¼Œå¹¶è®¾ç½® fallback å±æ€§æ¥æŒ‡å®šåŠ è½½çŠ¶æ€æ—¶çš„å¤‡ç”¨å†…å®¹ã€‚
4. å…¶ä»–æ³¨æ„äº‹é¡¹

  React.lazy åªèƒ½ç”¨äºé»˜è®¤å¯¼å‡ºçš„ç»„ä»¶ã€‚å¦‚æœç»„ä»¶ä½¿ç”¨å‘½åå¯¼å‡ºï¼Œåˆ™éœ€è¦å…ˆå°†å…¶åŒ…è£…ä¸ºé»˜è®¤å¯¼å‡ºçš„å½¢å¼ã€‚
  React.lazy ç›®å‰åªæ”¯æŒé»˜è®¤å¯¼å‡ºçš„ç»„ä»¶ä½œä¸ºå‚æ•°ï¼Œä¸æ”¯æŒå‘½åå¯¼å‡ºçš„ç»„ä»¶ã€‚
  ä½¿ç”¨ React.lazy å¯ä»¥å¸®åŠ©æˆ‘ä»¬ä¼˜åŒ–åº”ç”¨ç¨‹åºçš„åŠ è½½æ€§èƒ½ï¼Œåªåœ¨éœ€è¦çš„æ—¶å€™æ‰åŠ è½½ç»„ä»¶ã€‚ç»“åˆ Suspense ç»„ä»¶ä½¿ç”¨ï¼Œå¯ä»¥æä¾›æ›´å¥½çš„ç”¨æˆ·ä½“éªŒã€‚

## 3. æ–°æ—§ Context

åœ¨Reactä¸­ï¼Œæœ‰ä¸¤ç§ç±»å‹çš„Contextï¼šæ—§ç‰ˆContextå’Œæ–°ç‰ˆContextã€‚

1. æ—§ç‰ˆContextï¼š æ—§ç‰ˆContextæ˜¯åœ¨React v16.3ä¹‹å‰å¼•å…¥çš„ã€‚ä½¿ç”¨æ—§ç‰ˆContextæ—¶ï¼Œæ‚¨éœ€è¦ä½¿ç”¨`React.createContext()`æ¥åˆ›å»ºä¸€ä¸ªContextå¯¹è±¡ï¼Œå¹¶ä½¿ç”¨`Context.Provider`ç»„ä»¶åŒ…è£¹æä¾›ç»™å­ç»„ä»¶çš„æ•°æ®ã€‚

```jsx
// åˆ›å»ºä¸€ä¸ªæ—§ç‰ˆContextå¯¹è±¡
const MyContext = React.createContext();

// ä½¿ç”¨Context.ProvideråŒ…è£¹æä¾›ç»™å­ç»„ä»¶çš„æ•°æ®
function ParentComponent() {
  const data = "Hello, World!";

  return (
    <MyContext.Provider value={data}>
      <ChildComponent />
    </MyContext.Provider>
  );
}

// åœ¨å­ç»„ä»¶ä¸­ä½¿ç”¨Context.Consumeræ¥è®¿é—®æ•°æ®
function ChildComponent() {
  return (
    <MyContext.Consumer>
      {value => <p>{value}</p>}
   </MyContext.Consumer>
  );
}
```

2. æ–°ç‰ˆContextï¼š æ–°ç‰ˆContextæ˜¯åœ¨React v16.3ä¸­å¼•å…¥çš„æ”¹è¿›ç‰ˆæœ¬ã€‚ä½¿ç”¨æ–°ç‰ˆContextæ—¶ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨`React.createContext()`åˆ›å»ºä¸€ä¸ªContextå¯¹è±¡ï¼Œå¹¶å°†å…¶ä½œä¸ºé™æ€ç±»å±æ€§æˆ–ä½¿ç”¨`useContext` Hookåœ¨å‡½æ•°ç»„ä»¶ä¸­è®¿é—®ã€‚

```jsx
// åˆ›å»ºä¸€ä¸ªæ–°ç‰ˆContextå¯¹è±¡
const MyContext = React.createContext();

// åœ¨çˆ¶ç»„ä»¶ä¸­æä¾›æ•°æ®
function ParentComponent() {
  const data = "Hello, World!";

  return (
    <MyContext.Provider value={data}>
      <ChildComponent />
    </MyContext.Provider>
  );
}

// åœ¨å­ç»„ä»¶ä¸­ä½¿ç”¨useContext Hookæ¥è®¿é—®æ•°æ®
function ChildComponent() {
  const value = React.useContext(MyContext);

  return <p>{value}</p>;
}
```

æ— è®ºä½¿ç”¨æ—§ç‰ˆContextè¿˜æ˜¯æ–°ç‰ˆContextï¼Œå®ƒä»¬çš„ç›®æ ‡éƒ½æ˜¯ä¸ºäº†åœ¨ç»„ä»¶æ ‘ä¸­å…±äº«æ•°æ®ã€‚ä½†æ˜¯åœ¨ä½¿ç”¨ä¸Šæœ‰ä¸€äº›å·®å¼‚ï¼Œæ–°ç‰ˆContexté€šè¿‡Hookçš„æ–¹å¼æ›´åŠ ç®€æ´æ–¹ä¾¿ï¼Œè€Œæ—§ç‰ˆContextåˆ™éœ€è¦ä½¿ç”¨`Context.Consumer`æ¥è·å–æ•°æ®ã€‚åŒæ—¶ï¼Œæ–°ç‰ˆContextè¿˜æä¾›äº†æ›´å¥½çš„æ€§èƒ½ä¼˜åŒ–å’Œæ›´å¥½çš„å¼€å‘è€…ä½“éªŒã€‚å› æ­¤ï¼Œæ¨èåœ¨React v16.3åŠä»¥ä¸Šçš„ç‰ˆæœ¬ä¸­ä½¿ç”¨æ–°ç‰ˆContextã€‚

## 4. é”™è¯¯è¾¹ç•Œ

### 1. å¼•è¨€

   - ä»‹ç»é”™è¯¯è¾¹ç•Œçš„æ¦‚å¿µå’Œä½œç”¨

   å½“åº”ç”¨ç¨‹åºä¸­çš„ç»„ä»¶å‘ç”Ÿé”™è¯¯æ—¶ï¼ŒReacté»˜è®¤ä¼šå°†é”™è¯¯ä¿¡æ¯æ‰“å°åˆ°æ§åˆ¶å°ï¼Œå¹¶ä¸­æ–­æ•´ä¸ªç»„ä»¶æ ‘çš„æ¸²æŸ“ã€‚è¿™å¯èƒ½ä¼šå¯¼è‡´æ•´ä¸ªåº”ç”¨ç¨‹åºå‡ºç°å´©æºƒçš„æƒ…å†µï¼Œç»™ç”¨æˆ·å¸¦æ¥ä¸å¥½çš„ä½“éªŒã€‚é”™è¯¯è¾¹ç•Œçš„ä½œç”¨å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ã€‚

   é”™è¯¯è¾¹ç•Œæ˜¯ä¸€ç§Reactç»„ä»¶ï¼Œç”¨äºæ•è·å¹¶å¤„ç†å…¶å­ç»„ä»¶å†…éƒ¨æŠ›å‡ºçš„é”™è¯¯ã€‚å®ƒèƒ½å¤Ÿåœ¨æ¸²æŸ“è¿‡ç¨‹ä¸­æ•è·é”™è¯¯ï¼Œé˜²æ­¢æ•´ä¸ªç»„ä»¶æ ‘å´©æºƒï¼Œå¹¶æä¾›å¤‡é€‰UIæˆ–å±•ç¤ºé”™è¯¯ä¿¡æ¯ã€‚é€šè¿‡ä½¿ç”¨é”™è¯¯è¾¹ç•Œï¼Œæˆ‘ä»¬å¯ä»¥é™åˆ¶é”™è¯¯çš„å½±å“èŒƒå›´ï¼Œä½¿åº”ç”¨ç¨‹åºèƒ½å¤Ÿç»§ç»­æ­£å¸¸è¿è¡Œï¼ŒåŒæ—¶æä¾›é”™è¯¯çš„å¯è§†åŒ–åé¦ˆå’Œæ¢å¤ç­–ç•¥ã€‚

   é”™è¯¯è¾¹ç•Œçš„ä¸»è¦ç›®çš„æ˜¯æé«˜åº”ç”¨ç¨‹åºçš„ç¨³å®šæ€§å’Œå¯é æ€§ã€‚å®ƒä»¬é€šè¿‡å°†é”™è¯¯éš”ç¦»åˆ°ç‰¹å®šçš„ç»„ä»¶ä¸­ï¼Œå¹¶æä¾›å‹å¥½çš„é”™è¯¯å¤„ç†æœºåˆ¶æ¥æå‡ç”¨æˆ·ä½“éªŒã€‚åœ¨å¤§å‹çš„Reactåº”ç”¨ç¨‹åºä¸­ï¼Œé”™è¯¯è¾¹ç•Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°ç®¡ç†é”™è¯¯ï¼Œå¿«é€Ÿå®šä½å’Œä¿®å¤é—®é¢˜ï¼Œé¿å…æ•´ä¸ªåº”ç”¨ç¨‹åºçš„å´©æºƒå’Œä¸å¿…è¦çš„ç»´æŠ¤æˆæœ¬ã€‚

   éœ€è¦é”™è¯¯è¾¹ç•Œçš„åŸå› åŒ…æ‹¬ï¼š

   - ä¿æŠ¤åº”ç”¨ç¨‹åºä¸å—é”™è¯¯çš„å½±å“ï¼Œæé«˜ç¨³å®šæ€§ã€‚
   - æä¾›æ›´å¥½çš„ç”¨æˆ·ä½“éªŒï¼Œé¿å…æ•´ä¸ªåº”ç”¨ç¨‹åºçš„å´©æºƒã€‚
   - æä¾›å‹å¥½çš„é”™è¯¯å¤„ç†å’Œæ¢å¤ç­–ç•¥ï¼Œå‡å°‘ç»´æŠ¤æˆæœ¬ã€‚
   - æ›´å¥½çš„ä»£ç å¯ç»´æŠ¤æ€§å’Œå¯æµ‹è¯•æ€§ï¼Œæ–¹ä¾¿å®šä½å’Œä¿®å¤é—®é¢˜ã€‚

   æ€»ä¹‹ï¼Œé”™è¯¯è¾¹ç•Œæ˜¯ä¸€ç§é‡è¦çš„Reactç‰¹æ€§ï¼Œå¯ä»¥æä¾›æ›´å¥½çš„é”™è¯¯å¤„ç†å’Œå®¹é”™èƒ½åŠ›ï¼Œå¸®åŠ©æˆ‘ä»¬æ„å»ºç¨³å®šã€å¯é çš„Reactåº”ç”¨ç¨‹åºã€‚

### 2. é”™è¯¯è¾¹ç•Œçš„åŸºæœ¬ä½¿ç”¨

   - åˆ›å»ºä¸€ä¸ªé”™è¯¯è¾¹ç•Œç»„ä»¶
   - ä½¿ç”¨`componentDidCatch`ç”Ÿå‘½å‘¨æœŸæ–¹æ³•æ¥æ•è·é”™è¯¯
   - æ¸²æŸ“é”™è¯¯çš„å¤‡é€‰UIæˆ–å±•ç¤ºé”™è¯¯ä¿¡æ¯

   ```jsx
   import React, { useState } from "react";
   
   function ErrorBoundary({ children }) {
     const [hasError, setHasError] = useState(false);
     const [error, setError] = useState(null);
   
     const handleCatchError = () => {
       setHasError(true);
       // å…¶ä»–å¤„ç†é€»è¾‘
     };
   
     if (hasError) {
       return (
         <div>
           <h2>Something went wrong.</h2>
           <p>{error.toString()}</p>
         </div>
       );
     }
   
     try {
       return children;
     } catch (error) {
       setError(error);
       handleCatchError();
       return null;
     }
   }
   
   export default ErrorBoundary;
   
   ```

   ```jsx
   class ErrorBoundary extends React.Component {
     constructor(props) {
       super(props);
       this.state = {
         hasError: false,
         error: null,
         errorInfo: null
       };
     }
   
     componentDidCatch(error, errorInfo) {
       this.setState({
         hasError: true,
         error: error,
         errorInfo: errorInfo
       });
     }
   
     render() {
       if (this.state.hasError) {
         // æ¸²æŸ“å¤‡é€‰UIæˆ–å±•ç¤ºé”™è¯¯ä¿¡æ¯
         return (
           <div>
             <h2>Something went wrong.</h2>
             <p>{this.state.error.toString()}</p>
             <p>{this.state.errorInfo.componentStack}</p>
           </div>
         );
       }
       // æ¸²æŸ“æ­£å¸¸çš„å­ç»„ä»¶
       return this.props.children;
     }
   }
   
   ```

   ```jsx
   <ErrorBoundary>
     <ChildComponent />
   </ErrorBoundary>
   ```

### 3. ErrorBoundary vs Suspense

   | ErrorBoundary                                     | Suspense                                                    |
   | ------------------------------------------------- | ----------------------------------------------------------- |
   | ç”¨äºæ•è·å¹¶å¤„ç†ç»„ä»¶æ ‘ä¸­çš„é”™è¯¯                      | ç”¨äºåœ¨ç»„ä»¶æ ‘ä¸­æš‚åœå’Œæ˜¾ç¤ºåŠ è½½çŠ¶æ€                            |
   | é€šè¿‡æ•è·`componentDidCatch`æ–¹æ³•ä¸­çš„é”™è¯¯æ¥å¤„ç†é”™è¯¯ | é€šè¿‡`<Suspense>`ç»„ä»¶å’Œ`fallback`å±æ€§æ¥æŒ‡å®šåŠ è½½çŠ¶æ€çš„UI      |
   | å¯ä»¥å°†é”™è¯¯ä¿¡æ¯å±•ç¤ºç»™ç”¨æˆ·æˆ–æ‰§è¡Œå…¶ä»–é”™è¯¯å¤„ç†é€»è¾‘    | åœ¨åŠ è½½çŠ¶æ€æœŸé—´ï¼Œå¯ä»¥æ˜¾ç¤ºå¤‡é€‰UIã€åŠ è½½æŒ‡ç¤ºå™¨ç­‰                |
   | å¯ä»¥å°†é”™è¯¯è¾¹ç•Œç»„ä»¶åµŒå¥—åœ¨ç»„ä»¶æ ‘çš„ä»»ä½•ä½ç½®          | å¯ä»¥å°†`<Suspense>`ç»„ä»¶åµŒå¥—åœ¨ç»„ä»¶æ ‘çš„ä»»ä½•ä½ç½®                |
   | é”™è¯¯è¾¹ç•Œåªéœ€è¦åœ¨é”™è¯¯è¾¹ç•Œç»„ä»¶ä¸­å®ç°ç›¸å…³é€»è¾‘        | `<Suspense>`éœ€è¦ç»“åˆReactå¼‚æ­¥ç»„ä»¶ï¼ˆå¦‚`React.lazy`ï¼‰ä¸€èµ·ä½¿ç”¨ |
   | é”™è¯¯è¾¹ç•Œé€‚ç”¨äºåŒæ­¥å’Œå¼‚æ­¥ç»„ä»¶                      | `<Suspense>`ä¸»è¦ç”¨äºå¤„ç†å¼‚æ­¥åŠ è½½çš„ç»„ä»¶                      |
   | å¯ä»¥è‡ªå®šä¹‰é”™è¯¯è¾¹ç•Œçš„å®ç°é€»è¾‘                      | `<Suspense>`çš„åŠ è½½çŠ¶æ€UIå¯ä»¥æ˜¯é™æ€çš„æˆ–åŠ¨æ€çš„ï¼Œæ ¹æ®éœ€è¦å®šåˆ¶  |
   | é”™è¯¯è¾¹ç•Œåœ¨React v16ä¹‹å‰ä¸å¯ç”¨                     | `<Suspense>`æ˜¯åœ¨React v16.6ä¸­å¼•å…¥çš„                         |

ErrorBoundaryå’ŒSuspenseæ˜¯Reactæä¾›çš„ä¸¤ä¸ªä¸åŒçš„ç‰¹æ€§ï¼Œç”¨äºä¸åŒçš„åœºæ™¯ã€‚ErrorBoundaryç”¨äºæ•è·å’Œå¤„ç†ç»„ä»¶æ ‘ä¸­çš„é”™è¯¯ï¼Œæä¾›é”™è¯¯å¤„ç†å’Œæ¢å¤ç­–ç•¥ï¼›è€ŒSuspenseç”¨äºåœ¨ç»„ä»¶æ ‘ä¸­æš‚åœå’Œæ˜¾ç¤ºåŠ è½½çŠ¶æ€ï¼Œä½¿å¾—å¼‚æ­¥åŠ è½½çš„ç»„ä»¶èƒ½å¤Ÿæ›´åŠ å‹å¥½åœ°æ˜¾ç¤ºåŠ è½½è¿‡ç¨‹ã€‚å®ƒä»¬çš„ä½¿ç”¨æ–¹å¼å’Œé€‚ç”¨åœºæ™¯æœ‰æ‰€ä¸åŒï¼Œå¯ä»¥æ ¹æ®å®é™…éœ€æ±‚é€‰æ‹©ä½¿ç”¨ã€‚

### 3. é”™è¯¯è¾¹ç•Œçš„åµŒå¥—

   - é”™è¯¯è¾¹ç•Œçš„åµŒå¥—ç»“æ„å’Œä½¿ç”¨æ–¹æ³•
   - å¤„ç†ä¸åŒå±‚çº§çš„é”™è¯¯

   ```jsx
   import React, { useState } from 'react';
   
   function ParentErrorBoundary({ children }) {
     const [hasError, setHasError] = useState(false);
     const [error, setError] = useState(null);
   
     const handleCatchError = (error) => {
       setHasError(true);
       setError(error);
     };
   
     if (hasError) {
       return (
         <div>
           <h2>Parent Component: Something went wrong.</h2>
           <p>{error.toString()}</p>
         </div>
       );
     }
   
     return (
       <div>
         <h2>Parent Component</h2>
         <ChildErrorBoundary onError={handleCatchError}>
           <ChildComponent />
         </ChildErrorBoundary>
       </div>
     );
   }
   
   function ChildErrorBoundary({ children, onError }) {
     const [hasError, setHasError] = useState(false);
     const [error, setError] = useState(null);
   
     const handleCatchError = (error) => {
       setHasError(true);
       setError(error);
       onError(error);
     };
   
     if (hasError) {
       return (
         <div>
           <h2>Child Component: Something went wrong.</h2>
           <p>{error.toString()}</p>
         </div>
       );
     }
   
     return (
       <div>
         <h2>Child Component</h2>
         {children}
       </div>
     );
   }
   
   function ChildComponent() {
     // å­ç»„ä»¶çš„å®ç°é€»è¾‘
     throw new Error('Error occurred in Child Component');
     return <div>Child Component</div>;
   }
   
   function App() {
     return (
       <ParentErrorBoundary>
         <h1>App Component</h1>
       </ParentErrorBoundary>
     );
   }
   
   export default App;
   
   ```

   è¿™ä¹Ÿå¤ªèƒ½åµŒå¥—äº†å§ï¼Œå¦‚æœæˆ‘å­ç»„ä»¶è¿˜æœ‰å­ç»„ä»¶è¿˜æœ‰å­™å­ç»„ä»¶è¿™ä¸å°±æ˜¯å¥—å¨ƒè¡Œä¸ºå—

   ```jsx
   import React, { useState } from 'react';
   
   function ErrorBoundary({ children }) {
     const [hasError, setHasError] = useState(false);
     const [error, setError] = useState(null);
   
     const handleCatchError = (error) => {
       setHasError(true);
       setError(error);
     };
   
     if (hasError) {
       return (
         <div>
           <h2>Something went wrong.</h2>
           <p>{error.toString()}</p>
         </div>
       );
     }
   
     return children;
   }
   
   function ChildComponent() {
     // å­ç»„ä»¶çš„å®ç°é€»è¾‘
     throw new Error('Error occurred in Child Component');
     return <div>Child Component</div>;
   }
   
   function GrandChildComponent() {
     // å­™å­ç»„ä»¶çš„å®ç°é€»è¾‘
     throw new Error('Error occurred in GrandChild Component');
     return <div>GrandChild Component</div>;
   }
   
   function RecursiveErrorBoundary({ children }) {
     const [hasError, setHasError] = useState(false);
     const [error, setError] = useState(null);
   
     const handleCatchError = (error) => {
       setHasError(true);
       setError(error);
     };
   
     if (hasError) {
       return (
         <div>
           <h2>Something went wrong.</h2>
           <p>{error.toString()}</p>
         </div>
       );
     }
   
     return (
       <ErrorBoundary>
         {React.Children.map(children, (child) => {
           if (React.isValidElement(child)) {
             return React.cloneElement(child, {
               onError: handleCatchError,
             });
           }
           return child;
         })}
       </ErrorBoundary>
     );
   }
   
   function App() {
     return (
       <div>
         <h1>App Component</h1>
         <RecursiveErrorBoundary>
           <ChildComponent />
           <RecursiveErrorBoundary>
             <GrandChildComponent />
           </RecursiveErrorBoundary>
         </RecursiveErrorBoundary>
       </div>
     );
   }
   
   export default App;
   
   ```

   å“ˆå“ˆå“ˆï¼ŒçœŸçš„å¤§å¯ä¸å¿…ã€‚

### 4. é”™è¯¯å¤„ç†å’Œé”™è¯¯è¾¹ç•Œçš„æœ€ä½³å®è·µ

   - é”™è¯¯è¾¹ç•Œçš„é”™è¯¯å¤„ç†ç­–ç•¥ï¼š
     é”™è¯¯è¾¹ç•Œå¯ä»¥ç”¨äºæ•è·å’Œå¤„ç†Reactç»„ä»¶æ ‘ä¸­å‘ç”Ÿçš„JavaScripté”™è¯¯ã€‚ä¸€æ—¦é”™è¯¯è¢«é”™è¯¯è¾¹ç•Œæ•è·ï¼Œä½ å¯ä»¥é‡‡å–ä»¥ä¸‹ç­–ç•¥æ¥å¤„ç†é”™è¯¯ï¼š

     1. æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ï¼šä½ å¯ä»¥åœ¨é”™è¯¯è¾¹ç•Œç»„ä»¶ä¸­æ¸²æŸ“ä¸€äº›é”™è¯¯æ¶ˆæ¯ï¼Œå‘ŠçŸ¥ç”¨æˆ·å‘ç”Ÿäº†é”™è¯¯ï¼Œå¹¶æä¾›ç›¸å…³çš„é”™è¯¯è¯¦æƒ…ã€‚

     2. å›é€€UIæˆ–å¤‡ç”¨UIï¼šä½ å¯ä»¥åœ¨é”™è¯¯è¾¹ç•Œç»„ä»¶ä¸­æ¸²æŸ“ä¸€äº›å¤‡é€‰çš„UIï¼Œä»£æ›¿å‘ç”Ÿé”™è¯¯çš„ç»„ä»¶ã€‚è¿™å¯ä»¥æä¾›ä¸€ç§ä¼˜é›…çš„æ–¹å¼æ¥å¤„ç†é”™è¯¯ï¼Œé¿å…æ•´ä¸ªåº”ç”¨ç¨‹åºå´©æºƒã€‚

     3. è®°å½•é”™è¯¯ï¼šä½ å¯ä»¥å°†é”™è¯¯ä¿¡æ¯è®°å½•åˆ°æ—¥å¿—ä¸­ï¼Œä»¥ä¾¿è¿›è¡Œæ’æŸ¥å’Œè°ƒè¯•ã€‚ä½ å¯ä»¥ä½¿ç”¨ç¬¬ä¸‰æ–¹æ—¥å¿—åº“æˆ–å‘é€é”™è¯¯æŠ¥å‘Šç»™æœåŠ¡å™¨ã€‚

     4. é‡ç½®åº”ç”¨çŠ¶æ€ï¼šåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä½ å¯èƒ½å¸Œæœ›åœ¨é”™è¯¯å‘ç”Ÿåé‡ç½®åº”ç”¨çš„çŠ¶æ€ï¼Œä»¥ç¡®ä¿åº”ç”¨ç¨‹åºç»§ç»­å¯ç”¨ã€‚

   - é”™è¯¯è¾¹ç•Œé€‚ç”¨äºä»¥ä¸‹æƒ…å†µï¼š

     1. å¼‚æ­¥æ“ä½œï¼šå½“åœ¨ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•å¤–éƒ¨æ‰§è¡Œå¼‚æ­¥æ“ä½œæ—¶ï¼Œé”™è¯¯è¾¹ç•Œå¯ä»¥æ•è·å¹¶å¤„ç†è¿™äº›æ“ä½œä¸­çš„é”™è¯¯ã€‚

     2. ç¬¬ä¸‰æ–¹åº“ï¼šå½“ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“æ—¶ï¼Œè¯¥åº“å¯èƒ½ä¼šæŠ›å‡ºé”™è¯¯ã€‚é€šè¿‡å°†ç¬¬ä¸‰æ–¹åº“åŒ…è£…åœ¨é”™è¯¯è¾¹ç•Œç»„ä»¶ä¸­ï¼Œå¯ä»¥åœ¨å‘ç”Ÿé”™è¯¯æ—¶è¿›è¡Œå¤„ç†ã€‚

     3. å¤§å‹ç»„ä»¶æ ‘ï¼šå½“åº”ç”¨ç¨‹åºå…·æœ‰å¤æ‚çš„ç»„ä»¶å±‚çº§ç»“æ„æ—¶ï¼Œé”™è¯¯è¾¹ç•Œå¯ä»¥æä¾›ä¸€ç§ç®€åŒ–é”™è¯¯å¤„ç†é€»è¾‘çš„æ–¹å¼ã€‚

   - é”™è¯¯è¾¹ç•Œçš„å±€é™æ€§ï¼š

     1. ä»…åœ¨æ¸²æŸ“æœŸé—´æ•è·é”™è¯¯ï¼šé”™è¯¯è¾¹ç•Œåªèƒ½æ•è·åœ¨ç»„ä»¶çš„æ¸²æŸ“æœŸé—´å‘ç”Ÿçš„é”™è¯¯ã€‚å®ƒæ— æ³•æ•è·äº‹ä»¶å¤„ç†ç¨‹åºã€å¼‚æ­¥æ“ä½œï¼ˆä¾‹å¦‚å®šæ—¶å™¨æˆ–ç½‘ç»œè¯·æ±‚ï¼‰æˆ–æœåŠ¡ç«¯æ¸²æŸ“æœŸé—´çš„é”™è¯¯ã€‚

     2. ä»…é€‚ç”¨äºå­ç»„ä»¶ï¼šé”™è¯¯è¾¹ç•Œåªèƒ½æ•è·å…¶å­ç»„ä»¶ä¸­çš„é”™è¯¯ï¼Œæ— æ³•æ•è·å…¶è‡ªèº«æˆ–çˆ¶çº§ç»„ä»¶ä¸­çš„é”™è¯¯ã€‚

     3. ä¸é€‚ç”¨äºHooksï¼šé”™è¯¯è¾¹ç•Œæ— æ³•æ•è·è‡ªå®šä¹‰Hookä¸­å‘ç”Ÿçš„é”™è¯¯ã€‚åœ¨ä½¿ç”¨è‡ªå®šä¹‰Hookçš„ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬éœ€è¦è‡ªè¡Œå¤„ç†å’Œæ•è·è¿™äº›é”™è¯¯ã€‚

        å› ä¸ºè‡ªå®šä¹‰Hookå®é™…ä¸Šåªæ˜¯ä¸€ä¸ªæ™®é€šçš„JavaScriptå‡½æ•°ï¼Œå¹¶ä¸æ˜¯ä¸€ä¸ªReactç»„ä»¶ã€‚é”™è¯¯è¾¹ç•Œåªèƒ½æ•è·åœ¨Reactç»„ä»¶çš„æ¸²æŸ“è¿‡ç¨‹ä¸­å‘ç”Ÿçš„é”™è¯¯ï¼Œè€Œè‡ªå®šä¹‰Hookå¹¶ä¸æ˜¯ä¸€ä¸ªReactç»„ä»¶ï¼Œå› æ­¤é”™è¯¯è¾¹ç•Œæ— æ³•æ„ŸçŸ¥å’Œæ•è·è¿™äº›é”™è¯¯ã€‚

        å½“åœ¨è‡ªå®šä¹‰Hookä¸­å‘ç”Ÿé”™è¯¯æ—¶ï¼ŒReactä¼šå°†é”™è¯¯æŠ›å‡ºåˆ°è°ƒç”¨è¯¥è‡ªå®šä¹‰Hookçš„ç»„ä»¶ä¸­ã€‚è¿™æ„å‘³ç€éœ€è¦åœ¨ä½¿ç”¨è‡ªå®šä¹‰Hookçš„ç»„ä»¶ä¸­å¤„ç†å’Œæ•è·è¿™äº›é”™è¯¯ã€‚å¯ä»¥é€šè¿‡ä½¿ç”¨`try/catch`è¯­å¥æˆ–å…¶ä»–é”™è¯¯å¤„ç†æœºåˆ¶æ¥æ•è·å’Œå¤„ç†è‡ªå®šä¹‰Hookä¸­å‘ç”Ÿçš„é”™è¯¯ã€‚

        ```jsx
        import React, { useState, useEffect } from 'react';
        
        function useCustomHook() {
          const [data, setData] = useState(null);
        
          useEffect(() => {
            try {
              // æ¨¡æ‹Ÿå‘ç”Ÿé”™è¯¯çš„æ“ä½œ
              throw new Error('Error occurred in custom hook');
              // å…¶ä»–è‡ªå®šä¹‰Hookçš„é€»è¾‘
            } catch (error) {
              // åœ¨è‡ªå®šä¹‰Hookä¸­å¤„ç†é”™è¯¯
              console.error(error);
              // å¯ä»¥é€‰æ‹©è®¾ç½®é”™è¯¯çŠ¶æ€æˆ–æ‰§è¡Œå…¶ä»–é€»è¾‘
            }
          }, []);
        
          return data;
        }
        
        function App() {
          const data = useCustomHook();
        
          return (
            <div>
              {data ? (
                <h2>Data: {data}</h2>
              ) : (
                <h2>No data available</h2>
              )}
            </div>
          );
        }
        
        export default App;
        ```

     4. æœ‰é™çš„é”™è¯¯å¤„ç†èƒ½åŠ›ï¼šé”™è¯¯è¾¹ç•Œåªèƒ½å¤„ç†JavaScripté”™è¯¯ï¼Œæ— æ³•å¤„ç†å…¶ä»–ç±»å‹çš„é”™è¯¯ï¼Œå¦‚CSSé”™è¯¯æˆ–æ¸²æŸ“é—®é¢˜ã€‚

### 5. é”™è¯¯è¾¹ç•Œçš„é”™è¯¯ä¿¡æ¯æ”¶é›†å’Œä¸ŠæŠ¥

   - æ”¶é›†é”™è¯¯çš„ä¿¡æ¯å’Œå †æ ˆè½¨è¿¹
   - ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“å°†é”™è¯¯ä¿¡æ¯ä¸ŠæŠ¥ç»™æœåŠ¡å™¨

   ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“å°†é”™è¯¯ä¿¡æ¯ä¸ŠæŠ¥ç»™æœåŠ¡å™¨ï¼šæœ‰è®¸å¤šç¬¬ä¸‰æ–¹åº“å¯ç”¨äºå°†é”™è¯¯ä¿¡æ¯ä¸ŠæŠ¥ç»™æœåŠ¡å™¨ï¼Œä¾‹å¦‚Sentryã€Bugsnagã€Rollbarç­‰ã€‚è¿™äº›åº“æä¾›äº†æ•è·å’Œä¸ŠæŠ¥é”™è¯¯çš„åŠŸèƒ½ï¼Œå¹¶æä¾›äº†ä¸°å¯Œçš„é”™è¯¯è·Ÿè¸ªå’Œåˆ†æå·¥å…·ã€‚

   ```jsx
   import * as Sentry from '@sentry/react';
   
   class ErrorBoundary extends React.Component {
     componentDidCatch(error, errorInfo) {
       this.setState({
         error: error,
         errorInfo: errorInfo,
       });
   
       // ä½¿ç”¨Sentryå°†é”™è¯¯ä¿¡æ¯ä¸ŠæŠ¥ç»™æœåŠ¡å™¨
       Sentry.captureException(error, { extra: errorInfo });
     }
   
     render() {
       if (this.state.errorInfo) {
         return (
           <div>
             <h2>Something went wrong.</h2>
             <p>{this.state.error.toString()}</p>
             <p>{this.state.errorInfo.componentStack}</p>
           </div>
         );
       }
   
       return this.props.children;
     }
   }
   ```

### 6. é”™è¯¯è¾¹ç•Œçš„æ€§èƒ½å½±å“

   - é”™è¯¯è¾¹ç•Œçš„æ€§èƒ½ç‰¹æ€§å’Œæ³¨æ„äº‹é¡¹
   - é¿å…è¿‡åº¦ä½¿ç”¨é”™è¯¯è¾¹ç•Œ

é”™è¯¯è¾¹ç•Œæ˜¯ä¸€ä¸ªæœ‰ç”¨çš„å·¥å…·ï¼Œä½†æ˜¯åœ¨ä½¿ç”¨æ—¶éœ€è¦æ³¨æ„å…¶æ€§èƒ½ç‰¹æ€§å’Œé¿å…è¿‡åº¦ä½¿ç”¨ã€‚ä¸‹é¢æ˜¯å…³äºé”™è¯¯è¾¹ç•Œçš„æ€§èƒ½ç‰¹æ€§å’Œä½¿ç”¨æ³¨æ„äº‹é¡¹ï¼š

æ€§èƒ½ç‰¹æ€§ï¼š

1. é”™è¯¯è¾¹ç•Œå¯¹äºæ•è·å¹¶å¤„ç†å•ä¸ªç»„ä»¶æ ‘ä¸­çš„é”™è¯¯éå¸¸æœ‰æ•ˆã€‚å½“é”™è¯¯å‘ç”Ÿæ—¶ï¼Œé”™è¯¯è¾¹ç•Œä¼šé˜»æ­¢é”™è¯¯è¿›ä¸€æ­¥ä¼ æ’­å¹¶å¯¼è‡´æ•´ä¸ªåº”ç”¨ç¨‹åºå´©æºƒã€‚è¿™æœ‰åŠ©äºæé«˜åº”ç”¨ç¨‹åºçš„ç¨³å®šæ€§å’Œç”¨æˆ·ä½“éªŒã€‚
2. é”™è¯¯è¾¹ç•Œçš„æ€§èƒ½å¼€é”€ç›¸å¯¹è¾ƒä½ï¼Œå› ä¸ºå®ƒä»¬åªä¼šåœ¨é”™è¯¯å‘ç”Ÿæ—¶è§¦å‘ã€‚åœ¨æ­£å¸¸æƒ…å†µä¸‹ï¼Œå®ƒä»¬ä¸ä¼šå¼•å…¥ä»»ä½•é¢å¤–çš„æ€§èƒ½å¼€é”€ã€‚

æ³¨æ„äº‹é¡¹ï¼š

1. é”™è¯¯è¾¹ç•Œåº”è¯¥è¢«è°¨æ…ä½¿ç”¨ã€‚å°†å®ƒä»¬æ”¾ç½®åœ¨æ¯ä¸ªç»„ä»¶ä¸­å¯èƒ½ä¼šå¯¼è‡´è¿‡åº¦ä½¿ç”¨ï¼Œå¹¶å¯èƒ½ä¼šéšè—åº”ç”¨ç¨‹åºä¸­çš„çœŸå®é—®é¢˜ã€‚é”™è¯¯è¾¹ç•Œåº”è¯¥è¢«ç”¨äºæ•è·å’Œå¤„ç†æ— æ³•é¿å…çš„é”™è¯¯ï¼Œè€Œä¸æ˜¯ä½œä¸ºä¸è´Ÿè´£ä»»çš„å®¹é”™æœºåˆ¶ã€‚
2. é”™è¯¯è¾¹ç•Œåªèƒ½æ•è·å…¶å­ç»„ä»¶ä¸­çš„é”™è¯¯ã€‚å®ƒä»¬ä¸èƒ½æ•è·åœ¨äº‹ä»¶å¤„ç†ç¨‹åºã€å¼‚æ­¥ä»£ç ï¼ˆä¾‹å¦‚setTimeoutæˆ–Promiseï¼‰æˆ–æœåŠ¡ç«¯æ¸²æŸ“æœŸé—´å‘ç”Ÿçš„é”™è¯¯ã€‚åœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œä½ éœ€è¦ä½¿ç”¨é€‚å½“çš„é”™è¯¯å¤„ç†æœºåˆ¶æ¥æ•è·å’Œå¤„ç†é”™è¯¯ã€‚
3. é”™è¯¯è¾¹ç•Œä¸ä¼šæ•è·åœ¨ç»„ä»¶çš„constructoræ–¹æ³•ä¸­æŠ›å‡ºçš„é”™è¯¯ã€‚å¦‚æœç»„ä»¶çš„æ„é€ å‡½æ•°ä¸­å‘ç”Ÿé”™è¯¯ï¼Œå®ƒä¼šå¯¼è‡´ç»„ä»¶æ— æ³•æ­£ç¡®åœ°æŒ‚è½½å’Œæ¸²æŸ“ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥ä½¿ç”¨é™æ€getDerivedStateFromErroræ–¹æ³•æ¥å¤„ç†é”™è¯¯è¾¹ç•Œã€‚

é¿å…è¿‡åº¦ä½¿ç”¨é”™è¯¯è¾¹ç•Œçš„ä¸€äº›å»ºè®®ï¼š

1. åªåœ¨å¿…è¦æ—¶ä½¿ç”¨é”™è¯¯è¾¹ç•Œã€‚å°†é”™è¯¯è¾¹ç•Œåº”ç”¨äºæ ¸å¿ƒç»„ä»¶æˆ–å¯¹åº”ç”¨ç¨‹åºç¨³å®šæ€§è‡³å…³é‡è¦çš„éƒ¨åˆ†ã€‚
2. é¿å…åœ¨ä½çº§åˆ«çš„ç»†ç²’åº¦ç»„ä»¶ä¸­ä½¿ç”¨é”™è¯¯è¾¹ç•Œã€‚å°½é‡å°†é”™è¯¯è¾¹ç•Œæ”¾åœ¨æ›´é«˜çº§åˆ«çš„ç»„ä»¶ä¸­ï¼Œè¿™æ ·å¯ä»¥æ›´å¥½åœ°æ§åˆ¶é”™è¯¯çš„è¾¹ç•ŒèŒƒå›´ï¼ŒåŒæ—¶å‡å°‘é”™è¯¯è¾¹ç•Œçš„æ•°é‡ã€‚
3. æ·»åŠ é€‚å½“çš„é”™è¯¯å¤„ç†é€»è¾‘ã€‚é”™è¯¯è¾¹ç•Œå¯ä»¥æ•è·é”™è¯¯ï¼Œä½†æ˜¯ä½ ä»ç„¶éœ€è¦å¤„ç†å®ƒä»¬ã€‚ç¡®ä¿åœ¨é”™è¯¯è¾¹ç•Œå†…éƒ¨æ‰§è¡Œé€‚å½“çš„é”™è¯¯å¤„ç†é€»è¾‘ï¼Œä¾‹å¦‚è®°å½•é”™è¯¯ã€å‘ç”¨æˆ·æ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯æˆ–è§¦å‘é€‚å½“çš„å›é€€è¡Œä¸ºã€‚

æ€»ä¹‹ï¼Œé”™è¯¯è¾¹ç•Œæ˜¯ä¸€ä¸ªæœ‰ç”¨çš„å·¥å…·ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬åœ¨Reactåº”ç”¨ç¨‹åºä¸­æ•è·å’Œå¤„ç†é”™è¯¯ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬åº”è¯¥è°¨æ…ä½¿ç”¨å®ƒä»¬ï¼Œé¿å…è¿‡åº¦ä½¿ç”¨ï¼Œå¹¶åœ¨ä½¿ç”¨æ—¶æ³¨æ„æ€§èƒ½ç‰¹æ€§å’Œæ³¨æ„äº‹é¡¹ã€‚è¿™æ ·å¯ä»¥ç¡®ä¿é”™è¯¯è¾¹ç•Œçš„æœ‰æ•ˆæ€§ï¼Œå¹¶é¿å…å¼•å…¥ä¸å¿…è¦çš„å¼€é”€æˆ–éšè—çœŸå®é—®é¢˜ã€‚

## StrictMode

`<StrictMode>` lets you find common bugs in your components early during development.

StrictModeæ˜¯Reactä¸­çš„ä¸€ä¸ªç‰¹æ€§ï¼Œå®ƒç”¨äºå¸®åŠ©å¼€å‘è€…ç¼–å†™æ›´å¹²å‡€ã€æ›´å¯é çš„ä»£ç ã€‚StrictModeå¯ä»¥åœ¨å¼€å‘ç¯å¢ƒä¸‹è¿›è¡Œä½¿ç”¨ï¼Œå®ƒå¯ä»¥å¸®åŠ©ä½ æ£€æµ‹ä¸€äº›æ½œåœ¨çš„é—®é¢˜ï¼Œå¹¶ç»™å‡ºç›¸åº”çš„è­¦å‘Šä¿¡æ¯ã€‚

ä¸‹é¢æ˜¯StrictModeçš„ä¸€äº›å…³é”®ç‰¹ç‚¹å’ŒçŸ¥è¯†ç‚¹ï¼š

è¯†åˆ«ä¸å®‰å…¨çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä½¿ç”¨ï¼šåœ¨Reactä¸­ï¼ŒæŸäº›ç”Ÿå‘½å‘¨æœŸå‡½æ•°åœ¨æœªæ¥ç‰ˆæœ¬ä¸­å¯èƒ½ä¼šè¢«åºŸå¼ƒæˆ–æ”¹å˜è¡Œä¸ºã€‚StrictModeå¯ä»¥å¸®åŠ©ä½ æ‰¾å‡ºå¹¶è­¦å‘Šè¿™äº›ä¸å®‰å…¨çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°çš„ä½¿ç”¨ã€‚

è¯†åˆ«è¿‡æ—¶çš„APIä½¿ç”¨ï¼šReactä¼šä¸æ–­æ›´æ–°å’Œæ”¹è¿›ï¼Œä¸€äº›æ—§ç‰ˆæœ¬çš„APIå¯èƒ½å·²ç»è¢«åºŸå¼ƒæˆ–æ”¹å˜äº†è¡Œä¸ºã€‚StrictModeå¯ä»¥å¸®åŠ©ä½ æ‰¾å‡ºå¹¶è­¦å‘Šè¿™äº›è¿‡æ—¶çš„APIçš„ä½¿ç”¨ã€‚

æ£€æµ‹æ„å¤–çš„å‰¯ä½œç”¨ï¼šåœ¨Reactçš„æ¸²æŸ“è¿‡ç¨‹ä¸­ï¼ŒæŸäº›å‰¯ä½œç”¨çš„è°ƒç”¨å¯èƒ½ä¼šå¯¼è‡´ä¸å¯é¢„æµ‹çš„é—®é¢˜ã€‚StrictModeå¯ä»¥å¸®åŠ©ä½ è¯†åˆ«å¹¶è­¦å‘Šè¿™äº›æ„å¤–çš„å‰¯ä½œç”¨ã€‚

æ£€æµ‹ä¸å®‰å…¨çš„ç”¨æ³•ï¼šReactæœ‰ä¸€äº›ç”¨æ³•å¯èƒ½å¼•èµ·æ½œåœ¨çš„é—®é¢˜ï¼Œä¾‹å¦‚å¯¹äºæŸäº›äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œä½¿ç”¨äº†è¿‡æ—¶çš„æ–¹æ³•æˆ–å±æ€§ã€‚StrictModeå¯ä»¥å¸®åŠ©ä½ æ‰¾å‡ºå¹¶è­¦å‘Šè¿™äº›ä¸å®‰å…¨çš„ç”¨æ³•ã€‚

ä½¿ç”¨StrictModeéå¸¸ç®€å•ï¼Œåªéœ€è¦åœ¨åº”ç”¨çš„æ ¹ç»„ä»¶ä¸­åŒ…è£¹ä¸Šæ ‡ç­¾å³å¯ã€‚

```jsx
import React from 'react';

function App() {
  return (
    <React.StrictMode>
      {/* ä½ çš„åº”ç”¨ç»„ä»¶ */}
    </React.StrictMode>
  );
}

export default App;

```

åœ¨å¼€å‘ç¯å¢ƒä¸­ï¼Œå¯ç”¨StrictModeåï¼Œä¼šåœ¨å¼€å‘è€…æ§åˆ¶å°ä¸­æ˜¾ç¤ºå‡ºç›¸åº”çš„è­¦å‘Šä¿¡æ¯ï¼Œå¸®åŠ©ä½ å‘ç°æ½œåœ¨çš„é—®é¢˜å¹¶è¿›è¡Œä¿®å¤ã€‚è¯·æ³¨æ„ï¼ŒStrictModeåªåœ¨å¼€å‘ç¯å¢ƒä¸‹æœ‰æ•ˆï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä¸ä¼šäº§ç”Ÿä»»ä½•å½±å“ã€‚

æ€»ç»“ä¸€ä¸‹ï¼ŒStrictModeæ˜¯Reactä¸­çš„ä¸€ä¸ªç‰¹æ€§ï¼Œå®ƒå¯ä»¥å¸®åŠ©å¼€å‘è€…æ£€æµ‹ä¸€äº›æ½œåœ¨é—®é¢˜ï¼Œå¹¶ç»™å‡ºç›¸åº”çš„è­¦å‘Šä¿¡æ¯ï¼Œå¸®åŠ©æˆ‘ä»¬ç¼–å†™æ›´å¹²å‡€ã€æ›´å¯é çš„ä»£ç ã€‚

### æ€§èƒ½ç¼ºç‚¹

ä½¿ç”¨StrictModeå¯èƒ½ä¼šå¸¦æ¥ä¸€äº›æ€§èƒ½ä¸Šçš„ç¼ºç‚¹ï¼Œå°½ç®¡è¿™äº›å½±å“é€šå¸¸æ˜¯æš‚æ—¶çš„ï¼Œå¹¶ä¸”åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å¹¶ä¸ä¼šäº§ç”Ÿå½±å“ã€‚ä¸‹é¢æ˜¯ä¸€äº›å¯èƒ½çš„æ€§èƒ½ç¼ºç‚¹ï¼š

1. é¢‘ç¹çš„é‡æ–°æ¸²æŸ“ï¼šStrictModeä¼šå¢åŠ Reactçš„é‡æ–°æ¸²æŸ“æ¬¡æ•°ã€‚å®ƒä¼šåœ¨å¼€å‘è€…æ§åˆ¶å°ä¸­é‡å¤æ‰§è¡Œç»„ä»¶çš„æ¸²æŸ“ï¼Œä»¥æ£€æŸ¥æ˜¯å¦å­˜åœ¨ä¸ç¬¦åˆReactæœ€ä½³å®è·µçš„ä»£ç ã€‚è¿™å¯èƒ½ä¼šå¯¼è‡´åœ¨å¼€å‘ç¯å¢ƒä¸‹å‡ºç°é¢å¤–çš„é‡å¤æ¸²æŸ“ï¼Œä»è€Œå½±å“åº”ç”¨çš„æ€§èƒ½ã€‚
2. é™æ€ç±»å‹æ£€æŸ¥ï¼šStrictModeå¯èƒ½ä¼šè§¦å‘é™æ€ç±»å‹æ£€æŸ¥å™¨ï¼ˆå¦‚Flowæˆ–TypeScriptï¼‰ä¸­çš„é¢å¤–æ£€æŸ¥è¿‡ç¨‹ã€‚è¿™å¯èƒ½ä¼šå¯¼è‡´å¢åŠ çš„ç¼–è¯‘æ—¶é—´ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤§å‹é¡¹ç›®ä¸­ã€‚
3. é¢å¤–çš„è­¦å‘Šä¿¡æ¯ï¼šä½¿ç”¨StrictModeä¼šå¯¼è‡´åœ¨å¼€å‘è€…æ§åˆ¶å°ä¸­æ˜¾ç¤ºæ›´å¤šçš„è­¦å‘Šå’Œæç¤ºä¿¡æ¯ã€‚å°½ç®¡è¿™äº›è­¦å‘Šå¯¹äºè°ƒè¯•å’Œå‘ç°æ½œåœ¨é—®é¢˜éå¸¸æœ‰ç”¨ï¼Œä½†å®ƒä»¬åœ¨æŸäº›æƒ…å†µä¸‹å¯èƒ½ä¼šå¯¼è‡´å™ªéŸ³ï¼Œå¹¶å½±å“å¼€å‘è€…ä½“éªŒã€‚

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™äº›æ€§èƒ½ç¼ºç‚¹é€šå¸¸åªåœ¨å¼€å‘ç¯å¢ƒä¸‹å­˜åœ¨ï¼Œå¹¶ä¸”åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨StrictModeä¸ä¼šäº§ç”Ÿä»»ä½•æ€§èƒ½å½±å“ã€‚å› æ­¤ï¼Œå»ºè®®åœ¨å¼€å‘é˜¶æ®µä½¿ç”¨StrictModeæ¥å‘ç°å’Œè§£å†³æ½œåœ¨é—®é¢˜ï¼Œè€Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ç¦ç”¨StrictModeä»¥è·å¾—æ›´å¥½çš„æ€§èƒ½ã€‚

### ä½¿ç”¨æ–¹å¼

è¦ä½¿ç”¨StrictModeï¼Œåœ¨Reactåº”ç”¨çš„æ ¹ç»„ä»¶ä¸­åŒ…è£¹ä½ çš„åº”ç”¨ç»„ä»¶å³å¯ã€‚ä»¥ä¸‹æ˜¯ä½¿ç”¨StrictModeçš„å‡ ç§æ–¹å¼ï¼š

1. ä½¿ç”¨å‡½æ•°ç»„ä»¶ï¼š

```jsx
import React from 'react';

function App() {
  return (
    <React.StrictMode>
      <App />
    </React.StrictMode>
  );
}

export default App;
```

2. ä½¿ç”¨ç±»ç»„ä»¶ï¼š

```jsx
import React from 'react';

class App extends React.Component {
  render() {
    return (
      <React.StrictMode>
        <App />
      </React.StrictMode>
    );
  }
}

export default App;
```

3. ä½¿ç”¨ReactDOMè¿›è¡Œæ¸²æŸ“ï¼š

```jsx
import React from 'react';
import ReactDOM from 'react-dom';

ReactDOM.render(
  <React.StrictMode>
    <App />
  </React.StrictMode>,
  document.getElementById('root')
);
```

æ— è®ºä½ ä½¿ç”¨å“ªç§æ–¹å¼ï¼Œå°†åº”ç”¨ç»„ä»¶åŒ…è£¹åœ¨`<React.StrictMode>`æ ‡ç­¾å†…åï¼ŒStrictModeçš„ç‰¹æ€§å°±ä¼šåº”ç”¨åˆ°æ•´ä¸ªåº”ç”¨ç¨‹åºä¸­ã€‚

åœ¨å¼€å‘ç¯å¢ƒä¸­ï¼Œå¯ç”¨StrictModeåï¼ŒReactä¼šåœ¨æ§åˆ¶å°ä¸­æ˜¾ç¤ºå‡ºæ½œåœ¨çš„é—®é¢˜å’Œè­¦å‘Šä¿¡æ¯ï¼Œä»¥å¸®åŠ©ä½ å‘ç°å’Œä¿®å¤ä»£ç ä¸­çš„é—®é¢˜ã€‚ä½†è¯·æ³¨æ„ï¼ŒStrictModeåªåœ¨å¼€å‘ç¯å¢ƒä¸­æœ‰æ•ˆï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä¸ä¼šäº§ç”Ÿä»»ä½•å½±å“ã€‚

## React.memo 

React.memo æ˜¯ React æä¾›çš„ä¸€ä¸ªé«˜é˜¶ç»„ä»¶ï¼Œç”¨äºä¼˜åŒ– React ç»„ä»¶çš„æ€§èƒ½ã€‚å®ƒå¯ä»¥å°†ä¸€ä¸ªå‡½æ•°ç»„ä»¶è¿›è¡Œè®°å¿†åŒ–ï¼Œåªæœ‰åœ¨ä¼ å…¥çš„ props å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ‰ä¼šé‡æ–°æ¸²æŸ“ç»„ä»¶ï¼Œå¦åˆ™ä¼šä½¿ç”¨ä¹‹å‰çš„æ¸²æŸ“ç»“æœã€‚

React.memo çš„ä½¿ç”¨æ–¹æ³•å’Œè¯­æ³•å¦‚ä¸‹ï¼š

```js
const MemoizedComponent = React.memo(FunctionComponent);
```

React.memo æ¥å—ä¸€ä¸ªå‡½æ•°ç»„ä»¶ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªè®°å¿†åŒ–çš„ç»„ä»¶ã€‚è®°å¿†åŒ–ç»„ä»¶å°†ä¼šè®°ä½å‰ä¸€æ¬¡æ¸²æŸ“çš„ç»“æœï¼Œåªæœ‰åœ¨ä¼ å…¥çš„ props å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ‰ä¼šé‡æ–°æ¸²æŸ“ç»„ä»¶ã€‚

React.memo è¿˜å¯ä»¥æ¥å—ä¸€ä¸ªè‡ªå®šä¹‰çš„æ¯”è¾ƒå‡½æ•°ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ï¼Œç”¨äºæ¯”è¾ƒä¼ å…¥çš„ props æ˜¯å¦å‘ç”Ÿå˜åŒ–ã€‚å¯ä»¥é€šè¿‡è¿™ä¸ªæ¯”è¾ƒå‡½æ•°æ¥æ§åˆ¶å“ªäº› props çš„å˜åŒ–åº”è¯¥è§¦å‘é‡æ–°æ¸²æŸ“ã€‚

React.memo çš„ç‰¹ç‚¹å’Œä½¿ç”¨åœºæ™¯å¦‚ä¸‹ï¼š

1. ä»…åœ¨ props å‘ç”Ÿå˜åŒ–æ—¶é‡æ–°æ¸²æŸ“ç»„ä»¶ï¼Œå¯ä»¥æé«˜æ€§èƒ½ï¼›
2. å¯ä»¥é¿å…ä¸å¿…è¦çš„æ¸²æŸ“ï¼Œå‡å°‘ä¸å¿…è¦çš„è®¡ç®—å’Œå‰¯ä½œç”¨ï¼›
3. å¯¹äºæ— çŠ¶æ€çš„å‡½æ•°ç»„ä»¶ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ React.memo è¿›è¡Œä¼˜åŒ–ï¼›
4. å¯¹äºæœ‰çŠ¶æ€çš„ç±»ç»„ä»¶ï¼Œå¯ä»¥ä½¿ç”¨ PureComponent è¿›è¡Œä¼˜åŒ–ã€‚

React.memo çš„æ³¨æ„äº‹é¡¹å¦‚ä¸‹ï¼š

1. React.memo åªä¼šå¯¹ props è¿›è¡Œæµ…å±‚æ¯”è¾ƒï¼Œå¦‚æœä¼ å…¥çš„ props æ˜¯ä¸€ä¸ªå¯¹è±¡æˆ–æ•°ç»„ï¼Œéœ€è¦ç¡®ä¿å¯¹è±¡çš„å¼•ç”¨æˆ–æ•°ç»„çš„å¼•ç”¨ä¸å‘ç”Ÿå˜åŒ–ï¼Œå¦åˆ™ä¼šå¯¼è‡´ä¸æ­£ç¡®çš„æ¸²æŸ“ç»“æœï¼›
2. React.memo ä¸èƒ½ç”¨äºå¯¹ç»„ä»¶å†…éƒ¨çŠ¶æ€çš„ä¼˜åŒ–ï¼Œåªèƒ½ä¼˜åŒ–ç»„ä»¶çš„ propsï¼›
3. React.memo ä¼šåœ¨æ¸²æŸ“æœŸé—´è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœæ¯”è¾ƒçš„ä»£ä»·è¿‡å¤§ï¼Œåˆ™ä¸é€‚åˆä½¿ç”¨ React.memo è¿›è¡Œä¼˜åŒ–ã€‚

ç»¼ä¸Šæ‰€è¿°ï¼ŒReact.memo æ˜¯ä¸€ä¸ªç”¨äºä¼˜åŒ– React ç»„ä»¶æ€§èƒ½çš„å·¥å…·ï¼Œå¯ä»¥é€šè¿‡è®°å¿†åŒ–å‡½æ•°ç»„ä»¶çš„æ–¹å¼ï¼Œé¿å…ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“ã€‚ä½†éœ€è¦æ³¨æ„ä½¿ç”¨æ—¶çš„é™åˆ¶å’Œæ³¨æ„äº‹é¡¹ã€‚

ä½¿ç”¨ React.memo è¿›è¡Œç»„ä»¶ä¼˜åŒ–çš„æ­¥éª¤å¦‚ä¸‹ï¼š

```jsx
import React from 'react';

function MyComponent(props) {
  // ç»„ä»¶çš„å†…å®¹
}

// æˆ–è€…ä½¿ç”¨ç®­å¤´å‡½æ•°
const MyComponent = (props) => {
  // ç»„ä»¶çš„å†…å®¹
}

const MemoizedComponent = React.memo(MyComponent);
```

```jsx
function App() {
  return (
    <div>
      {/* ä½¿ç”¨ MemoizedComponent æ›¿ä»£åŸæ¥çš„ç»„ä»¶ */}
      <MemoizedComponent />
    </div>
  );
}
```

è¿™æ ·å°±å®Œæˆäº†å¯¹ç»„ä»¶çš„ä¼˜åŒ–ã€‚React.memo ä¼šè‡ªåŠ¨è®°å¿†ç»„ä»¶çš„æ¸²æŸ“ç»“æœï¼Œåªæœ‰åœ¨ä¼ å…¥çš„ props å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ‰ä¼šé‡æ–°æ¸²æŸ“ç»„ä»¶ã€‚

React.memo åªèƒ½ä¼˜åŒ–ç»„ä»¶çš„ propsï¼Œæ— æ³•ä¼˜åŒ–ç»„ä»¶å†…éƒ¨çš„çŠ¶æ€ã€‚å¦‚æœéœ€è¦ä¼˜åŒ–æœ‰çŠ¶æ€çš„ç±»ç»„ä»¶ï¼Œå¯ä»¥ä½¿ç”¨ React.PureComponentã€‚

å¦å¤–ï¼Œå¦‚æœéœ€è¦è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°æ¥æ§åˆ¶ props çš„å˜åŒ–è§¦å‘é‡æ–°æ¸²æŸ“çš„é€»è¾‘ï¼Œå¯ä»¥å°†è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°ä½œä¸º React.memo çš„ç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥ã€‚æ¯”è¾ƒå‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯å‰ä¸€æ¬¡çš„ props å’Œå½“å‰çš„ propsï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦éœ€è¦é‡æ–°æ¸²æŸ“ç»„ä»¶ã€‚

```jsx
const MemoizedComponent = React.memo(MyComponent, (prevProps, nextProps) => {
  // è‡ªå®šä¹‰æ¯”è¾ƒé€»è¾‘ï¼Œè¿”å› true æˆ– false
});
```

## React.cloneElement

`React.cloneElement` æ˜¯ React æä¾›çš„ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨äºå…‹éš†å’Œä¿®æ”¹å·²æœ‰çš„ React å…ƒç´ ã€‚å®ƒå¯ä»¥å…‹éš†ä¸€ä¸ªå…ƒç´ ï¼Œå¹¶ä¸ºå…‹éš†åçš„å…ƒç´ æ·»åŠ æ–°çš„ props æˆ–å­å…ƒç´ ã€‚

`React.cloneElement`çš„ä½¿ç”¨æ–¹æ³•å’Œè¯­æ³•å¦‚ä¸‹ï¼š

`React.cloneElement(element, [props], [...children])`
React.cloneElement æ¥å—ä¸€ä¸ª React å…ƒç´ ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå¯ä»¥ä¼ å…¥é¢å¤–çš„ props å’Œå­å…ƒç´ ä½œä¸ºå¯é€‰å‚æ•°ã€‚å®ƒä¼šè¿”å›ä¸€ä¸ªæ–°çš„ React å…ƒç´ ï¼Œä¿ç•™åŸæ¥å…ƒç´ çš„ç±»å‹å’Œå±æ€§ï¼Œå¹¶ä¸”å¯ä»¥ä¿®æ”¹æˆ–æ‰©å±•æ–°çš„å±æ€§å’Œå­å…ƒç´ ã€‚

React.cloneElement çš„ç‰¹ç‚¹å’Œä½¿ç”¨åœºæ™¯å¦‚ä¸‹ï¼š

1. å…‹éš† React å…ƒç´ ï¼Œå¹¶ä¸ºå…‹éš†åçš„å…ƒç´ æ·»åŠ æ–°çš„ props æˆ–å­å…ƒç´ ï¼›
2. å¯ä»¥ç”¨äºåœ¨ç»„ä»¶æ ‘ä¸­ä¼ é€’é¢å¤–çš„ propsï¼Œè€Œä¸éœ€è¦é€šè¿‡ç»„ä»¶çš„å±‚å±‚åµŒå¥—æ¥ä¼ é€’ï¼›
3. å¯ä»¥ç”¨äºåŠ¨æ€åœ°ä¿®æ”¹æˆ–æ‰©å±•å·²æœ‰çš„ React å…ƒç´ ã€‚

React.cloneElement çš„æ³¨æ„äº‹é¡¹å¦‚ä¸‹ï¼š

1. React.cloneElement åªèƒ½å…‹éš†å•ä¸ªå…ƒç´ ï¼Œæ— æ³•å…‹éš†å¤šä¸ªå…ƒç´ ï¼›
2. å…‹éš†åçš„å…ƒç´ ä¼šç»§æ‰¿åŸæ¥å…ƒç´ çš„ keyï¼Œref å’Œ propsï¼›
3. å¦‚æœä¼ å…¥äº†é¢å¤–çš„ propsï¼Œä¼šè¦†ç›–åŸæ¥å…ƒç´ çš„åŒåå±æ€§ï¼›
4. å¦‚æœä¼ å…¥äº†æ–°çš„å­å…ƒç´ ï¼Œä¼šæ›¿æ¢åŸæ¥å…ƒç´ çš„å­å…ƒç´ ã€‚
5. å…‹éš†å…ƒç´ æ—¶éœ€è¦æ³¨æ„å±æ€§çš„ç»§æ‰¿é—®é¢˜ã€‚å¯¹äºä¸€äº›ç‰¹æ®Šçš„å±æ€§ï¼Œå¦‚ key å’Œ refï¼Œéœ€è¦æ‰‹åŠ¨è¿›è¡Œå¤„ç†ã€‚
6. å¦‚æœéœ€è¦ä¿®æ”¹å­å…ƒç´ ï¼Œå¯ä»¥ä½¿ç”¨ React.Children.map æˆ– React.Children.toArray æ¥éå†å’Œå¤„ç†å­å…ƒç´ ã€‚

### refs

1. https://blog.logrocket.com/using-react-cloneelement-function/
2. https://react.dev/reference/react/cloneElement

## isValidElement 

isValidElement æ˜¯ React æä¾›çš„ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨äºåˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„ React å…ƒç´ ã€‚å®ƒå¯ä»¥ç”¨æ¥æ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦ç¬¦åˆ React å…ƒç´ çš„è§„èŒƒï¼Œå¹¶ä¸”å¯ä»¥ä½œä¸ºæ¡ä»¶åˆ¤æ–­çš„ä¾æ®ã€‚

å¤§çº²å¦‚ä¸‹ï¼š

1. æ¦‚è¿°

   - isValidElement æ˜¯ React æä¾›çš„ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨äºåˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦ä¸ºæœ‰æ•ˆçš„ React å…ƒç´ ã€‚
   - æœ‰æ•ˆçš„ React å…ƒç´ æ˜¯æŒ‡ç¬¦åˆ React å…ƒç´ è§„èŒƒçš„å¯¹è±¡ï¼Œå¯ä»¥è¢«æ¸²æŸ“åˆ°é¡µé¢ä¸Šã€‚

2. ä½¿ç”¨æ–¹æ³•

   - React.isValidElement(object)
     - objectï¼šè¦æ£€æŸ¥çš„å¯¹è±¡ã€‚
   - è¿”å›å€¼ï¼šå¦‚æœå¯¹è±¡æ˜¯æœ‰æ•ˆçš„ React å…ƒç´ ï¼Œåˆ™è¿”å› trueï¼Œå¦åˆ™è¿”å› falseã€‚

3. ç¤ºä¾‹

   ```jsx
   const element = <div>Hello, world!</div>;
   const notElement = 'Hello, world!';
   
   // åˆ¤æ–­æ˜¯å¦ä¸ºæœ‰æ•ˆçš„ React å…ƒç´ 
   console.log(React.isValidElement(element)); // è¾“å‡ºï¼štrue
   console.log(React.isValidElement(notElement)); // è¾“å‡ºï¼šfalse
   ```

4. æ³¨æ„äº‹é¡¹

   - isValidElement åªèƒ½åˆ¤æ–­å¯¹è±¡æ˜¯å¦ä¸ºæœ‰æ•ˆçš„ React å…ƒç´ ï¼Œè€Œä¸èƒ½åˆ¤æ–­æ˜¯å¦ä¸ºç»„ä»¶å®ä¾‹æˆ–å…¶ä»–ç±»å‹çš„å¯¹è±¡ã€‚
   - isValidElement å¹¶ä¸ä¼šéªŒè¯å…ƒç´ çš„å†…å®¹æˆ–å±æ€§æ˜¯å¦æ­£ç¡®ï¼Œä»…ç”¨äºåˆ¤æ–­å¯¹è±¡æ˜¯å¦ç¬¦åˆ React å…ƒç´ è§„èŒƒã€‚
   - å¦‚æœä¸€ä¸ªå¯¹è±¡æ˜¯æœ‰æ•ˆçš„å…ƒç´ ï¼Œå®ƒä»ç„¶å¯èƒ½ä¸æ˜¯æœ‰æ•ˆçš„ç»„ä»¶ã€‚å› ä¸ºç»„ä»¶å¿…é¡»æ˜¯ä¸€ä¸ªå‡½æ•°æˆ–ç±»ï¼Œè€Œä¸ä»…ä»…æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚

## flushSync

flushSync æ˜¯ React ä¸­çš„ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨äºåœ¨åŒæ­¥æ¨¡å¼ä¸‹ç«‹å³æ‰§è¡Œæ›´æ–°æ“ä½œã€‚

å¤§çº²å¦‚ä¸‹ï¼š

1. æ¦‚è¿°

   - flushSync æ˜¯ React æä¾›çš„ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨äºåœ¨åŒæ­¥æ¨¡å¼ä¸‹ç«‹å³æ‰§è¡Œæ›´æ–°æ“ä½œã€‚
   - åœ¨ React ä¸­ï¼Œé€šå¸¸æƒ…å†µä¸‹æ›´æ–°æ“ä½œä¼šè¢«æ”¾å…¥å¼‚æ­¥é˜Ÿåˆ—ä¸­ï¼Œç­‰å¾…ä¸‹æ¬¡äº‹ä»¶å¾ªç¯æ—¶æ‰¹é‡æ‰§è¡Œï¼Œä»¥æé«˜æ€§èƒ½ã€‚
   - ä½†æœ‰æ—¶éœ€è¦ç«‹å³æ‰§è¡Œæ›´æ–°æ“ä½œï¼Œæ­¤æ—¶å¯ä»¥ä½¿ç”¨ flushSync æ–¹æ³•ã€‚

2. ä½¿ç”¨æ–¹æ³•

   - React.flushSync(callback)
     - callbackï¼šå¯é€‰å‚æ•°ï¼Œæ›´æ–°æ“ä½œçš„å›è°ƒå‡½æ•°ã€‚
   - è¿”å›å€¼ï¼šæ— è¿”å›å€¼ã€‚

3. ç¤ºä¾‹

   flushSync æ–¹æ³•ä¼šåœ¨å½“å‰æ¸²æŸ“å‘¨æœŸä¸­åŒæ­¥æ‰§è¡Œ callback å‡½æ•°ä¸­çš„æ›´æ–°æ“ä½œã€‚è¿™æ„å‘³ç€ callback å‡½æ•°ä¸­çš„æ‰€æœ‰æ›´æ–°ä¼šç«‹å³ç”Ÿæ•ˆï¼Œè€Œä¸ä¼šç­‰åˆ°ä¸‹ä¸€ä¸ªæ¸²æŸ“å‘¨æœŸã€‚

   flushSync çš„ç‰¹ç‚¹å’Œä½¿ç”¨åœºæ™¯å¦‚ä¸‹ï¼š

   1. å¯ä»¥ç”¨äºæ‰‹åŠ¨æ§åˆ¶ React çš„æ›´æ–°è¿‡ç¨‹ï¼Œä½¿å¾—æ›´æ–°æ“ä½œç«‹å³ç”Ÿæ•ˆã€‚
   2. å¯ä»¥ç”¨äºåœ¨æŸäº›ç‰¹å®šæƒ…å†µä¸‹ï¼Œéœ€è¦ç«‹å³æ›´æ–° UI çš„åœºæ™¯ï¼Œå¦‚åœ¨ç”¨æˆ·äº¤äº’çš„å›è°ƒå‡½æ•°ä¸­æ‰§è¡Œæ›´æ–°æ“ä½œã€‚

   ```jsx
   Codefunction MyComponent() {
     const [count, setCount] = useState(0);
   
     function handleClick() {
       // ç«‹å³æ‰§è¡Œæ›´æ–°æ“ä½œ
       React.flushSync(() => {
         setCount(count + 1);
       });
   
       console.log('count:', count); // è¾“å‡ºï¼šcount: 1
     }
   
     return (
       <div>
         <button onClick={handleClick}>Click me</button>
         <p>Count: {count}</p>
       </div>
     );
   }
   ```

4. æ³¨æ„äº‹é¡¹

   - flushSync æ–¹æ³•ä»…åœ¨ React 16 åŠä»¥ä¸Šç‰ˆæœ¬ä¸­å¯ç”¨ã€‚
   - flushSync æ–¹æ³•ä¼šç«‹å³æ‰§è¡Œæ›´æ–°æ“ä½œï¼Œå¯èƒ½ä¼šå¯¼è‡´æ€§èƒ½é—®é¢˜ï¼Œåº”è°¨æ…ä½¿ç”¨ã€‚åªåœ¨å¿…è¦çš„æƒ…å†µä¸‹æ‰ä½¿ç”¨ã€‚å› ä¸ºå®ƒä¼šä¸­æ–­ React çš„æ­£å¸¸æ›´æ–°æµç¨‹ï¼Œå¯èƒ½ä¼šå¯¼è‡´ä¸å¯é¢„æµ‹çš„é—®é¢˜ã€‚
   - flushSync æ–¹æ³•åªèƒ½ç”¨äºåŒæ­¥æ¨¡å¼ä¸‹çš„æ›´æ–°æ“ä½œï¼Œå¼‚æ­¥æ¨¡å¼ä¸‹ä»ç„¶éœ€è¦ä½¿ç”¨ setState æˆ–å…¶ä»–æ›´æ–°æ–¹æ³•ã€‚
   - åœ¨ä½¿ç”¨ flushSync æ—¶ï¼Œåº”è¯¥ç¡®ä¿ callback å‡½æ•°ä¸­çš„æ›´æ–°æ“ä½œå°½å¯èƒ½ç®€å•ï¼Œé¿å…è€—æ—¶çš„è®¡ç®—æˆ–å‰¯ä½œç”¨ã€‚

## Profiler

Profiler æ˜¯ React æä¾›çš„ä¸€ä¸ªç»„ä»¶ï¼Œç”¨äºæµ‹é‡å’Œåˆ†æåº”ç”¨ç¨‹åºä¸­çš„æ€§èƒ½ã€‚å®ƒå¯ä»¥å¸®åŠ©å¼€å‘è€…æ‰¾å‡ºåº”ç”¨ç¨‹åºä¸­æ¸²æŸ“è¿‡ç¨‹ä¸­çš„æ€§èƒ½ç“¶é¢ˆï¼Œå¹¶åœ¨æ¯æ¬¡æ¸²æŸ“å®Œæˆåè°ƒç”¨ onRender å›è°ƒå‡½æ•°ã€‚å¼€å‘è€…å¯ä»¥é€šè¿‡è¿™ä¸ªå›è°ƒå‡½æ•°è·å–ç›¸å…³çš„æ€§èƒ½ä¿¡æ¯ï¼Œå¹¶è¿›è¡Œåˆ†æå’Œä¼˜åŒ–ã€‚

`<Profiler onRender={callback} id={id}>`

- onRenderï¼šå¿…éœ€çš„å›è°ƒå‡½æ•°ï¼Œåœ¨æ¯æ¬¡ç»„ä»¶æ¸²æŸ“å®Œæˆåæ‰§è¡Œã€‚

- idï¼šå¯é€‰å‚æ•°ï¼Œç”¨äºæ ‡è¯† Profiler ç»„ä»¶çš„å”¯ä¸€ IDã€‚

- è¿”å›å€¼ï¼šåŒ…è£¹åœ¨ Profiler ç»„ä»¶ä¸­çš„å­ç»„ä»¶ã€‚

```jsx
import { Profiler } from 'react';

function MyComponent() {
  return (
    <Profiler id="MyComponent" onRender={(id, phase, actualDuration) => {
      console.log(`Component ${id} took ${actualDuration}ms to render in ${phase} phase.`);
    }}>
      {/* å­ç»„ä»¶ */}
    </Profiler>
  );
}
```

Profiler ç»„ä»¶çš„ç‰¹ç‚¹å’Œä½¿ç”¨åœºæ™¯å¦‚ä¸‹ï¼š

1. å¯ä»¥å¸®åŠ©å¼€å‘è€…æ‰¾å‡ºåº”ç”¨ç¨‹åºä¸­æ¸²æŸ“è¿‡ç¨‹ä¸­çš„æ€§èƒ½ç“¶é¢ˆã€‚
2. å¯ä»¥æä¾›è¯¦ç»†çš„æ€§èƒ½åˆ†ææŠ¥å‘Šï¼ŒåŒ…æ‹¬ç»„ä»¶çš„æ¸²æŸ“æ—¶é—´ã€è°ƒç”¨æ¬¡æ•°ç­‰ä¿¡æ¯ã€‚
3. å¯ä»¥ç”¨äºå®šä½å’Œä¼˜åŒ–æ€§èƒ½è¾ƒå·®çš„ç»„ä»¶ï¼Œæé«˜æ•´ä½“åº”ç”¨ç¨‹åºçš„æ€§èƒ½ã€‚

Profiler ç»„ä»¶çš„æ³¨æ„äº‹é¡¹å¦‚ä¸‹ï¼š

1. ä½¿ç”¨ Profiler ç»„ä»¶å¯èƒ½ä¼šå¯¹æ€§èƒ½äº§ç”Ÿä¸€å®šçš„å½±å“ï¼Œåº”è°¨æ…ä½¿ç”¨ï¼Œé¿å…åœ¨ç”Ÿäº§ç¯å¢ƒä¸­è¿‡åº¦ä½¿ç”¨ã€‚å› ä¸ºå®ƒä¼šäº§ç”Ÿä¸€å®šçš„æ€§èƒ½å¼€é”€ã€‚
2. å»ºè®®å°† Profiler ç»„ä»¶æ”¾åœ¨åº”ç”¨ç¨‹åºçš„ä¸»è¦ç»„ä»¶å±‚çº§ä¸­ï¼Œä»¥ä¾¿å¯¹æ•´ä¸ªåº”ç”¨ç¨‹åºè¿›è¡Œæ€§èƒ½åˆ†æã€‚
3. åœ¨å¼€å‘ç¯å¢ƒä¸­ï¼ŒProfiler ç»„ä»¶ä¼šè‡ªåŠ¨è®°å½•å’Œæ˜¾ç¤ºæ€§èƒ½åˆ†æä¿¡æ¯ã€‚ä½†åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œéœ€è¦æ‰‹åŠ¨å¯ç”¨ Profiler å¹¶æä¾›æ•°æ®å­˜å‚¨ã€åˆ†æå’Œå±•ç¤ºçš„æ–¹å¼ã€‚
4. onRender å›è°ƒå‡½æ•°ä¼šåœ¨ç»„ä»¶æ¸²æŸ“å®Œæˆåè¢«è°ƒç”¨ï¼Œå¯ä»¥è·å–åˆ°ç»„ä»¶çš„ IDã€æ¸²æŸ“é˜¶æ®µï¼ˆmount/updateï¼‰å’Œå®é™…æ¸²æŸ“æ—¶é—´ç­‰ä¿¡æ¯ã€‚

Profiler ç»„ä»¶å¦‚æœåŒ…å›´åœ¨æ ¹ç»„ä»¶appå¤–ï¼Œä¼šè·å–åˆ°ä»€ä¹ˆæ˜¯æ€§èƒ½æ•°æ®ï¼š

å¦‚æœProfilerç»„ä»¶åŒ…å›´åœ¨æ ¹ç»„ä»¶appå¤–ï¼Œå®ƒå°†è·å–æ•´ä¸ªåº”ç”¨ç¨‹åºçš„æ€§èƒ½æ•°æ®ã€‚è¿™åŒ…æ‹¬æ¸²æŸ“æ ¹ç»„ä»¶åŠå…¶å­ç»„ä»¶çš„æ—¶é—´ã€ç»„ä»¶çš„æ›´æ–°æ¬¡æ•°ã€ç»„ä»¶æ¸²æŸ“çš„æ—¶é—´ç­‰ç­‰ã€‚

Profilerç»„ä»¶åªä¼šè·Ÿè¸ªå’Œæµ‹é‡ç›´æ¥åŒ…è£¹åœ¨å…¶ä¸­çš„ç»„ä»¶ã€‚å­™å­ç»„ä»¶çš„æ€§èƒ½æ•°æ®ä¸ä¼šè¢«Profilerç»„ä»¶ç›´æ¥è·å–ã€‚ä½†æ˜¯ï¼Œå¦‚æœå­™å­ç»„ä»¶åœ¨å…¶çˆ¶ç»„ä»¶ä¸­åŒ…å«äº†Profilerç»„ä»¶ï¼Œé‚£ä¹ˆProfilerç»„ä»¶å°†èƒ½å¤Ÿè·å–å­™å­ç»„ä»¶çš„æ€§èƒ½æ•°æ®ã€‚å¦‚æœæƒ³è·å–å­™å­ç»„ä»¶çš„æ€§èƒ½æ•°æ®ï¼Œæ‚¨éœ€è¦åœ¨æ¯ä¸ªç»„ä»¶å±‚æ¬¡ç»“æ„ä¸­åŒ…å«Profilerç»„ä»¶ã€‚

## React.Children

React.Childrenæ˜¯ä¸€ä¸ªç”¨äºå¤„ç†Reactç»„ä»¶å­å…ƒç´ çš„å·¥å…·é›†ï¼Œå®ƒæä¾›äº†å‡ ä¸ªæ–¹æ³•ï¼ŒåŒ…æ‹¬mapã€forEachã€countã€onlyå’ŒtoArrayã€‚

1. `React.Children.map(children, function(child, index))` - è¿™ä¸ªæ–¹æ³•å¯¹äºæ¯ä¸ªå­å…ƒç´ éƒ½ä¼šè°ƒç”¨ä¸€ä¸ªæä¾›çš„å‡½æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°çš„æ•°ç»„ï¼Œæ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½æ˜¯è¯¥å‡½æ•°è¿”å›çš„ç»“æœã€‚å®ƒç±»ä¼¼äºJavaScriptçš„Array.map()æ–¹æ³•ã€‚
2. `React.Children.forEach(children, function(child, index))` - è¿™ä¸ªæ–¹æ³•å¯¹äºæ¯ä¸ªå­å…ƒç´ éƒ½ä¼šè°ƒç”¨ä¸€ä¸ªæä¾›çš„å‡½æ•°ï¼Œä½†å®ƒæ²¡æœ‰è¿”å›å€¼ã€‚å®ƒç±»ä¼¼äºJavaScriptçš„Array.forEach()æ–¹æ³•ã€‚
3. `React.Children.count(children)` - è¿™ä¸ªæ–¹æ³•è¿”å›å­å…ƒç´ çš„æ•°é‡ã€‚å®ƒç±»ä¼¼äºJavaScriptçš„Array.lengthå±æ€§ã€‚
4. `React.Children.only(children)` - è¿™ä¸ªæ–¹æ³•ç”¨äºç¡®ä¿å­å…ƒç´ åªæœ‰ä¸€ä¸ªï¼Œå¹¶è¿”å›è¿™ä¸ªå”¯ä¸€çš„å­å…ƒç´ ã€‚å¦‚æœå­å…ƒç´ ä¸æ˜¯å”¯ä¸€çš„ï¼Œæˆ–è€…æ²¡æœ‰å­å…ƒç´ ï¼Œåˆ™ä¼šæŠ›å‡ºé”™è¯¯ã€‚
5. `React.Children.toArray(children)` - è¿™ä¸ªæ–¹æ³•å°†å­å…ƒç´ è½¬æ¢ä¸ºä¸€ä¸ªæ•°ç»„ï¼Œä¾¿äºå¯¹å…¶è¿›è¡Œå¤„ç†å’Œæ“ä½œã€‚å®ƒç±»ä¼¼äºJavaScriptçš„Array.from()æ–¹æ³•æˆ–æ‰©å±•è¿ç®—ç¬¦(...)ã€‚

`React.Children`æ˜¯Reactæä¾›çš„ä¸€ä¸ªå·¥å…·ç±»ï¼Œç”¨äºå¤„ç†Reactç»„ä»¶çš„å­å…ƒç´ ã€‚å®ƒæä¾›äº†ä¸€äº›æ–¹æ³•æ¥éå†ã€æ“ä½œå’ŒæŸ¥è¯¢å­å…ƒç´ ã€‚

ä¸‹é¢æ˜¯ä¸€äº›å¸¸ç”¨çš„React.Childrenæ–¹æ³•çš„ç¤ºä¾‹ç”¨æ³•ï¼š

### 1. mapï¼š
å¯¹å­å…ƒç´ è¿›è¡Œæ˜ å°„æ“ä½œï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°çš„å­å…ƒç´ æ•°ç»„ã€‚

```jsx
import React from 'react';

function MyComponent({ children }) {
  return (
    <div>
      {React.Children.map(children, (child) => {
        // å¯¹æ¯ä¸ªå­å…ƒç´ è¿›è¡Œæ“ä½œæˆ–åŒ…è£…
        return <span>{child}</span>;
      })}
    </div>
  );
}

// ä½¿ç”¨ç¤ºä¾‹
<MyComponent>
  <p>Hello</p>
  <p>World</p>
</MyComponent>
```

è¾“å‡ºï¼š

```html
<div>
  <span><p>Hello</p></span>
  <span><p>World</p></span>
</div>
```

### 2. forEach

å¯¹å­å…ƒç´ è¿›è¡Œè¿­ä»£æ“ä½œï¼Œæ²¡æœ‰è¿”å›å€¼ã€‚

```jsx
import React from 'react';

function MyComponent({ children }) {
  React.Children.forEach(children, (child) => {
    // å¯¹æ¯ä¸ªå­å…ƒç´ è¿›è¡Œæ“ä½œæˆ–å¤„ç†
    console.log(child);
  });

  return null;
}

// ä½¿ç”¨ç¤ºä¾‹
<MyComponent>
  <p>Hello</p>
  <p>World</p>
</MyComponent>
```

è¾“å‡ºï¼š

```html
<p>Hello</p>
<p>World</p>
```

### 3. count

è·å–å­å…ƒç´ çš„æ•°é‡ã€‚

```jsx
import React from 'react';

function MyComponent({ children }) {
  const count = React.Children.count(children);

  return <div>å­å…ƒç´ æ•°é‡: {count}</div>;
}

// ä½¿ç”¨ç¤ºä¾‹
<MyComponent>
  <p>Hello</p>
  <p>World</p>
</MyComponent>
```

è¾“å‡ºï¼š

```html
<div>å­å…ƒç´ æ•°é‡: 2</div>
```

### 4. only

ç¡®ä¿åªæœ‰ä¸€ä¸ªå­å…ƒç´ ï¼Œå¹¶è¿”å›è¯¥å­å…ƒç´ ï¼Œå¦åˆ™æŠ›å‡ºé”™è¯¯ã€‚

```jsx
import React from 'react';

function MyComponent({ children }) {
  const onlyChild = React.Children.only(children);

  return <div>å”¯ä¸€å­å…ƒç´ : {onlyChild}</div>;
}

// ä½¿ç”¨ç¤ºä¾‹
<MyComponent>
  <p>Hello</p>
</MyComponent>
```

è¾“å‡ºï¼š

```html
<div>å”¯ä¸€å­å…ƒç´ : <p>Hello</p></div>
```

### 5. toArray

å°†å­å…ƒç´ è½¬æ¢ä¸ºæ•°ç»„ã€‚

```jsx
import React from 'react';

function MyComponent({ children }) {
  const childArray = React.Children.toArray(children);

  return (
    <ul>
      {childArray.map((child, index) => (
        <li key={index}>{child}</li>
      ))}
    </ul>
  );
}

// ä½¿ç”¨ç¤ºä¾‹
<MyComponent>
  <p>Hello</p>
  <p>World</p>
</MyComponent>
```

è¾“å‡ºï¼š

```html
<ul>
  <li><p>Hello</p></li>
  <li><p>World</p></li>
</ul>
```

ä»¥ä¸Šæ˜¯React.Childrençš„ä¸€äº›å¸¸ç”¨æ–¹æ³•çš„ç¤ºä¾‹ç”¨æ³•ã€‚é€šè¿‡è¿™äº›æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥æ›´æ–¹ä¾¿åœ°æ“ä½œå’Œå¤„ç†Reactç»„ä»¶çš„å­å…ƒç´ ã€‚