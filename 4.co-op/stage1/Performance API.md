# Performance API

Performance APIï¼ˆæ€§èƒ½APIï¼‰æ˜¯ä¸€ç§Web APIï¼Œå®ƒå…è®¸å¼€å‘äººå‘˜æµ‹é‡å’Œåˆ†æWebåº”ç”¨ç¨‹åºçš„æ€§èƒ½ï¼Œä¾‹å¦‚åŠ è½½æ—¶é—´ã€å“åº”æ—¶é—´ã€èµ„æºä½¿ç”¨æƒ…å†µç­‰ç­‰ã€‚å®ƒæ˜¯ç°ä»£æµè§ˆå™¨æä¾›çš„Webå¹³å°APIçš„ä¸€éƒ¨åˆ†ã€‚

## 1. performance.timingå¯¹è±¡

> ğŸš®**å·²å¼ƒç”¨:** ä¸å†æ¨èä½¿ç”¨è¯¥ç‰¹æ€§ã€‚è™½ç„¶ä¸€äº›æµè§ˆå™¨ä»ç„¶æ”¯æŒå®ƒï¼Œä½†ä¹Ÿè®¸å·²ä»ç›¸å…³çš„ web æ ‡å‡†ä¸­ç§»é™¤ï¼Œä¹Ÿè®¸æ­£å‡†å¤‡ç§»é™¤æˆ–å‡ºäºå…¼å®¹æ€§è€Œä¿ç•™ã€‚è¯·å°½é‡ä¸è¦ä½¿ç”¨è¯¥ç‰¹æ€§ï¼Œå¹¶æ›´æ–°ç°æœ‰çš„ä»£ç ï¼›

> âš ï¸**è­¦å‘Šï¼š** è¯¥å±æ€§åœ¨ [Navigation Timing Level 2 specification](https://w3c.github.io/navigation-timing/#obsolete) ä¸­å·²ç»è¢«åºŸå¼ƒï¼Œè¯·ä½¿ç”¨ [`PerformanceNavigationTiming`](https://developer.mozilla.org/zh-CN/docs/Web/API/PerformanceNavigationTiming) æ›¿ä»£ã€‚

`PerformanceTiming` è¢«åºŸå¼ƒäº†ï¼Œå®ƒçš„æ›¿ä»£å¯¹è±¡æ˜¯ `PerformanceEntry` å’Œ `PerformanceResourceTiming` æ¥å£ã€‚è¿™ä¸¤ä¸ªæ¥å£æä¾›äº†ä¸ `PerformanceTiming` ç›¸ä¼¼çš„ä¿¡æ¯ï¼Œä½†ä½¿ç”¨æ›´åŠ çµæ´»å’Œæ ‡å‡†åŒ–ã€‚

- `PerformanceEntry` æ¥å£æä¾›äº†è®¸å¤šä¸æ€§èƒ½ç›¸å…³çš„æ•°æ®ï¼Œå¦‚å¯åŠ¨æ—¶é—´ã€ç»“æŸæ—¶é—´ã€æŒç»­æ—¶é—´å’Œåç§°ç­‰ã€‚
- `PerformanceResourceTiming` æ¥å£ç»§æ‰¿è‡ª `PerformanceEntry` æ¥å£ï¼Œæä¾›äº†æ›´å¤šå…³äºç½‘ç»œèµ„æºè¯·æ±‚å’Œå“åº”çš„ä¿¡æ¯ï¼Œå¦‚ DNS æŸ¥è¯¢ã€TCP è¿æ¥ã€SSL/TLS æ¡æ‰‹ã€HTTP è¯·æ±‚å’Œå“åº”ç­‰ã€‚

è¿™äº›æ–°çš„æ¥å£æä¾›äº†æ›´åŠ å‡†ç¡®å’Œå¯é çš„æ€§èƒ½ä¿¡æ¯ï¼ŒåŒæ—¶æ”¯æŒè·¨å¹³å°å’Œè·¨æµè§ˆå™¨çš„ä½¿ç”¨ã€‚

------

å®ƒæä¾›äº†å…³äºé¡µé¢åŠ è½½å’Œæ¸²æŸ“æ—¶é—´çš„è¯¦ç»†ä¿¡æ¯ã€‚å®ƒåŒ…å«äº†ä¸é¡µé¢ç”Ÿå‘½å‘¨æœŸç›¸å…³çš„å„ç§æ—¶é—´æˆ³ï¼Œè¿™äº›æ—¶é—´æˆ³å¯ä»¥ç”¨æ¥æµ‹é‡é¡µé¢åŠ è½½çš„å„ä¸ªé˜¶æ®µä»¥åŠç”¨æˆ·ä½“éªŒã€‚

1. navigationStartï¼šè¯¥å±æ€§è¿”å›æµè§ˆå™¨å¼€å§‹å¯¼èˆªçš„æ—¶é—´æˆ³ï¼Œé€šå¸¸æ˜¯ç”¨æˆ·è¾“å…¥ç½‘å€æˆ–ç‚¹å‡»é“¾æ¥çš„æ—¶é—´ã€‚
2. fetchStartï¼šè¯¥å±æ€§è¿”å›æµè§ˆå™¨å¼€å§‹è¯·æ±‚æ–‡æ¡£çš„æ—¶é—´æˆ³ï¼Œé€šå¸¸æ˜¯åœ¨åœ°å€æ ä¸­è¾“å…¥ç½‘å€å¹¶æŒ‰ä¸‹å›è½¦é”®çš„æ—¶é—´ã€‚
3. responseEndï¼šè¯¥å±æ€§è¿”å›æµè§ˆå™¨æ¥æ”¶åˆ°æ–‡æ¡£çš„æ—¶é—´æˆ³ï¼Œå³æ–‡æ¡£ä¸‹è½½å®Œæˆçš„æ—¶é—´ã€‚
4. domLoadingï¼šè¯¥å±æ€§è¿”å›æµè§ˆå™¨å¼€å§‹è§£ææ–‡æ¡£çš„æ—¶é—´æˆ³ï¼Œå³æµè§ˆå™¨å¼€å§‹æ„å»ºDOMæ ‘çš„æ—¶é—´ã€‚
5. domInteractiveï¼šè¯¥å±æ€§è¿”å›æµè§ˆå™¨å®Œæˆè§£ææ–‡æ¡£çš„æ—¶é—´æˆ³ï¼Œå³DOMæ ‘æ„å»ºå®Œæˆçš„æ—¶é—´ã€‚
6. domContentLoadedEventStartï¼šè¯¥å±æ€§è¿”å›æµè§ˆå™¨å¼€å§‹è§£ææ–‡æ¡£ä¸­çš„è„šæœ¬å’ŒCSSçš„æ—¶é—´æˆ³ã€‚
7. domContentLoadedEventEndï¼šè¯¥å±æ€§è¿”å›æµè§ˆå™¨å®Œæˆè§£ææ–‡æ¡£ä¸­çš„è„šæœ¬å’ŒCSSçš„æ—¶é—´æˆ³ã€‚
8. loadEventStartï¼šè¯¥å±æ€§è¿”å›æµè§ˆå™¨å¼€å§‹åŠ è½½é¡µé¢ä¸­çš„æ‰€æœ‰èµ„æºï¼ˆå¦‚å›¾åƒå’Œè„šæœ¬ï¼‰çš„æ—¶é—´æˆ³ã€‚
9. loadEventEndï¼šè¯¥å±æ€§è¿”å›æµè§ˆå™¨å®ŒæˆåŠ è½½æ‰€æœ‰èµ„æºçš„æ—¶é—´æˆ³ã€‚

æ³¨æ„âš ï¸

1. æµè§ˆå™¨å…¼å®¹æ€§ï¼šä¸æ˜¯æ‰€æœ‰çš„æµè§ˆå™¨éƒ½æ”¯æŒperformance.timingæ¥å£ï¼Œå› æ­¤éœ€è¦å…ˆæ£€æŸ¥æµè§ˆå™¨æ˜¯å¦æ”¯æŒè¯¥æ¥å£ã€‚åŒæ—¶ï¼Œä¸åŒæµè§ˆå™¨çš„æ€§èƒ½ç›‘æµ‹æ–¹å¼å¯èƒ½æœ‰æ‰€ä¸åŒï¼Œå¯èƒ½éœ€è¦å¯¹ä¸åŒæµè§ˆå™¨è¿›è¡Œç‰¹åˆ«å¤„ç†ã€‚
2. å—å…¶ä»–å› ç´ å½±å“ï¼šé¡µé¢åŠ è½½æ—¶é—´å—åˆ°å¾ˆå¤šå› ç´ çš„å½±å“ï¼Œæ¯”å¦‚ç½‘ç»œé€Ÿåº¦ã€æœåŠ¡å™¨å“åº”æ—¶é—´ã€ç¼“å­˜æƒ…å†µç­‰ç­‰ã€‚å› æ­¤ï¼Œé€šè¿‡è®¡ç®—çš„æ—¶é—´æˆ³ä¹‹å·®ï¼Œå¾—å‡ºçš„åªæ˜¯ä¸€ä¸ªè¿‘ä¼¼å€¼ï¼Œå¯èƒ½å­˜åœ¨è¯¯å·®ã€‚
3. DOMæ“ä½œï¼šè®¡ç®— `loadEventEnd` å’Œ `navigationStart` çš„æ—¶é—´æˆ³ä¹‹å·®å¹¶ä¸åŒ…æ‹¬DOMæ“ä½œæ—¶é—´ã€‚å¦‚æœé¡µé¢ä¸­å­˜åœ¨å¤§é‡çš„DOMæ“ä½œï¼Œéœ€è¦è€ƒè™‘è¿™éƒ¨åˆ†æ—¶é—´å¯¹é¡µé¢åŠ è½½æ—¶é—´çš„å½±å“ï¼Œå¹¶åœ¨è®¡ç®—æ—¶è¿›è¡Œæ’é™¤ã€‚
4. é¿å…é˜»å¡ï¼šåœ¨æµ‹é‡é¡µé¢åŠ è½½æ—¶é—´æ—¶ï¼Œåº”è¯¥å°½å¯èƒ½é¿å…é˜»å¡å…¶ä»–æ“ä½œï¼Œä»¥ä¾¿å¾—åˆ°æ›´å‡†ç¡®çš„ç»“æœã€‚å¯ä»¥ä½¿ç”¨å¼‚æ­¥åŠ è½½ç­‰æŠ€æœ¯æ¥å‡å°‘é˜»å¡æ—¶é—´ã€‚
5. æ…ç”¨åŒæ­¥è·å–ï¼šåœ¨è·å– `performance.timing` çš„æ•°æ®æ—¶ï¼Œéœ€è¦æ³¨æ„è¿™äº›æ•°æ®å¯èƒ½æ˜¯å¼‚æ­¥è·å–çš„ã€‚å¦‚æœåœ¨è·å–æ•°æ®ä¹‹å‰å°è¯•åŒæ­¥è®¿é—®è¿™äº›å±æ€§ï¼Œå¯èƒ½ä¼šå¾—åˆ°é”™è¯¯çš„ç»“æœã€‚å› æ­¤ï¼Œéœ€è¦ä½¿ç”¨å¼‚æ­¥çš„æ–¹å¼è·å– `performance.timing` çš„æ•°æ®ã€‚

------------

### a. è®¡ç®—é¡µé¢åŠ è½½æ—¶é—´

é€šè¿‡è®¡ç®—`loadEventEnd`å’Œ`navigationStart`çš„æ—¶é—´æˆ³ä¹‹å·®ï¼Œå¯ä»¥å¾—å‡ºé¡µé¢çš„åŠ è½½æ—¶é—´ã€‚

è¿™ä¸ªæ—¶é—´åŒ…æ‹¬äº†æ‰€æœ‰çš„èµ„æºåŠ è½½æ—¶é—´å’ŒDOMæ“ä½œæ—¶é—´ã€‚

```js
var pageLoadTime = performance.timing.loadEventEnd - performance.timing.navigationStart;
console.log('é¡µé¢åŠ è½½æ—¶é—´ä¸ºï¼š' + pageLoadTime + ' æ¯«ç§’');
```

https://codepen.io/linhaishe/pen/BaOXaGw?editors=0012

ä¾‹å­çš„loadEventEndè·‘å‡ºæ¥æ˜¯0ï¼Ÿï¼Ÿï¼Ÿ

**`PerformanceTiming.loadEventEnd`** æ˜¯ä¸€ä¸ªè¿”å›ä»£è¡¨ä¸€ä¸ªæ—¶åˆ»çš„ `unsigned long long` å‹åªè¯»å±æ€§ï¼Œä¸º [`load`](https://developer.mozilla.org/zh-CN/docs/Web/API/Window/load_event) äº‹ä»¶å¤„ç†ç¨‹åºè¢«ç»ˆæ­¢ï¼ŒåŠ è½½äº‹ä»¶å·²ç»å®Œæˆä¹‹æ—¶çš„ Unix æ¯«ç§’æ—¶é—´æˆ³ã€‚å¦‚æœè¿™ä¸ªäº‹ä»¶æ²¡æœ‰è¢«è§¦å‘ï¼Œæˆ–è€…æ²¡èƒ½å®Œæˆï¼Œåˆ™è¯¥å€¼å°†ä¼šè¿”å› `0`ã€‚

### b. ä¼˜åŒ–DOMæ“ä½œ

é€šè¿‡è®¡ç®—`domContentLoadedEventEnd`å’Œ`domContentLoadedEventStart`çš„æ—¶é—´æˆ³ä¹‹å·®ï¼Œå¯ä»¥å¾—å‡ºDOMæ“ä½œçš„æ—¶é—´ã€‚

å¯ä»¥æ ¹æ®DOMæ“ä½œçš„æ—¶é—´æ¥ä¼˜åŒ–ä»£ç ï¼Œå‡å°‘DOMæ“ä½œçš„æ¬¡æ•°æˆ–ä½¿ç”¨æ›´é«˜æ•ˆçš„æ“ä½œæ–¹æ³•ï¼Œä»¥æé«˜é¡µé¢æ€§èƒ½ã€‚

```js
var domLoadingTime = performance.timing.domContentLoadedEventEnd - performance.timing.domContentLoadedEventStart;
console.log('DOMæ“ä½œæ—¶é—´ä¸ºï¼š' + domLoadingTime + ' æ¯«ç§’');
```

https://codepen.io/linhaishe/pen/OJoKJvm?editors=1112

### c. è®¡ç®—èµ„æºåŠ è½½æ—¶é—´

é€šè¿‡è®¡ç®—`responseEnd`å’Œ`fetchStart`çš„æ—¶é—´æˆ³ä¹‹å·®ï¼Œå¯ä»¥å¾—å‡ºèµ„æºåŠ è½½æ—¶é—´ã€‚

å¯ä»¥æ ¹æ®èµ„æºåŠ è½½çš„æ—¶é—´æ¥è°ƒæ•´èµ„æºçš„åŠ è½½é¡ºåºå’Œä½¿ç”¨æ–¹æ³•ï¼Œä»¥æé«˜é¡µé¢æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒã€‚

```js
var resourceLoadTime = performance.timing.responseEnd - performance.timing.fetchStart;
console.log('èµ„æºåŠ è½½æ—¶é—´ä¸ºï¼š' + resourceLoadTime + ' æ¯«ç§’');
```

## 2. PerformanceNavigationTiming

`PerformanceNavigationTiming` æ¥å£ç»§æ‰¿è‡ª `PerformanceResourceTiming` æ¥å£ï¼Œå®ƒæä¾›äº†æœ‰å…³ç½‘é¡µå¯¼èˆªæ€§èƒ½çš„æ›´è¯¦ç»†çš„ä¿¡æ¯ã€‚`PerformanceNavigationTiming` å¯¹è±¡æ˜¯é€šè¿‡ `performance.getEntriesByType('navigation')` æ–¹æ³•è·å–çš„ã€‚

`PerformanceNavigationTiming` æ¥å£æä¾›äº†ä»¥ä¸‹å±æ€§ï¼š

é€šè¿‡è¿™äº›å±æ€§ï¼Œæ‚¨å¯ä»¥è·å¾—æœ‰å…³é¡µé¢å¯¼èˆªè¿‡ç¨‹çš„è¯¦ç»†ä¿¡æ¯ï¼Œä¾‹å¦‚ DNS æŸ¥è¯¢ã€TCP è¿æ¥ã€SSL/TLS æ¡æ‰‹ã€HTTP è¯·æ±‚å’Œå“åº”ã€DOM è§£æå’Œæ¸²æŸ“ç­‰è¿‡ç¨‹çš„æ—¶é—´æˆ³ã€‚è¿™äº›ä¿¡æ¯å¯ä»¥ç”¨äºåˆ†æå’Œä¼˜åŒ–é¡µé¢æ€§èƒ½ã€‚

- `unloadEventStart`ï¼šè¿”å›å‰ä¸€ä¸ªé¡µé¢çš„ `unload` äº‹ä»¶å¼€å§‹çš„æ—¶é—´æˆ³ã€‚
- `unloadEventEnd`ï¼šè¿”å›å‰ä¸€ä¸ªé¡µé¢çš„ `unload` äº‹ä»¶ç»“æŸçš„æ—¶é—´æˆ³ã€‚
- `redirectStart`ï¼šè¿”å›é‡å®šå‘å¼€å§‹æ—¶çš„æ—¶é—´æˆ³ã€‚å¦‚æœæ²¡æœ‰é‡å®šå‘å‘ç”Ÿï¼Œåˆ™è¿”å› 0ã€‚
- `redirectEnd`ï¼šè¿”å›é‡å®šå‘ç»“æŸæ—¶çš„æ—¶é—´æˆ³ã€‚å¦‚æœæ²¡æœ‰é‡å®šå‘å‘ç”Ÿï¼Œåˆ™è¿”å› 0ã€‚
- `fetchStart`ï¼šè¿”å›æµè§ˆå™¨å¼€å§‹æ£€ç´¢å½“å‰æ–‡æ¡£çš„æ—¶é—´æˆ³ã€‚
- `domainLookupStart`ï¼šè¿”å›æµè§ˆå™¨å¼€å§‹æ‰§è¡Œ DNS æŸ¥è¯¢çš„æ—¶é—´æˆ³ã€‚
- `domainLookupEnd`ï¼šè¿”å›æµè§ˆå™¨å®Œæˆ DNS æŸ¥è¯¢çš„æ—¶é—´æˆ³ã€‚
- `connectStart`ï¼šè¿”å›æµè§ˆå™¨å¼€å§‹è¿æ¥åˆ°æœåŠ¡å™¨çš„æ—¶é—´æˆ³ã€‚
- `connectEnd`ï¼šè¿”å›æµè§ˆå™¨å®Œæˆè¿æ¥åˆ°æœåŠ¡å™¨çš„æ—¶é—´æˆ³ã€‚
- `secureConnectionStart`ï¼šè¿”å›æµè§ˆå™¨å¼€å§‹å®‰å…¨è¿æ¥æ¡æ‰‹çš„æ—¶é—´æˆ³ã€‚å¦‚æœå½“å‰æ–‡æ¡£ä¸æ˜¯é€šè¿‡å®‰å…¨è¿æ¥åŠ è½½çš„ï¼Œåˆ™è¿”å› 0ã€‚
- `requestStart`ï¼šè¿”å›æµè§ˆå™¨å‘æœåŠ¡å™¨å‘é€è¯·æ±‚çš„æ—¶é—´æˆ³ã€‚
- `responseStart`ï¼šè¿”å›æµè§ˆå™¨ä»æœåŠ¡å™¨æ¥æ”¶åˆ°ç¬¬ä¸€ä¸ªå­—èŠ‚çš„æ—¶é—´æˆ³ã€‚
- `responseEnd`ï¼šè¿”å›æµè§ˆå™¨ä»æœåŠ¡å™¨æ¥æ”¶åˆ°æœ€åä¸€ä¸ªå­—èŠ‚çš„æ—¶é—´æˆ³ã€‚
- `domLoading`ï¼šè¿”å›æµè§ˆå™¨å¼€å§‹è§£ææ–‡æ¡£å¯¹è±¡æ¨¡å‹ (DOM) çš„æ—¶é—´æˆ³ã€‚
- `domInteractive`ï¼šè¿”å›æµè§ˆå™¨å®Œæˆè§£æå¹¶ç”Ÿæˆ DOM æ ‘çš„æ—¶é—´æˆ³ã€‚
- `domContentLoadedEventStart`ï¼šè¿”å› DOMContentLoaded äº‹ä»¶å¼€å§‹çš„æ—¶é—´æˆ³ã€‚
- `domContentLoadedEventEnd`ï¼šè¿”å› DOMContentLoaded äº‹ä»¶ç»“æŸçš„æ—¶é—´æˆ³ã€‚
- `domComplete`ï¼šè¿”å›æµè§ˆå™¨å®ŒæˆåŠ è½½æ‰€æœ‰å­èµ„æºçš„æ—¶é—´æˆ³ã€‚
- `loadEventStart`ï¼šè¿”å› load äº‹ä»¶å¼€å§‹çš„æ—¶é—´æˆ³ã€‚
- `loadEventEnd`ï¼šè¿”å› load äº‹ä»¶ç»“æŸçš„æ—¶é—´æˆ³ã€‚

















## å…¶ä»–å†…å®¹

Performance APIï¼ˆæ€§èƒ½APIï¼‰æ˜¯ä¸€ç§Web APIï¼Œå®ƒå…è®¸å¼€å‘äººå‘˜æµ‹é‡å’Œåˆ†æWebåº”ç”¨ç¨‹åºçš„æ€§èƒ½ã€‚å®ƒæ˜¯ç°ä»£æµè§ˆå™¨æä¾›çš„Webå¹³å°APIçš„ä¸€éƒ¨åˆ†ã€‚

é€šè¿‡Performance APIï¼Œå¼€å‘äººå‘˜å¯ä»¥æµ‹é‡Webåº”ç”¨ç¨‹åºçš„å„ä¸ªæ–¹é¢çš„æ€§èƒ½ï¼Œä¾‹å¦‚åŠ è½½æ—¶é—´ã€å“åº”æ—¶é—´ã€èµ„æºä½¿ç”¨æƒ…å†µç­‰ç­‰ã€‚Performance APIæä¾›äº†å„ç§æ–¹æ³•å’ŒæŒ‡æ ‡ï¼Œä»¥ä¾¿å¼€å‘äººå‘˜å¯ä»¥è¯†åˆ«å’Œè§£å†³æ€§èƒ½ç“¶é¢ˆå’Œé—®é¢˜ï¼Œå¹¶æé«˜åº”ç”¨ç¨‹åºçš„æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒã€‚

ä¸€äº›å¸¸ç”¨çš„Performance APIæ–¹æ³•å’ŒæŒ‡æ ‡åŒ…æ‹¬ï¼š

- performance.timingï¼šæµ‹é‡é¡µé¢åŠ è½½å’Œå„ç§äº‹ä»¶çš„æ—¶é—´ã€‚
- performance.now()ï¼šæä¾›é«˜ç²¾åº¦çš„æ—¶é—´æˆ³ï¼Œç”¨äºæµ‹é‡ä»£ç æ‰§è¡Œæ—¶é—´ã€‚
- performance.mark()å’Œperformance.measure()ï¼šå…è®¸å¼€å‘äººå‘˜æ ‡è®°å’Œæµ‹é‡åº”ç”¨ç¨‹åºä¸­çš„ç‰¹å®šæ—¶é—´é—´éš”ã€‚
- PerformanceObserver APIï¼šæä¾›äº†ä¸€ç§æ–¹æ³•æ¥ç›‘è§†æ€§èƒ½æŒ‡æ ‡å¹¶åœ¨è¾¾åˆ°ç‰¹å®šé˜ˆå€¼æ—¶è§¦å‘é€šçŸ¥ã€‚

## 

æµ‹é‡é¡µé¢åŠ è½½å’Œå„ç§äº‹ä»¶çš„æ—¶é—´

1. æ£€æµ‹é¡µé¢åŠ è½½æ—¶é—´ï¼šä½¿ç”¨Navigation Timing APIè·å–é¡µé¢å¼€å§‹åŠ è½½å’Œé¡µé¢å®ŒæˆåŠ è½½çš„æ—¶é—´ï¼Œè®¡ç®—å®ƒä»¬ä¹‹é—´çš„å·®å€¼ï¼Œå³å¯å¾—åˆ°é¡µé¢åŠ è½½æ—¶é—´ã€‚å¯ä»¥ä½¿ç”¨æ­¤ä¿¡æ¯æ¥ç¡®å®šå“ªäº›èµ„æºåŠ è½½ç¼“æ…¢ï¼Œå¹¶å°è¯•ä¼˜åŒ–å®ƒä»¬ã€‚

   ```js
   var pageLoadTime = performance.timing.loadEventEnd - performance.timing.navigationStart;
   console.log('Page load time: ' + pageLoadTime + 'ms');
   ```

2. ç›‘æµ‹èµ„æºåŠ è½½æ—¶é—´ï¼šä½¿ç”¨Resource Timing APIè·å–æ¯ä¸ªèµ„æºçš„åŠ è½½æ—¶é—´ï¼Œå¹¶ä½¿ç”¨æ­¤ä¿¡æ¯æ¥ä¼˜åŒ–èµ„æºçš„å¤§å°ã€ç¼“å­˜ç­–ç•¥å’ŒæœåŠ¡å™¨å“åº”æ—¶é—´ã€‚å¯ä»¥ç›‘æ§æ¯ä¸ªèµ„æºï¼ˆä¾‹å¦‚å›¾åƒã€CSSæ–‡ä»¶å’ŒJavaScriptæ–‡ä»¶ï¼‰çš„åŠ è½½æ—¶é—´ï¼Œå¹¶è¯†åˆ«åŠ è½½æ—¶é—´è¾ƒé•¿çš„èµ„æºã€‚ä¾‹å¦‚ï¼Œå¯ä»¥ä½¿ç”¨`performance.getEntriesByType('resource')`æ–¹æ³•è·å–æ‰€æœ‰èµ„æºçš„è¯¦ç»†è®¡æ—¶ä¿¡æ¯

   ```js
   var resources = performance.getEntriesByType('resource');
   resources.forEach(function(resource) {
     console.log(resource.name + ' load time: ' + resource.duration + 'ms');
   });
   ```

3. æ£€æµ‹ç”¨æˆ·æ“ä½œå“åº”æ—¶é—´ï¼šä½¿ç”¨User Timing APIåˆ›å»ºè‡ªå®šä¹‰æ€§èƒ½åº¦é‡æ ‡å‡†ï¼Œä¾‹å¦‚æ ‡è®°ç‰¹å®šä»£ç å—çš„å¼€å§‹å’Œç»“æŸæ—¶é—´ï¼Œå¹¶è®¡ç®—å®ƒä»¬ä¹‹é—´çš„å·®å€¼ï¼Œä»¥ç¡®å®šç”¨æˆ·æ“ä½œçš„å“åº”æ—¶é—´ã€‚

4. åˆ†æä»£ç æ€§èƒ½ï¼šä½¿ç”¨User Timing APIåˆ›å»ºæ€§èƒ½åº¦é‡æ ‡å‡†ï¼Œä¾‹å¦‚æ ‡è®°ä»£ç å—çš„å¼€å§‹å’Œç»“æŸæ—¶é—´ï¼Œå¹¶è®°å½•è¿™äº›æ ‡è®°çš„æ—¶é—´æˆ³ï¼Œä»¥ä¾¿è¿›è¡Œæ›´æ·±å…¥çš„åˆ†æã€‚

   ```js
   performance.mark('start');
   // æ‰§è¡Œä¸€äº›ä»£ç å—
   performance.mark('end');
   performance.measure('Code block execution time', 'start', 'end');
   var measure = performance.getEntriesByName('Code block execution time')[0];
   console.log('Code block execution time: ' + measure.duration + 'ms');
   ```

5. ä¼˜åŒ–åŠ¨ç”»æ€§èƒ½ï¼šä½¿ç”¨High Resolution Time APIè·å–é«˜åˆ†è¾¨ç‡çš„æ—¶é—´æˆ³ï¼Œå¹¶ä½¿ç”¨å®ƒä»¬æ¥åˆ›å»ºå¹³æ»‘çš„åŠ¨ç”»æ•ˆæœï¼Œé¿å…è§†è§‰æŠ–åŠ¨å’Œå¡é¡¿ã€‚

   ```js
   const t0 = performance.now();
   
   // æ‰§è¡Œä¸€äº›è€—æ—¶çš„ä»£ç 
   
   const t1 = performance.now();
   console.log(`æ‰§è¡Œè€—æ—¶ä¸º ${t1 - t0} æ¯«ç§’`);
   ```

6. åˆ†æäº‹ä»¶æ€§èƒ½ï¼šä½¿ç”¨Performance Timeline APIè·å–æœ‰å…³æµè§ˆå™¨äº‹ä»¶ï¼ˆä¾‹å¦‚JavaScriptæ‰§è¡Œã€CSSè§£æã€é‡ç»˜ç­‰ï¼‰çš„è¯¦ç»†è®¡æ—¶ä¿¡æ¯ï¼Œå¹¶ä½¿ç”¨æ­¤ä¿¡æ¯æ¥è¯Šæ–­æ€§èƒ½é—®é¢˜ã€‚

   Performance Timeline API åŒ…æ‹¬å¤šä¸ªç›¸å…³çš„æ¥å£ï¼Œå¸¸ç”¨çš„æœ‰ä»¥ä¸‹å‡ ä¸ªï¼š

   1. PerformanceEntry æ¥å£ï¼šä»£è¡¨äº†ä¸€ä¸ªæ€§èƒ½è®°å½•æ¡ç›®ï¼Œå…¶ä¸­åŒ…å«äº†æŸä¸ªæ€§èƒ½äº‹ä»¶çš„ç›¸å…³ä¿¡æ¯ï¼Œæ¯”å¦‚åç§°ã€å¼€å§‹æ—¶é—´ã€ç»“æŸæ—¶é—´ç­‰ã€‚

   2. PerformanceObserver æ¥å£ï¼šç”¨äºè§‚å¯Ÿæ€§èƒ½æ¡ç›®çš„å˜åŒ–ï¼Œå½“æœ‰æ–°çš„æ€§èƒ½æ¡ç›®è¢«æ·»åŠ æ—¶ï¼Œå¯ä»¥æ”¶åˆ°é€šçŸ¥å¹¶è¿›è¡Œå¤„ç†ã€‚

   3. Performance å¯¹è±¡ï¼šä»£è¡¨äº†å½“å‰é¡µé¢çš„æ€§èƒ½ä¿¡æ¯ï¼ŒåŒ…å«äº†å„ç§æ€§èƒ½æŒ‡æ ‡ï¼Œæ¯”å¦‚é¡µé¢åŠ è½½æ—¶é—´ã€èµ„æºåŠ è½½æ—¶é—´ã€å“åº”æ—¶é—´ç­‰ã€‚

      ```js
      const observer = new PerformanceObserver((list) => {
        const entries = list.getEntries();
        for (const entry of entries) {
          if (entry instanceof PerformanceResourceTiming) {
            console.log(`èµ„æº ${entry.name} çš„åŠ è½½æ—¶é—´ä¸º ${entry.duration} æ¯«ç§’`);
          }
        }
      });
      
      observer.observe({ entryTypes: ["resource"] });
      
      ```

      Performance Timeline API å¯èƒ½ä¼šå½±å“æµè§ˆå™¨çš„æ€§èƒ½ï¼Œå› æ­¤åœ¨ä½¿ç”¨æ—¶åº”è¯¥è°¨æ…ã€‚å¦‚æœåªéœ€è¦è·å–ç®€å•çš„æ€§èƒ½æŒ‡æ ‡ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ Performance å¯¹è±¡æä¾›çš„æ–¹æ³•ï¼Œæ¯”å¦‚ `performance.timing`ã€`performance.navigation` ç­‰ã€‚

