# æ€§èƒ½ä¼˜åŒ–

# å°¾é€’å½’ä¼˜åŒ–çš„é€»è¾‘å’ŒåŸç†

```js
function factorial(n) {
    if (n < 2) {
        return 1;
    }
    return n * factorial(n - 1);
}
```

æ­¤æ–¹æ³•å­˜åœ¨çš„é—®é¢˜ï¼š

è¿™ä¸ªå‡½æ•°ä¼šåœ¨æ‰§è¡Œçš„ç¬é—´åœ¨å†…å­˜ä¸­æŒæœ‰nä»½factorialå‡½æ•°çš„ä¸Šä¸‹æ–‡ï¼Œç›¸åº”åœ°æˆ‘ä»¬å°±ä»˜å‡ºäº†nä»½å†…å­˜çš„ä»£ä»·ã€‚æ˜¾è€Œæ˜“è§ï¼Œè¿™æ ·çš„ç¨‹åºåœ¨ç©ºé—´å¤æ‚åº¦çš„è€ƒé‡ä¸Šæ˜¯æä¸å‹å¥½çš„ã€‚åŒæ—¶ï¼Œä¼´éšç€æ¯æ¬¡å‡½æ•°æ‰§è¡ŒæˆåŠŸï¼Œè¿”å›ã€å‡ºæ ˆï¼Œä¹Ÿä¼šå¯¹CPUé€ æˆä¸€å®šçš„å‹åŠ›ã€‚

```js
// å°¾é€’å½’ä¼˜åŒ–
function factorial(n, result = 1) {
    if (n < 2) {
        return result;
    }
    return factorial(n - 1, n * result);
}
```
å…¶æ‰§è¡Œé€Ÿåº¦å°±è·Ÿæ™®é€šçš„å¾ªç¯æ²¡ä»€ä¹ˆåŒºåˆ«äº†ï¼Œå¹¶ä¸”é€’å½’çš„æ·±åº¦ä¹Ÿä¸å—ä»»ä½•é™åˆ¶ï¼Œä¹Ÿä¸ç”¨æ‹…å¿ƒè°ƒç”¨æ ˆæº¢å‡ºæˆ–å†…å­˜è€—å°½ã€‚

åƒä¸Šé¢ç¬¬äºŒç§å†™æ³•ï¼Œåœ¨æ–¹æ³•ç»“æŸæ—¶å‡ºç°çš„è¡¨è¾¾å¼ï¼Œä»…ä»…æ˜¯è‡ªèº«çš„å‡½æ•°è°ƒç”¨çš„é€’å½’ï¼Œå°±æ˜¯å°¾é€’å½’ã€‚

å°¾é€’å½’ä»£ç å°±æ˜¯ä¸€ç§å…¸å‹çš„å°¾è°ƒç”¨ï¼Œåªæ˜¯å› ä¸ºè°ƒç”¨çš„å‡½æ•°ä¹Ÿæ˜¯è‡ªèº«ï¼Œæ‰€ä»¥åŒæ—¶å‘½ä¸­äº†é€’å½’çš„æ¦‚å¿µ


> å°¾è°ƒç”¨(tail-call)æ˜¯æŒ‡ä¸€ä¸ªå‡½æ•°é‡Œçš„æœ€åä¸€ä¸ªåŠ¨ä½œæ˜¯è¿”å›ä¸€ä¸ªå‡½æ•°çš„è°ƒç”¨ç»“æœçš„æƒ…å½¢ï¼Œå³æœ€åä¸€æ­¥æ–°è°ƒç”¨çš„è¿”å›å€¼ç›´æ¥è¢«å½“å‰å‡½æ•°çš„è¿”å›ç»“æœã€‚

> ä¼ ç»Ÿæ¨¡å¼çš„ç¼–è¯‘å™¨å¯¹äºå°¾è°ƒç”¨çš„å¤„ç†æ–¹å¼å°±åƒå¤„ç†å…¶ä»–æ™®é€šå‡½æ•°è°ƒç”¨ä¸€æ ·ï¼Œæ€»ä¼šåœ¨è°ƒç”¨æ—¶åˆ›å»ºä¸€ä¸ªæ–°çš„æ ˆå¸§ï¼ˆstack frameï¼‰å¹¶å°†å…¶æ¨å…¥è°ƒç”¨æ ˆé¡¶éƒ¨ï¼Œç”¨äºè¡¨ç¤ºè¯¥æ¬¡å‡½æ•°è°ƒç”¨ã€‚

## ä¼˜åŒ–åŸç†

å°¾é€’å½’ä¼˜åŒ–æ˜¯æŒ‡åœ¨å‡½æ•°è°ƒç”¨æ ˆä¸­ï¼Œå°†é€’å½’å‡½æ•°å®ç°æˆå°¾é€’å½’çš„å½¢å¼ï¼Œä½¿å¾—è®¡ç®—ä»…å ç”¨å¸¸é‡æ ˆç©ºé—´ã€‚

å®ƒçš„åŸºæœ¬åŸç†æ˜¯ï¼šå½“é€’å½’å‡½æ•°è°ƒç”¨æ—¶ï¼Œå¦‚æœå·²ç»æ²¡æœ‰å‰©ä½™çš„æ“ä½œéœ€è¦æ‰§è¡Œï¼Œé‚£ä¹ˆå½“å‰çš„æ ˆå¸§å°±å†ä¹Ÿæ²¡æœ‰ç”¨å¤„äº†ã€‚å°¾é€’å½’é€šè¿‡åœ¨é€’å½’è°ƒç”¨æ—¶åˆ©ç”¨ä¸Šä¸€ä¸ªæ ˆå¸§æ¥å­˜å‚¨å½“å‰çš„çŠ¶æ€ï¼Œé¿å…åˆ›å»ºæ–°çš„æ ˆå¸§ï¼Œä»è€Œå®ç°äº†ç©ºé—´çš„ä¼˜åŒ–ã€‚

ä»¥æ±‚é˜¶ä¹˜ä¸ºä¾‹ï¼Œæ™®é€šé€’å½’å‡½æ•°åœ¨è®¡ç®—n!æ—¶éœ€è¦åˆ›å»ºnä¸ªæ ˆå¸§ï¼Œè€Œé‡‡ç”¨å°¾é€’å½’ä¼˜åŒ–åï¼Œåªéœ€è¦ä¸€ä¸ªæ ˆå¸§å°±å¯ä»¥å®Œæˆè®¡ç®—ã€‚å› æ­¤ï¼Œå°¾é€’å½’ä¼˜åŒ–å¯ä»¥æå¤§åœ°èŠ‚çœè®¡ç®—èµ„æºï¼Œæé«˜ç¨‹åºæ•ˆç‡ã€‚

## å‡½æ•°æ ˆçš„ä½œç”¨

æ ˆ - åå…¥å…ˆå‡º - ä¿æŒå…¥å£ç¯å¢ƒ

```js
function main() {
    //...
    foo1();
    //...
    foo2();
    //...
    return;
}

main();
```
ä¸Šé¢æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ä»£ç ï¼Œæˆ‘ä»¬ç°åœ¨ç®€å•åœ¨å¤§è„‘é‡Œé¢æ¨¡æ‹Ÿä¸€ä¸‹è¿™ä¸ª main å‡½æ•°è°ƒç”¨çš„æ•´ä¸ªè¿‡ç¨‹ï¼Œ`$`å­—ç¬¦ç”¨äºè¡¨ç¤ºå åœ°ï¼š

1. é¦–å…ˆæˆ‘ä»¬å»ºç«‹ä¸€ä¸ªå‡½æ•°æ ˆã€‚ `$main` å‡½æ•°è°ƒç”¨ï¼Œå°† `main` å‡½æ•°å‹è¿›å‡½æ•°æ ˆé‡Œé¢ã€‚`$ main`

2. åšå®Œäº†ä¸€äº›æ“ä½œä»¥åï¼Œè°ƒç”¨ foo1 å‡½æ•°ï¼Œfoo1 å‡½æ•°å…¥æ ˆã€‚`$` main foo1 foo1 å‡½æ•°è¿”å›å¹¶å‡ºæ ˆã€‚`$ main`

3. åšå®Œä¸€äº›æ“ä½œä»¥åï¼Œè°ƒç”¨ foo2 å‡½æ•°ï¼Œfoo2 å‡½æ•°å…¥æ ˆã€‚`$` main foo2 foo2 å‡½æ•°è¿”å›å¹¶å‡ºæ ˆã€‚`$ main`

4. åšå®Œä½™ä¸‹çš„æ“ä½œä»¥åï¼Œmainå‡½æ•°è¿”å›å¹¶å‡ºæ ˆã€‚`$`

ä¸Šé¢è¿™ä¸ªè¿‡ç¨‹è¯´æ˜äº†å‡½æ•°æ ˆçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿå°±æ˜¯ç¬¬ 4 å’Œç¬¬ 6 æ­¥çš„ä½œç”¨ï¼Œè®© foo1 å’Œ foo2 å‡½æ•°æ‰§è¡Œå®Œäº†ä»¥åèƒ½å¤Ÿåœ¨å›åˆ° main å‡½æ•°è°ƒç”¨ foo1 å’Œ foo2 åŸæ¥çš„åœ°æ–¹ã€‚è¿™å°±æ˜¯æ ˆï¼Œè¿™ç§â€åå…¥å…ˆå‡ºâ€œçš„æ•°æ®ç»“æ„çš„æ„ä¹‰æ‰€åœ¨ã€‚

å°¾é€’å½’ - ä¼˜åŒ–å‡½æ•°çš„è°ƒç”¨æ ˆ

ref:
1. https://www.freecodecamp.org/chinese/news/js-tail-recursion/
2. https://zhuanlan.zhihu.com/p/36587160


# äº‹ä»¶å†’æ³¡

Event Bubbling is a concept in the DOM (Document Object Model). It happens when an element receives an event, and that event bubbles up (or you can say is transmitted or propagated) to its parent and ancestor elements in the DOM tree until it gets to the root element.

When elements receive events, such events propagate to their parents and ancestors upward in the DOM tree. This is the concept of Event Bubbling, and it allows parent elements to handle events that occur on their children's elements.

Event objects also have the stopPropagation method which you can use to stop the bubbling of an event. This is useful in cases where you want an element to receive a click event only when it is clicked and not when any of its children elements are clicked.

stopPropagation and preventDefault are methods of the event object for stopping default behaviors. Here is an article on the difference between these methods.

äº‹ä»¶å†’æ³¡æ˜¯ DOMï¼ˆæ–‡æ¡£å¯¹è±¡æ¨¡å‹ï¼‰ä¸­çš„ä¸€ä¸ªæ¦‚å¿µã€‚å½“ä¸€ä¸ªå…ƒç´ æ¥æ”¶åˆ°ä¸€ä¸ªäº‹ä»¶æ—¶ï¼Œè¯¥äº‹ä»¶ä¼šå‘ä¸Šå†’æ³¡ï¼ˆæˆ–è€…è¯´ä¼ é€’æˆ–è€…ä¼ æ’­ï¼‰åˆ°å…¶çˆ¶å…ƒç´ å’Œç¥–å…ˆå…ƒç´ ç›´åˆ°å®ƒåˆ°è¾¾æ ¹å…ƒç´ ã€‚

å½“å…ƒç´ æ¥æ”¶äº‹ä»¶æ—¶ï¼Œè¿™äº›äº‹ä»¶ä¼šå‘ä¸Šåœ¨ DOM æ ‘ä¸­ä¼ æ’­åˆ°å…¶çˆ¶å…ƒç´ å’Œç¥–å…ˆå…ƒç´ ã€‚è¿™å°±æ˜¯äº‹ä»¶å†’æ³¡çš„æ¦‚å¿µï¼Œå®ƒå…è®¸çˆ¶å…ƒç´ å¤„ç†å‘ç”Ÿåœ¨å­å…ƒç´ ä¸Šçš„äº‹ä»¶ã€‚

äº‹ä»¶å¯¹è±¡ä¹Ÿæœ‰ stopPropagation æ–¹æ³•ï¼Œå¯ä»¥ç”¨å®ƒæ¥é˜»æ­¢äº‹ä»¶çš„å†’æ³¡ã€‚è¿™åœ¨æŸäº›æƒ…å†µä¸‹éå¸¸æœ‰ç”¨ï¼Œä¾‹å¦‚å½“ä½ æƒ³è®©ä¸€ä¸ªå…ƒç´ åªåœ¨è¢«å•å‡»æ—¶æ‰æ¥æ”¶ç‚¹å‡»äº‹ä»¶ï¼Œè€Œä¸æ˜¯åœ¨ä»»ä½•å…¶å­å…ƒç´ è¢«å•å‡»æ—¶éƒ½æ¥æ”¶äº‹ä»¶ã€‚

stopPropagation å’Œ preventDefault æ˜¯äº‹ä»¶å¯¹è±¡çš„æ–¹æ³•ï¼Œç”¨äºåœæ­¢é»˜è®¤è¡Œä¸º

`event.preventDefault()`
This method prevents default actions that browsers make when an event is triggered.

```html
<script>
const form = document.getElementById('form')

form.addEventListener('submit', (event) => {
  event.preventDefault()
  
  // process data and submit a request manually
})

const form = document.getElementById('form')

form.addEventListener('submit', (event) => {
  event.preventDefault()
  
  // process data and submit a request manually
})
</script>

<a id="link" href="https://google.com">Google</a>

```
`stopPropagation`
Propagation is the act of spreading something, in this case, events. The stopPropagation method is used to prevent the spreading of events when an event is triggered on an element.

Propagation æ˜¯æŒ‡ä¼ æ’­æŸäº›äº‹ç‰©çš„è¡Œä¸ºï¼Œè€Œåœ¨è¿™é‡ŒæŒ‡çš„æ˜¯äº‹ä»¶ã€‚stopPropagation æ–¹æ³•ç”¨äºåœ¨å…ƒç´ è§¦å‘äº‹ä»¶æ—¶é˜²æ­¢äº‹ä»¶ç»§ç»­ä¼ æ’­ã€‚

# äº‹ä»¶å§”æ‰˜

äº‹ä»¶å§”æ‰˜ï¼ˆEvent Delegationï¼‰æ˜¯ä¸€ç§å¸¸ç”¨çš„JavaScriptäº‹ä»¶å¤„ç†æŠ€å·§ï¼Œä¹Ÿç§°ä¸ºäº‹ä»¶ä»£ç†ã€‚å…¶åŸç†æ˜¯åˆ©ç”¨DOMå…ƒç´ çš„äº‹ä»¶å†’æ³¡æœºåˆ¶ï¼Œå°†éœ€è¦ç»‘å®šçš„äº‹ä»¶å§”æ‰˜ç»™çˆ¶å…ƒç´ æˆ–ç¥–å…ˆå…ƒç´ æ¥å¤„ç†ã€‚è¿™ä¸ªæŠ€å·§å¯ä»¥å‡å°‘äº‹ä»¶ç»‘å®šçš„æ¬¡æ•°ï¼ŒèŠ‚çœå†…å­˜ï¼Œæé«˜æ€§èƒ½ã€‚åœ¨åŠ¨æ€æ·»åŠ æˆ–åˆ é™¤DOMå…ƒç´ æ—¶ï¼Œä½¿ç”¨äº‹ä»¶å§”æ‰˜å¯ä»¥é¿å…é¢‘ç¹åœ°ç»‘å®šå’Œè§£ç»‘äº‹ä»¶ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨äº‹ä»¶å§”æ‰˜ï¼Œä½ å¯ä»¥åœ¨çˆ¶å…ƒç´ ä¸Šç»‘å®šä¸€ä¸ªç‚¹å‡»äº‹ä»¶ï¼Œè€Œä¸å¿…ä¸ºå­å…ƒç´ é€ä¸€ç»‘å®šç‚¹å‡»äº‹ä»¶ï¼Œè¿™æ ·å¯ä»¥å‡å°‘å¾ˆå¤šé‡å¤å·¥ä½œ

äº‹ä»¶å§”æ‰˜æ˜¯ä¸€ç§æœ‰ç”¨çš„æ¨¡å¼ï¼Œå®ƒå…è®¸ç¼–å†™æ›´æ¸…æ™°çš„ä»£ç ï¼Œå¹¶ä½¿ç”¨ç±»ä¼¼çš„é€»è¾‘åˆ›å»ºè¾ƒå°‘çš„äº‹ä»¶ç›‘å¬å™¨ã€‚

è¯¥ç®—æ³•å¦‚ä¸‹ï¼š

1. å°†å•ä¸ªå¤„ç†ç¨‹åºæ”¾ç½®åœ¨å®¹å™¨ä¸Šã€‚ 
2. åœ¨å¤„ç†ç¨‹åºä¸­ï¼Œæ£€æŸ¥æºå…ƒç´  event.targetã€‚ 
3. å¦‚æœäº‹ä»¶å‘ç”Ÿåœ¨æˆ‘ä»¬æ„Ÿå…´è¶£çš„å…ƒç´ å†…éƒ¨ï¼Œåˆ™å¤„ç†è¯¥äº‹ä»¶ã€‚

Event Delegation is a useful pattern that allows you to write cleaner code, and create fewer event listeners with similar logic.

The algorithm:

Put a single handler on the container.
In the handler â€“ check the source element event.target.
If the event happened inside an element that interests us, then handle the event.


refsï¼š
1. https://javascript.info/event-delegation#summary
2. https://www.freecodecamp.org/news/event-delegation-javascript/
3. https://www.freecodecamp.org/news/manage-default-behavior-in-browser/
4. https://www.freecodecamp.org/news/event-bubbling-in-javascript/#how-to-stop-event-bubbling

# æœ€ä½³å®è·µ

# ä½¿ç”¨è®¾è®¡æ¨¡å¼å‡å°‘å†—ä½™ä»£ç 

è¿™ä¸ªä¸æ˜¯ä¸€ä¸¤å¤©èƒ½çœ‹å®Œçš„å§ ğŸ˜„

ã€ŠJavaScript è®¾è®¡æ¨¡å¼ä¸å¼€å‘å®è·µã€‹

# å‡½æ•°é¿å… Side Effect

## side effect

A few more classic cases of the side effects are,

| Classic Cases of Side Effects | Definition                 |
| ----------------------------- | -------------------------- |
| Mutating the input itself     | æ”¹å˜è¾“å…¥æœ¬èº«               |
| Querying/Updating DOM         | æŸ¥è¯¢/æ›´æ–°DOM               |
| Logging(even in the console)  | è®°å½•æ—¥å¿—ï¼ˆç”šè‡³åœ¨æ§åˆ¶å°ä¸­ï¼‰ |
| Making an XHR/fetch call      | è¿›è¡ŒXHR/fetchè°ƒç”¨          |

## æ–¹å¼

å‡½æ•°é¿å…äº§ç”Ÿå‰¯ä½œç”¨ï¼ˆside effectï¼‰çš„æ–¹æ³•ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§ï¼š

| æŠ€æœ¯       | æè¿°                                                         |
| ---------- | ------------------------------------------------------------ |
| çº¯å‡½æ•°     | åœ¨è¾“å…¥ç›¸åŒçš„æƒ…å†µä¸‹ï¼Œå§‹ç»ˆè¿”å›ç›¸åŒçš„ç»“æœï¼Œä¸ä¼šä¿®æ”¹ä¼ å…¥çš„å‚æ•°æˆ–å¼•èµ·å…¶ä»–çš„å‰¯ä½œç”¨ã€‚ |
| ä¸å¯å˜æ•°æ® | ä¸€æ—¦åˆ›å»ºï¼Œå°±ä¸èƒ½è¢«ä¿®æ”¹çš„æ•°æ®ç»“æ„ã€‚ä½¿ç”¨ä¸å¯å˜æ•°æ®å¯ä»¥é˜²æ­¢å‡½æ•°ä¿®æ”¹æ•°æ®ç»“æ„æˆ–å…±äº«çš„çŠ¶æ€ã€‚ |
| å‡½æ•°å¼ç¼–ç¨‹ | å¼ºè°ƒå‡½æ•°çš„çº¯ç²¹æ€§å’Œä¸å¯å˜æ•°æ®ï¼Œä½¿ç”¨å‡½æ•°æ¥å¤„ç†æ•°æ®ï¼Œè€Œä¸æ˜¯ç›´æ¥ä¿®æ”¹æ•°æ®ã€‚ |
| å‘½ä»¤å¼ç¼–ç¨‹ | åŸºäºè¯­å¥çš„ç¼–ç¨‹èŒƒå¼ï¼Œé€šå¸¸æ¶‰åŠä¿®æ”¹å˜é‡å’ŒçŠ¶æ€ã€‚ä¸ºäº†é¿å…å‰¯ä½œç”¨ï¼Œå¯ä»¥ä½¿ç”¨æ›´ä¸ºå‡½æ•°å¼çš„ç¼–ç¨‹é£æ ¼ã€‚ |

åœ¨å‡½æ•°å¼ç¼–ç¨‹ä¸­ï¼Œå‡½æ•°é€šå¸¸è¢«è®¾è®¡ä¸ºé¿å…äº§ç”Ÿå‰¯ä½œç”¨ã€‚å› æ­¤ï¼Œå¤§éƒ¨åˆ†å‡½æ•°è°ƒç”¨çš„ç»“æœéƒ½æ˜¯ä»è¾“å…¥å‚æ•°ä¸­æ´¾ç”Ÿå‡ºçš„å€¼ã€‚æ²¡æœ‰å‰¯ä½œç”¨ä½¿å¾—è¿›è¡Œå½¢å¼åŒ–éªŒè¯æ›´åŠ å®¹æ˜“ï¼Œå¹¶ä¸”å€¾å‘äºä½¿ç”¨æ›´ç®€å•çš„æµ‹è¯•æ–¹æ³•ã€‚

å‡½æ•°å¼ç¼–ç¨‹æ˜¯ä¸€ç§æ„å»ºåº”ç”¨ç¨‹åºçš„è¿‡ç¨‹ï¼Œä¸»è¦ç”±çº¯å‡½æ•°ç»„æˆï¼Œé¿å…å…±äº«çŠ¶æ€ã€å¯¹æ•°æ®çš„å˜å¼‚å’Œå‰¯ä½œç”¨ã€‚å®ƒæ˜¯ä¸€ç§å£°æ˜å¼çš„ç¼–ç¨‹æ–¹å¼ï¼Œè€Œä¸æ˜¯å‘½ä»¤å¼çš„ï¼Œåº”ç”¨ç¨‹åºçŠ¶æ€ä»ä¸€ä¸ªå‡½æ•°æµå‘ä¸‹ä¸€ä¸ªå‡½æ•°ã€‚

å‡½æ•°å¯ä»¥é¿å… Side Effectã€‚å‡½æ•°æ˜¯ä¸€ç§å°è£…ä»£ç çš„æ–¹å¼ï¼Œå®ƒå¯ä»¥å°†æ•°æ®å’Œæ“ä½œå°è£…åœ¨ä¸€èµ·ã€‚é€šè¿‡ä¼ é€’å‚æ•°çš„æ–¹å¼ï¼Œå‡½æ•°å¯ä»¥æ¥æ”¶è¾“å…¥å¹¶è¿”å›è¾“å‡ºï¼Œè€Œä¸ä¼šæ”¹å˜å¤–éƒ¨çš„çŠ¶æ€æˆ–ç¯å¢ƒã€‚ä½¿ç”¨çº¯å‡½æ•°ï¼ˆPure Functionï¼‰å¯ä»¥å®Œå…¨é¿å… Side Effectï¼Œå› ä¸ºå®ƒä»¬ä¸ä¼šä¿®æ”¹ä»»ä½•å¤–éƒ¨çš„çŠ¶æ€æˆ–ç¯å¢ƒã€‚å¦‚æœå‡½æ•°æ²¡æœ‰ Side Effectï¼Œé‚£ä¹ˆå®ƒä»¬å°†æ›´å®¹æ˜“è¿›è¡Œæµ‹è¯•ã€è°ƒè¯•å’Œç»´æŠ¤ï¼Œä¹Ÿæ›´å®¹æ˜“å®ç°å‡½æ•°çš„å¤ç”¨æ€§ã€‚

In functional programming, functions are often designed to avoid side effects, with the result of most function calls being a derived value from the input parameters. The lack of side effects makes it easier to do formal verifications, and tends to lean towards an easier method of testing.

Functional programming is the process of building applications, composing it primarily of pure functions, avoiding shared state, mutations on data and side effects. It is declarative rather than imperative, and application state flows from one function to the next.

## çº¯å‡½æ•°

ä¸ºäº†ç®€åŒ–èµ·è§ï¼Œæˆ‘ä»¬å¯ä»¥è®¤ä¸ºçº¯å‡½æ•°æ˜¯ä¸€ç§ä»…ç”±å…¶è¾“å…¥ç¡®å®šè¾“å‡ºä¸”å¯¹å¤–éƒ¨ä¸–ç•Œæ²¡æœ‰å¯è§‚å¯Ÿå½±å“çš„å‡½æ•°ã€‚å®ƒä»¬æä¾›çš„ä¸»è¦ä¼˜ç‚¹ï¼ˆåœ¨æˆ‘çœ‹æ¥ï¼‰æ˜¯å¯é¢„æµ‹æ€§ï¼Œå¦‚æœä½ ç»™å®ƒä»¬ç›¸åŒçš„è¾“å…¥å€¼ï¼Œå®ƒä»¬æ€»æ˜¯ä¼šè¿”å›ç›¸åŒçš„è¾“å‡ºã€‚

| Criteria    | Definition                                                   |
| ----------- | ------------------------------------------------------------ |
| Predictable | ç¡®å®šç›¸åŒè¾“å…¥æ—¶äº§ç”Ÿå¯é¢„æµ‹è¾“å‡º                                 |
| Readable    | ä»»ä½•é˜…è¯»è¯¥å‡½æ•°ä½œä¸ºç‹¬ç«‹å•å…ƒçš„äººéƒ½èƒ½å®Œå…¨ç†è§£å…¶ç›®çš„             |
| Reusable    | å¯ä»¥åœ¨æºä»£ç çš„å¤šä¸ªä½ç½®é‡å¤ä½¿ç”¨è¯¥å‡½æ•°ï¼Œè€Œä¸ä¼šæ”¹å˜å…¶å’Œè°ƒç”¨è€…çš„è¡Œä¸º |
| Testable    | æˆ‘ä»¬å¯ä»¥å°†å…¶ä½œä¸ºç‹¬ç«‹å•å…ƒè¿›è¡Œæµ‹è¯•                             |

### å¹‚ç­‰å‡½æ•°

`Idempotent function` (å¹‚ç­‰å‡½æ•°) æ˜¯æŒ‡ä¸€ä¸ªå‡½æ•°æ‰§è¡Œå¤šæ¬¡æ‰€å¾—åˆ°çš„ç»“æœå’Œæ‰§è¡Œä¸€æ¬¡æ‰€å¾—åˆ°çš„ç»“æœæ˜¯ç›¸åŒçš„ã€‚æ›´å…·ä½“åœ°è¯´ï¼Œå¦‚æœå¯¹äºæŸä¸ªå‡½æ•° f(x)ï¼Œå½“ä½¿ç”¨ x ä½œä¸ºè¾“å…¥æ—¶ï¼Œå¤šæ¬¡æ‰§è¡Œ `f(f(f(...f(x)...)))` æ‰€å¾—åˆ°çš„ç»“æœä¸å•æ¬¡æ‰§è¡Œæ‰€å¾—åˆ°çš„ç»“æœä¸€è‡´ï¼Œåˆ™ç§°è¯¥å‡½æ•°æ˜¯` idempotent function`ã€‚

ä¾‹å¦‚ï¼Œåœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼ŒHTTP PUT å’Œ DELETE æ–¹æ³•é€šå¸¸è¢«è®¤ä¸ºæ˜¯ idempotent æ–¹æ³•ï¼Œå› ä¸ºæ— è®ºæ‰§è¡Œå¤šå°‘æ¬¡è¯·æ±‚ï¼Œå…¶ç»“æœéƒ½æ˜¯ç›¸åŒçš„ã€‚å³ä½¿å†æ¬¡æ‰§è¡Œè¿™äº›è¯·æ±‚ï¼Œä¹Ÿä¸ä¼šå¯¹æœåŠ¡ç«¯äº§ç”Ÿä»»ä½•å‰¯ä½œç”¨ã€‚

`Idempotent function`åœ¨æŠ½è±¡ä»£æ•°å’Œå‡½æ•°å¼ç¼–ç¨‹ä¸­ä¹Ÿæœ‰é‡è¦çš„åº”ç”¨

### å¹‚ç­‰å‡½æ•°å’Œçº¯å‡½æ•°çš„åŒºåˆ«

å¹‚ç­‰å‡½æ•°æŒ‡çš„æ˜¯ä¸€ç§å‡½æ•°ï¼Œæ— è®ºè°ƒç”¨å¤šå°‘æ¬¡ï¼Œå…¶è¿”å›ç»“æœéƒ½ç›¸åŒï¼Œä¸ä¼šäº§ç”Ÿå‰¯ä½œç”¨ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹äºç›¸åŒçš„è¾“å…¥ï¼Œæ¯æ¬¡è°ƒç”¨è¯¥å‡½æ•°éƒ½ä¼šè¿”å›ç›¸åŒçš„è¾“å‡ºï¼Œå¹¶ä¸”ä¸ä¼šå¯¹ç³»ç»ŸçŠ¶æ€é€ æˆä»»ä½•å½±å“ã€‚

è€Œçº¯å‡½æ•°æ˜¯æŒ‡ä¸€ä¸ªå‡½æ•°ï¼Œé™¤äº†å…¶è¿”å›å€¼ä»¥å¤–ï¼Œæ²¡æœ‰å…¶ä»–å¯¹ç³»ç»ŸçŠ¶æ€äº§ç”Ÿå½±å“çš„è¡Œä¸ºã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œçº¯å‡½æ•°ä¸ä¼šä¿®æ”¹å¤–éƒ¨å˜é‡æˆ–è€…äº§ç”Ÿä»»ä½•å‰¯ä½œç”¨ï¼Œä¹Ÿä¸ä¾èµ–äºä»»ä½•å¤–éƒ¨çŠ¶æ€ã€‚

å¯ä»¥è¯´ï¼Œå¹‚ç­‰å‡½æ•°æ˜¯çº¯å‡½æ•°çš„ä¸€ä¸ªå­é›†ï¼Œå› ä¸ºå¹‚ç­‰å‡½æ•°ä¹Ÿæ˜¯ä¸ä¼šäº§ç”Ÿå‰¯ä½œç”¨çš„å‡½æ•°ï¼Œä½†æ˜¯å¹‚ç­‰å‡½æ•°çš„è¿”å›å€¼å¯èƒ½å—åˆ°å¤–éƒ¨çŠ¶æ€çš„å½±å“ï¼Œè€Œçº¯å‡½æ•°åˆ™ä¸ä¼šã€‚

## ä¸å¯æ”¹å˜æ•°æ® Immutability

ä¸å¯å˜å¯¹è±¡æ˜¯åœ¨åˆ›å»ºåæ— æ³•é€šè¿‡å±æ€§æ“ä½œæˆ–èµ‹å€¼è¿›è¡Œä¿®æ”¹çš„å¯¹è±¡ã€‚å¯å˜å¯¹è±¡æ˜¯å¯ä»¥ä¿®æ”¹çš„å¯¹è±¡ã€‚

### æ–¹å¼ï¼š 

1. const
2. Object.freeze()
3. ç¬¬ä¸‰æ–¹å·¥å…·åº“:  [immutable.js](https://immutable-js.github.io/immutable-js/) and [mori](https://swannodette.github.io/mori/).

`const` declares a variable that cannot be reassigned after it has been created.

immutable objects can still be achieved in JavaScript by using the [Object.freeze](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/freeze),which prevents the modification of the object one-level deep, thus making it partially immutable.

`const` å’Œ `Object.freeze()` éƒ½æ˜¯åªèƒ½é˜»æ­¢å¯¹è±¡ç¬¬ä¸€å±‚çš„æ•°æ®ä¸è¢«æ”¹å˜ã€‚

ref:
1. https://thejs.dev/jmitchell/what-are-side-effects-and-what-you-can-do-about-them-jws
2. https://www.linkedin.com/advice/0/what-some-common-sources-side-effects-functional
3. https://blog.greenroots.info/what-are-pure-functions-and-side-effects-in-javascript
4. https://stackoverflow.com/questions/67450779/how-to-avoid-side-effects-javascript
5. https://dev.to/vonheikemen/dealing-with-side-effects-and-pure-functions-in-javascript-16mg
6. https://medium.com/m/global-identity-2?redirectUrl=https%3A%2F%2Fjavascript.plainenglish.io%2Fhow-to-avoid-side-effects-using-pure-functions-in-javascript-366acaafb60c
   

# å¼‚å¸¸ç›‘æ§ & å…œåº•

å¼‚å¸¸ç›‘æ§å’Œå…œåº•éƒ½æ˜¯ä¸ºäº†ç¡®ä¿ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œå¯é æ€§ï¼Œä»¥ä¾¿åœ¨å‡ºç°å¼‚å¸¸æƒ…å†µæ—¶èƒ½å¤ŸåŠæ—¶å¤„ç†ï¼Œç¡®ä¿ç³»ç»Ÿèƒ½å¤ŸæŒç»­è¿è¡Œå¹¶æä¾›æ­£å¸¸çš„æœåŠ¡ã€‚

å¼‚å¸¸ç›‘æ§å¯ä»¥å¸®åŠ©å¼€å‘äººå‘˜å’Œè¿ç»´äººå‘˜åŠæ—¶å‘ç°ç³»ç»Ÿä¸­çš„å¼‚å¸¸æƒ…å†µï¼Œä¾‹å¦‚åº”ç”¨ç¨‹åºå´©æºƒã€æ•°æ®åº“è¿æ¥é”™è¯¯ç­‰ï¼Œè¿™äº›å¼‚å¸¸å¯èƒ½å¯¼è‡´ç³»ç»Ÿæ•…éšœæˆ–æ•°æ®ä¸¢å¤±ã€‚é€šè¿‡åŠæ—¶å‘ç°å’Œå¤„ç†å¼‚å¸¸æƒ…å†µï¼Œå¯ä»¥å‡å°‘ç³»ç»Ÿæ•…éšœçš„é£é™©ï¼Œæé«˜ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œå¯é æ€§ã€‚

å…œåº•æ˜¯æŒ‡åœ¨ç³»ç»Ÿå‡ºç°æ•…éšœæˆ–å¼‚å¸¸æƒ…å†µæ—¶ï¼Œç³»ç»Ÿèƒ½å¤Ÿè‡ªåŠ¨åˆ‡æ¢åˆ°å¤‡ç”¨çš„æ–¹æ¡ˆæˆ–æœºåˆ¶ï¼Œä»¥ç¡®ä¿ç³»ç»Ÿçš„æŒç»­è¿è¡Œã€‚ä¾‹å¦‚ï¼Œåœ¨ç”µå•†ç³»ç»Ÿä¸­ï¼Œå¦‚æœæ”¯ä»˜ç³»ç»Ÿå‡ºç°æ•…éšœï¼Œç³»ç»Ÿå¯ä»¥è‡ªåŠ¨åˆ‡æ¢åˆ°å¦ä¸€ä¸ªæ”¯ä»˜ç³»ç»Ÿï¼Œä»¥ä¿è¯ç”¨æˆ·çš„è®¢å•èƒ½å¤Ÿæ­£å¸¸å®Œæˆã€‚

ref:

1. https://juejin.cn/post/7112243495347175432#heading-14
2. https://www.cnblogs.com/moqiutao/p/14746734.html
3. https://levelup.gitconnected.com/the-definite-guide-to-handling-errors-gracefully-in-javascript-58424d9c60e6
4. https://rollbar.com/blog/guide-to-frontend-error-handling/
5. https://blog.bitsrc.io/best-practices-in-handling-errors-in-web-components-fb4fdb5eccb
6. https://zhuanlan.zhihu.com/p/80287643
7. https://scoutapm.com/blog/frontend-performance-monitoring
